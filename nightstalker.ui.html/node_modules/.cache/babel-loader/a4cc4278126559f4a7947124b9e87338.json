{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { CompositeField, FormField, graphics, objects, Widget } from '../../index';\n/**\n * JavaScript port of org.eclipse.scout.rt.ui.swing.form.fields.SwingScoutFormFieldGridData.\n * Merged with the base class LogicalGridData (for the default values). We don't need the base\n * class standalone, since we only used LGL for the group-box body in Html UI.\n */\n\nvar LogicalGridData = /*#__PURE__*/function () {\n  function LogicalGridData(vararg) {\n    _classCallCheck(this, LogicalGridData);\n\n    this.gridx = 0;\n    this.gridy = 0;\n    this.gridw = 1;\n    this.gridh = 1;\n    this.weightx = 0.0;\n    this.weighty = 0.0;\n    this.useUiWidth = false;\n    this.useUiHeight = false;\n    this.widthHint = 0;\n    this.heightHint = 0;\n    this.horizontalAlignment = -1;\n    this.verticalAlignment = -1;\n    this.fillHorizontal = true;\n    this.fillVertical = true;\n\n    if (vararg instanceof LogicalGridData) {\n      // copy properties from LGD template\n      objects.copyProperties(vararg, this);\n    } else if (vararg instanceof Widget) {\n      // work with widget / validate\n      this.widget = vararg;\n    } else {// NOP - default CTOR\n    }\n  }\n\n  _createClass(LogicalGridData, [{\n    key: \"validate\",\n    value: function validate() {\n      if (!this.widget) {\n        return;\n      }\n\n      var data = this.widget.gridData; // setup constraints\n\n      this.gridx = data.x;\n      this.gridy = data.y;\n      this.gridw = data.w;\n      this.gridh = data.h;\n      this.weightx = data.weightX;\n      this.weighty = data.weightY;\n\n      if (this.weightx < 0) {\n        // inherit\n        this.weightx = Math.max(1.0, this.gridw);\n      }\n\n      if (this.weighty < 0) {\n        // inherit\n        this.weighty = this._inheritWeightY();\n      }\n\n      this.useUiWidth = data.useUiWidth;\n      this.useUiHeight = data.useUiHeight;\n      this.horizontalAlignment = data.horizontalAlignment;\n      this.verticalAlignment = data.verticalAlignment;\n      this.fillHorizontal = data.fillHorizontal;\n      this.fillVertical = data.fillVertical;\n      this.widthHint = data.widthInPixel;\n      this.heightHint = data.heightInPixel; // when having the label on top, the row height has to be increased\n\n      if (this.widget.labelVisible && this.widget.$label && this.widget.labelPosition === FormField.LabelPosition.TOP) {\n        this.logicalRowHeightAddition = graphics.prefSize(this.widget.$label, true).height;\n      } else {\n        this.logicalRowHeightAddition = 0;\n      }\n    }\n  }, {\n    key: \"_inheritWeightY\",\n    value: function _inheritWeightY() {\n      var d = this._inheritWeightYRec(this.widget);\n\n      if (d === null) {\n        var data = this.widget.gridData;\n\n        if (data.weightY >= 0) {\n          d = data.weightY;\n        } else {\n          d = data.h >= 2 ? data.h : 0;\n        }\n      }\n\n      return d;\n    }\n  }, {\n    key: \"_inheritWeightYRec\",\n    value: function _inheritWeightYRec(widget) {\n      var found = false,\n          sumWy = 0; // The children may have a dirty grid -> make sure the grid is valid before reading any grid data properties\n\n      widget.validateLogicalGrid();\n\n      if (widget instanceof CompositeField) {\n        var i,\n            inheritWeightY,\n            child,\n            children = widget.getFields();\n\n        for (i = 0; i < children.length; i++) {\n          child = children[i];\n\n          if (child.isVisible()) {\n            var data = child.gridData;\n\n            if (data.weightY < 0) {\n              inheritWeightY = this._inheritWeightYRec(child);\n\n              if (inheritWeightY !== null) {\n                found = true;\n                sumWy += inheritWeightY;\n              }\n            } else {\n              found = true;\n              sumWy += data.weightY;\n            }\n          }\n        }\n      } else {\n        sumWy = widget.gridData.h >= 2 ? widget.gridData.h : 0;\n        found = true;\n      }\n\n      if (found) {\n        return sumWy;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"isValidateRoot\",\n    value: function isValidateRoot() {\n      return !this.useUiHeight && !this.useUiWidth && this.fillVertical && this.fillHorizontal;\n    }\n  }]);\n\n  return LogicalGridData;\n}();\n\nexport { LogicalGridData as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/layout/logicalgrid/LogicalGridData.js"],"names":["CompositeField","FormField","graphics","objects","Widget","LogicalGridData","vararg","gridx","gridy","gridw","gridh","weightx","weighty","useUiWidth","useUiHeight","widthHint","heightHint","horizontalAlignment","verticalAlignment","fillHorizontal","fillVertical","copyProperties","widget","data","gridData","x","y","w","h","weightX","weightY","Math","max","_inheritWeightY","widthInPixel","heightInPixel","labelVisible","$label","labelPosition","LabelPosition","TOP","logicalRowHeightAddition","prefSize","height","d","_inheritWeightYRec","found","sumWy","validateLogicalGrid","i","inheritWeightY","child","children","getFields","length","isVisible"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,cAAR,EAAwBC,SAAxB,EAAmCC,QAAnC,EAA6CC,OAA7C,EAAsDC,MAAtD,QAAmE,aAAnE;AAEA;AACA;AACA;AACA;AACA;;IACqBC,e;AAEnB,2BAAYC,MAAZ,EAAoB;AAAA;;AAClB,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,OAAL,GAAe,GAAf;AACA,SAAKC,OAAL,GAAe,GAAf;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,mBAAL,GAA2B,CAAC,CAA5B;AACA,SAAKC,iBAAL,GAAyB,CAAC,CAA1B;AACA,SAAKC,cAAL,GAAsB,IAAtB;AACA,SAAKC,YAAL,GAAoB,IAApB;;AAEA,QAAId,MAAM,YAAYD,eAAtB,EAAuC;AACrC;AACAF,MAAAA,OAAO,CAACkB,cAAR,CAAuBf,MAAvB,EAA+B,IAA/B;AACD,KAHD,MAGO,IAAIA,MAAM,YAAYF,MAAtB,EAA8B;AACnC;AACA,WAAKkB,MAAL,GAAchB,MAAd;AACD,KAHM,MAGA,CACL;AACD;AACF;;;;+BAEU;AACT,UAAI,CAAC,KAAKgB,MAAV,EAAkB;AAChB;AACD;;AAED,UAAIC,IAAI,GAAG,KAAKD,MAAL,CAAYE,QAAvB,CALS,CAMT;;AACA,WAAKjB,KAAL,GAAagB,IAAI,CAACE,CAAlB;AACA,WAAKjB,KAAL,GAAae,IAAI,CAACG,CAAlB;AACA,WAAKjB,KAAL,GAAac,IAAI,CAACI,CAAlB;AACA,WAAKjB,KAAL,GAAaa,IAAI,CAACK,CAAlB;AACA,WAAKjB,OAAL,GAAeY,IAAI,CAACM,OAApB;AACA,WAAKjB,OAAL,GAAeW,IAAI,CAACO,OAApB;;AACA,UAAI,KAAKnB,OAAL,GAAe,CAAnB,EAAsB;AACpB;AACA,aAAKA,OAAL,GAAeoB,IAAI,CAACC,GAAL,CAAS,GAAT,EAAc,KAAKvB,KAAnB,CAAf;AACD;;AACD,UAAI,KAAKG,OAAL,GAAe,CAAnB,EAAsB;AACpB;AACA,aAAKA,OAAL,GAAe,KAAKqB,eAAL,EAAf;AACD;;AACD,WAAKpB,UAAL,GAAkBU,IAAI,CAACV,UAAvB;AACA,WAAKC,WAAL,GAAmBS,IAAI,CAACT,WAAxB;AACA,WAAKG,mBAAL,GAA2BM,IAAI,CAACN,mBAAhC;AACA,WAAKC,iBAAL,GAAyBK,IAAI,CAACL,iBAA9B;AACA,WAAKC,cAAL,GAAsBI,IAAI,CAACJ,cAA3B;AACA,WAAKC,YAAL,GAAoBG,IAAI,CAACH,YAAzB;AACA,WAAKL,SAAL,GAAiBQ,IAAI,CAACW,YAAtB;AACA,WAAKlB,UAAL,GAAkBO,IAAI,CAACY,aAAvB,CA5BS,CA8BT;;AACA,UAAI,KAAKb,MAAL,CAAYc,YAAZ,IAA4B,KAAKd,MAAL,CAAYe,MAAxC,IAAkD,KAAKf,MAAL,CAAYgB,aAAZ,KAA8BrC,SAAS,CAACsC,aAAV,CAAwBC,GAA5G,EAAiH;AAC/G,aAAKC,wBAAL,GAAgCvC,QAAQ,CAACwC,QAAT,CAAkB,KAAKpB,MAAL,CAAYe,MAA9B,EAAsC,IAAtC,EAA4CM,MAA5E;AACD,OAFD,MAEO;AACL,aAAKF,wBAAL,GAAgC,CAAhC;AACD;AACF;;;sCAEiB;AAChB,UAAIG,CAAC,GAAG,KAAKC,kBAAL,CAAwB,KAAKvB,MAA7B,CAAR;;AACA,UAAIsB,CAAC,KAAK,IAAV,EAAgB;AACd,YAAIrB,IAAI,GAAG,KAAKD,MAAL,CAAYE,QAAvB;;AACA,YAAID,IAAI,CAACO,OAAL,IAAgB,CAApB,EAAuB;AACrBc,UAAAA,CAAC,GAAGrB,IAAI,CAACO,OAAT;AACD,SAFD,MAEO;AACLc,UAAAA,CAAC,GAAGrB,IAAI,CAACK,CAAL,IAAU,CAAV,GAAcL,IAAI,CAACK,CAAnB,GAAuB,CAA3B;AACD;AACF;;AACD,aAAOgB,CAAP;AACD;;;uCAEkBtB,M,EAAQ;AACzB,UAAIwB,KAAK,GAAG,KAAZ;AAAA,UACEC,KAAK,GAAG,CADV,CADyB,CAIzB;;AACAzB,MAAAA,MAAM,CAAC0B,mBAAP;;AAEA,UAAI1B,MAAM,YAAYtB,cAAtB,EAAsC;AACpC,YAAIiD,CAAJ;AAAA,YAAOC,cAAP;AAAA,YAAuBC,KAAvB;AAAA,YAA8BC,QAAQ,GAAG9B,MAAM,CAAC+B,SAAP,EAAzC;;AACA,aAAKJ,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGG,QAAQ,CAACE,MAAzB,EAAiCL,CAAC,EAAlC,EAAsC;AACpCE,UAAAA,KAAK,GAAGC,QAAQ,CAACH,CAAD,CAAhB;;AACA,cAAIE,KAAK,CAACI,SAAN,EAAJ,EAAuB;AACrB,gBAAIhC,IAAI,GAAG4B,KAAK,CAAC3B,QAAjB;;AACA,gBAAID,IAAI,CAACO,OAAL,GAAe,CAAnB,EAAsB;AACpBoB,cAAAA,cAAc,GAAG,KAAKL,kBAAL,CAAwBM,KAAxB,CAAjB;;AACA,kBAAID,cAAc,KAAK,IAAvB,EAA6B;AAC3BJ,gBAAAA,KAAK,GAAG,IAAR;AACAC,gBAAAA,KAAK,IAAIG,cAAT;AACD;AACF,aAND,MAMO;AACLJ,cAAAA,KAAK,GAAG,IAAR;AACAC,cAAAA,KAAK,IAAIxB,IAAI,CAACO,OAAd;AACD;AACF;AACF;AACF,OAlBD,MAkBO;AACLiB,QAAAA,KAAK,GAAIzB,MAAM,CAACE,QAAP,CAAgBI,CAAhB,IAAqB,CAArB,GAAyBN,MAAM,CAACE,QAAP,CAAgBI,CAAzC,GAA6C,CAAtD;AACAkB,QAAAA,KAAK,GAAG,IAAR;AACD;;AACD,UAAIA,KAAJ,EAAW;AACT,eAAOC,KAAP;AACD;;AACD,aAAO,IAAP;AACD;;;qCAEgB;AACf,aAAO,CAAC,KAAKjC,WAAN,IAAqB,CAAC,KAAKD,UAA3B,IAAyC,KAAKO,YAA9C,IAA8D,KAAKD,cAA1E;AACD;;;;;;SArHkBd,e","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {CompositeField, FormField, graphics, objects, Widget} from '../../index';\n\n/**\n * JavaScript port of org.eclipse.scout.rt.ui.swing.form.fields.SwingScoutFormFieldGridData.\n * Merged with the base class LogicalGridData (for the default values). We don't need the base\n * class standalone, since we only used LGL for the group-box body in Html UI.\n */\nexport default class LogicalGridData {\n\n  constructor(vararg) {\n    this.gridx = 0;\n    this.gridy = 0;\n    this.gridw = 1;\n    this.gridh = 1;\n    this.weightx = 0.0;\n    this.weighty = 0.0;\n    this.useUiWidth = false;\n    this.useUiHeight = false;\n    this.widthHint = 0;\n    this.heightHint = 0;\n    this.horizontalAlignment = -1;\n    this.verticalAlignment = -1;\n    this.fillHorizontal = true;\n    this.fillVertical = true;\n\n    if (vararg instanceof LogicalGridData) {\n      // copy properties from LGD template\n      objects.copyProperties(vararg, this);\n    } else if (vararg instanceof Widget) {\n      // work with widget / validate\n      this.widget = vararg;\n    } else {\n      // NOP - default CTOR\n    }\n  }\n\n  validate() {\n    if (!this.widget) {\n      return;\n    }\n\n    var data = this.widget.gridData;\n    // setup constraints\n    this.gridx = data.x;\n    this.gridy = data.y;\n    this.gridw = data.w;\n    this.gridh = data.h;\n    this.weightx = data.weightX;\n    this.weighty = data.weightY;\n    if (this.weightx < 0) {\n      // inherit\n      this.weightx = Math.max(1.0, this.gridw);\n    }\n    if (this.weighty < 0) {\n      // inherit\n      this.weighty = this._inheritWeightY();\n    }\n    this.useUiWidth = data.useUiWidth;\n    this.useUiHeight = data.useUiHeight;\n    this.horizontalAlignment = data.horizontalAlignment;\n    this.verticalAlignment = data.verticalAlignment;\n    this.fillHorizontal = data.fillHorizontal;\n    this.fillVertical = data.fillVertical;\n    this.widthHint = data.widthInPixel;\n    this.heightHint = data.heightInPixel;\n\n    // when having the label on top, the row height has to be increased\n    if (this.widget.labelVisible && this.widget.$label && this.widget.labelPosition === FormField.LabelPosition.TOP) {\n      this.logicalRowHeightAddition = graphics.prefSize(this.widget.$label, true).height;\n    } else {\n      this.logicalRowHeightAddition = 0;\n    }\n  }\n\n  _inheritWeightY() {\n    var d = this._inheritWeightYRec(this.widget);\n    if (d === null) {\n      var data = this.widget.gridData;\n      if (data.weightY >= 0) {\n        d = data.weightY;\n      } else {\n        d = data.h >= 2 ? data.h : 0;\n      }\n    }\n    return d;\n  }\n\n  _inheritWeightYRec(widget) {\n    var found = false,\n      sumWy = 0;\n\n    // The children may have a dirty grid -> make sure the grid is valid before reading any grid data properties\n    widget.validateLogicalGrid();\n\n    if (widget instanceof CompositeField) {\n      var i, inheritWeightY, child, children = widget.getFields();\n      for (i = 0; i < children.length; i++) {\n        child = children[i];\n        if (child.isVisible()) {\n          var data = child.gridData;\n          if (data.weightY < 0) {\n            inheritWeightY = this._inheritWeightYRec(child);\n            if (inheritWeightY !== null) {\n              found = true;\n              sumWy += inheritWeightY;\n            }\n          } else {\n            found = true;\n            sumWy += data.weightY;\n          }\n        }\n      }\n    } else {\n      sumWy = (widget.gridData.h >= 2 ? widget.gridData.h : 0);\n      found = true;\n    }\n    if (found) {\n      return sumWy;\n    }\n    return null;\n  }\n\n  isValidateRoot() {\n    return !this.useUiHeight && !this.useUiWidth && this.fillVertical && this.fillHorizontal;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}