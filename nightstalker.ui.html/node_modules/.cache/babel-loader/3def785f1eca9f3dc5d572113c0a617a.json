{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { graphics, HtmlComponent, Insets, PopupLayout } from '../index';\n\nvar PopupWithHeadLayout = /*#__PURE__*/function (_PopupLayout) {\n  _inherits(PopupWithHeadLayout, _PopupLayout);\n\n  var _super = _createSuper(PopupWithHeadLayout);\n\n  function PopupWithHeadLayout(popup) {\n    _classCallCheck(this, PopupWithHeadLayout);\n\n    return _super.call(this, popup);\n  }\n\n  _createClass(PopupWithHeadLayout, [{\n    key: \"_setSize\",\n    value: function _setSize(prefSize) {\n      _get(_getPrototypeOf(PopupWithHeadLayout.prototype), \"_setSize\", this).call(this, prefSize);\n\n      var htmlComp = this.popup.htmlComp,\n          popupSize = prefSize,\n          htmlBody = HtmlComponent.optGet(this.popup.$body); // While animating the body animation sets the size\n\n      if (!this.popup.bodyAnimating) {\n        // Set size of body\n        popupSize = popupSize.subtract(htmlComp.insets());\n\n        if (this._headVisible) {\n          var headSize = graphics.size(this.popup.$head, true); // Adjust popup size if head changed size\n\n          if (popupSize.width < headSize.width) {\n            popupSize.width = headSize.width;\n          }\n        }\n\n        htmlBody.setSize(popupSize);\n      }\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_adjustSize\",\n    value: function _adjustSize(prefSize) {\n      return this._adjustSizeWithAnchor(prefSize);\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_calcMaxSizeAroundAnchor\",\n    value: function _calcMaxSizeAroundAnchor() {\n      if (!this.popup._headVisible) {\n        return _get(_getPrototypeOf(PopupWithHeadLayout.prototype), \"_calcMaxSizeAroundAnchor\", this).call(this);\n      } // Position the popup at the desired location before doing any calculations,\n      // but do no try to switch the position if there is not enough space\n\n\n      this._position(false);\n\n      var maxWidthLeft,\n          maxWidthRight,\n          maxHeightDown,\n          maxHeightUp,\n          htmlComp = this.popup.htmlComp,\n          windowPaddingLeft = this.popup.windowPaddingX,\n          windowPaddingRight = this.popup.windowPaddingX,\n          windowPaddingY = this.popup.windowPaddingY,\n          popupBounds = graphics.offsetBounds(htmlComp.$comp),\n          popupHeadBounds = graphics.offsetBounds(this.popup.$head),\n          popupMargins = htmlComp.margins(),\n          windowSize = this.popup.getWindowSize();\n      maxWidthRight = windowSize.width - popupHeadBounds.x - windowPaddingRight;\n      maxWidthLeft = popupHeadBounds.x + popupHeadBounds.width - windowPaddingLeft;\n      maxHeightDown = windowSize.height - popupBounds.y - windowPaddingY; // head height is irrelevant because popup has a margin as height as the header\n\n      maxHeightUp = popupBounds.y - popupMargins.vertical() - windowPaddingY;\n      return new Insets(maxHeightUp, maxWidthRight, maxHeightDown, maxWidthLeft);\n    }\n  }, {\n    key: \"preferredLayoutSize\",\n    value: function preferredLayoutSize($container, options) {\n      var htmlComp = this.popup.htmlComp,\n          htmlBody,\n          prefSize;\n\n      if (!this.popup.bodyAnimating) {\n        var popupStyleBackup = this.popup.$container.attr('style');\n        var $siblingBodies = this.popup.$body.siblings('.popup-body');\n        $siblingBodies.addClass('hidden');\n        this.popup.$container.css({\n          width: 'auto',\n          height: 'auto'\n        });\n        htmlBody = HtmlComponent.optGet(this.popup.$body);\n\n        if (htmlBody) {\n          prefSize = htmlBody.prefSize(options).add(htmlBody.margins());\n        } else {\n          prefSize = graphics.prefSize(this.popup.$body, options).add(graphics.margins(this.popup.$body));\n        }\n\n        $siblingBodies.removeClass('hidden');\n        this.popup.$container.attr('style', popupStyleBackup);\n      } else {\n        prefSize = graphics.size(this.popup.$body, options).add(graphics.margins(this.popup.$body));\n      }\n\n      if (this.popup._headVisible) {\n        var headSize = graphics.size(this.popup.$head, options).add(graphics.margins(this.popup.$head));\n        prefSize.width = prefSize.width < headSize.width ? headSize.width : prefSize.width;\n      }\n\n      prefSize = prefSize.add(htmlComp.insets());\n      return prefSize;\n    }\n  }]);\n\n  return PopupWithHeadLayout;\n}(PopupLayout);\n\nexport { PopupWithHeadLayout as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/popup/PopupWithHeadLayout.js"],"names":["graphics","HtmlComponent","Insets","PopupLayout","PopupWithHeadLayout","popup","prefSize","htmlComp","popupSize","htmlBody","optGet","$body","bodyAnimating","subtract","insets","_headVisible","headSize","size","$head","width","setSize","_adjustSizeWithAnchor","_position","maxWidthLeft","maxWidthRight","maxHeightDown","maxHeightUp","windowPaddingLeft","windowPaddingX","windowPaddingRight","windowPaddingY","popupBounds","offsetBounds","$comp","popupHeadBounds","popupMargins","margins","windowSize","getWindowSize","x","height","y","vertical","$container","options","popupStyleBackup","attr","$siblingBodies","siblings","addClass","css","add","removeClass"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {graphics, HtmlComponent, Insets, PopupLayout} from '../index';\n\nexport default class PopupWithHeadLayout extends PopupLayout {\n\n  constructor(popup) {\n    super(popup);\n  }\n\n  _setSize(prefSize) {\n    super._setSize(prefSize);\n\n    var htmlComp = this.popup.htmlComp,\n      popupSize = prefSize,\n      htmlBody = HtmlComponent.optGet(this.popup.$body);\n\n    // While animating the body animation sets the size\n    if (!this.popup.bodyAnimating) {\n      // Set size of body\n      popupSize = popupSize.subtract(htmlComp.insets());\n      if (this._headVisible) {\n        var headSize = graphics.size(this.popup.$head, true);\n        // Adjust popup size if head changed size\n        if (popupSize.width < headSize.width) {\n          popupSize.width = headSize.width;\n        }\n      }\n      htmlBody.setSize(popupSize);\n    }\n  }\n\n  /**\n   * @override\n   */\n  _adjustSize(prefSize) {\n    return this._adjustSizeWithAnchor(prefSize);\n  }\n\n  /**\n   * @override\n   */\n  _calcMaxSizeAroundAnchor() {\n    if (!this.popup._headVisible) {\n      return super._calcMaxSizeAroundAnchor();\n    }\n\n    // Position the popup at the desired location before doing any calculations,\n    // but do no try to switch the position if there is not enough space\n    this._position(false);\n\n    var maxWidthLeft, maxWidthRight, maxHeightDown, maxHeightUp,\n      htmlComp = this.popup.htmlComp,\n      windowPaddingLeft = this.popup.windowPaddingX,\n      windowPaddingRight = this.popup.windowPaddingX,\n      windowPaddingY = this.popup.windowPaddingY,\n      popupBounds = graphics.offsetBounds(htmlComp.$comp),\n      popupHeadBounds = graphics.offsetBounds(this.popup.$head),\n      popupMargins = htmlComp.margins(),\n      windowSize = this.popup.getWindowSize();\n\n    maxWidthRight = windowSize.width - popupHeadBounds.x - windowPaddingRight;\n    maxWidthLeft = popupHeadBounds.x + popupHeadBounds.width - windowPaddingLeft;\n    maxHeightDown = (windowSize.height - popupBounds.y - windowPaddingY);\n    // head height is irrelevant because popup has a margin as height as the header\n    maxHeightUp = (popupBounds.y - popupMargins.vertical() - windowPaddingY);\n\n    return new Insets(maxHeightUp, maxWidthRight, maxHeightDown, maxWidthLeft);\n  }\n\n  preferredLayoutSize($container, options) {\n    var htmlComp = this.popup.htmlComp,\n      htmlBody,\n      prefSize;\n\n    if (!this.popup.bodyAnimating) {\n      var popupStyleBackup = this.popup.$container.attr('style');\n      var $siblingBodies = this.popup.$body.siblings('.popup-body');\n      $siblingBodies.addClass('hidden');\n      this.popup.$container.css({\n        width: 'auto',\n        height: 'auto'\n      });\n\n      htmlBody = HtmlComponent.optGet(this.popup.$body);\n      if (htmlBody) {\n        prefSize = htmlBody.prefSize(options)\n          .add(htmlBody.margins());\n      } else {\n        prefSize = graphics.prefSize(this.popup.$body, options)\n          .add(graphics.margins(this.popup.$body));\n      }\n\n      $siblingBodies.removeClass('hidden');\n      this.popup.$container.attr('style', popupStyleBackup);\n    } else {\n      prefSize = graphics.size(this.popup.$body, options)\n        .add(graphics.margins(this.popup.$body));\n    }\n\n    if (this.popup._headVisible) {\n      var headSize = graphics.size(this.popup.$head, options)\n        .add(graphics.margins(this.popup.$head));\n      prefSize.width = prefSize.width < headSize.width ? headSize.width : prefSize.width;\n    }\n    prefSize = prefSize.add(htmlComp.insets());\n    return prefSize;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}