{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n\n/**\n * jQuery plugin with scout extensions\n */\nimport $ from 'jquery';\nimport { arrays, Device, Dimension, events, IconDesc, icons, objects, scout, strings } from '../index';\n/**\n * By using $ in jsdoc all the functions is this file are recognized as part of $.\n * By additionally defining $ as jQuery all default jQuery functions are recognized as well.\n * @typedef {jQuery} $\n */\n// === internal methods ===\n\n/**\n * Returns false when the component display is 'none', otherwise true.\n *\n * Note: this gives other results than $.is(':visible'), since that method will also return false\n * when a component has absolute positioning and no width and height is defined (well, you cannot\n * see a component with a style like this, but technically it is not set to 'not visible').\n *\n * Also note that this function _only_ checks the 'display' property! Other methods to make an element\n * invisible to the user ('visibility: hidden', 'opacity: 0', off-screen position etc.) are _not_\n * considered.\n */\n\nfunction elemVisible(elem) {\n  // Check if element itself is hidden by its own style attribute\n  if (!elem || isHidden(elem.style)) {\n    return false;\n  } // Must use correct window for element / computedStyle\n\n\n  var myWindow = (elem instanceof Document ? elem : elem.ownerDocument).defaultView; // In some cases with popup windows the window object may be already set to null\n  // but we still have a valid reference to a DOM element. In that case we assume\n  // the element is not visible anymore.\n\n  if (!myWindow) {\n    return false;\n  } // Check if element itself is hidden by external style-sheet\n\n\n  if (isHidden(myWindow.getComputedStyle(elem))) {\n    return false;\n  } // Else visible\n\n\n  return true; // ----- Helper functions -----\n\n  function isHidden(style) {\n    return style.display === 'none';\n  }\n}\n\nfunction explodeShorthandProperties(properties) {\n  var newProperties = [];\n  properties.forEach(function (prop) {\n    // shorthand css properties may not be copied directly (at least not in firefox) -> copy the actual properties\n    if (prop === 'margin' || prop === 'padding') {\n      newProperties.push(prop + '-top');\n      newProperties.push(prop + '-right');\n      newProperties.push(prop + '-bottom');\n      newProperties.push(prop + '-left');\n    } else if (prop === 'border') {\n      newProperties.push('border-top-style');\n      newProperties.push('border-right-style');\n      newProperties.push('border-bottom-style');\n      newProperties.push('border-left-style');\n      newProperties.push('border-top-color');\n      newProperties.push('border-right-color');\n      newProperties.push('border-bottom-color');\n      newProperties.push('border-left-color');\n      newProperties.push('border-top-width');\n      newProperties.push('border-right-width');\n      newProperties.push('border-bottom-width');\n      newProperties.push('border-left-width');\n    } else {\n      newProperties.push(prop);\n    }\n  });\n  return newProperties;\n}\n/**\n * This function is required because most jQuery functions can be used with or without arguments\n * and do return the jQuery instance when used as a setter (with arguments), ceiling should only\n * be done, when used as getter (without arguments).\n */\n\n\nfunction _ceilNumber(val) {\n  return objects.isNumber(val) ? Math.ceil(val) : val;\n} // === $ extensions ===\n\n/* !\n * jQuery UI Widget 1.11.2\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n\n\nvar __origCleanData = $.cleanData;\n/**\n * This function is copied from jQuery UI. It is used to fire a 'remove' event\n * when we call the .remove() function on a jQuery object.\n */\n\n$.cleanData = function (elems) {\n  var events, elem, i;\n\n  for (i = 0; elem = elems[i]; i++) {\n    // NOSONAR\n    try {\n      // Only trigger remove when necessary to save time\n      events = $._data(elem, 'events');\n\n      if (events && events.remove) {\n        $(elem).triggerHandler('remove');\n      } // http://bugs.jquery.com/ticket/8235\n\n    } catch (e) {// NOP\n    }\n  }\n\n  __origCleanData(elems);\n};\n/**\n * Used by some animate functions.\n */\n\n\n$.removeThis = function () {\n  $(this).remove();\n};\n/**\n * Convenience function that can be used as an jQuery event handler, when this\n * event should be \"swallowed\". Technically, this function calls preventDefault(),\n * stopPropagation() and stopImmediatePropagation() on the event.\n *\n * Note: \"return false\" is equal to preventDefault() and stopPropagation(), but\n * not stopImmediatePropagation().\n */\n\n\n$.suppressEvent = function (event) {\n  if (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n  }\n};\n/**\n * If the event target is disabled (according to $.fn.isEnabled()), the event is suppressed\n * and the method returns true. Otherwise, false is returned.\n */\n\n\n$.suppressEventIfDisabled = function (event, $target) {\n  $target = $target || $(event.target);\n\n  if (!$target.isEnabled()) {\n    $.suppressEvent(event);\n    return true;\n  }\n\n  return false;\n};\n/**\n * Implements the 'debounce' pattern. The given function fx is executed after a certain delay\n * (in milliseconds), but if the same function is called a second time within the waiting time,\n * depending on the 'reschedule' option, the timer is reset or the second call is ignored.\n * The default value for the 'delay' option is 250 ms.\n *\n * The resulting function has a function member 'cancel' that can be used to clear any scheduled\n * calls to the original function. If no such call was scheduled, cancel() returns false,\n * otherwise true.\n *\n * OPTION         DEFAULT VALUE   DESCRIPTION\n * ------------------------------------------------------------------------------------\n * delay          250             Waiting time in milliseconds before the function is executed.\n *\n * reschedule     true            Defines whether subsequent call to the debounced function\n *                                within the waiting time cause the timer to be reset or not.\n *                                If the reschedule option is 'false', subsequent calls within\n *                                the waiting time will just be ignored.\n *\n * @param fx\n *          the function to wrap\n * @param options\n *          an optional options object (see table above). Short-hand version: If a number is passed instead\n *          of an object, the value is automatically converted to the option 'delay'.\n */\n\n\n$.debounce = function (fx, options) {\n  if (typeof options === 'number') {\n    options = {\n      delay: options\n    };\n  }\n\n  options = $.extend({\n    delay: 250,\n    reschedule: true\n  }, options);\n  var timeoutId = null;\n\n  var fn = function fn() {\n    var that = this,\n        args = arguments;\n\n    if (timeoutId && !options.reschedule) {\n      // Function is already schedule but 'reschedule' option is set to false --> discard this request\n      return;\n    }\n\n    if (timeoutId) {\n      // Function is already scheduled --> cancel current scheduled call and re-schedule the call\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fx.apply(that, args);\n    }, options.delay);\n  };\n\n  fn.cancel = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      return true;\n    }\n\n    return false;\n  };\n\n  return fn;\n};\n/**\n * Executes the given function. Further calls to the same function are delayed by the given delay\n * (default 250ms). This is similar to $.debounce() but ensures that function is called at least\n * every 'delay' milliseconds. Can be useful to prevent too many function calls, e.g. from UI events.\n */\n\n\n$.throttle = function (fx, delay) {\n  delay = delay !== undefined ? delay : 250;\n  var timeoutId = null;\n  var lastExecution;\n  return function () {\n    var that = this,\n        args = arguments,\n        now = new Date().getTime(),\n        callFx = function callFx() {\n      lastExecution = now;\n      fx.apply(that, args);\n    };\n\n    if (lastExecution && lastExecution + delay > now) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        callFx();\n      }, delay);\n    } else {\n      callFx();\n    }\n  };\n};\n/**\n * Returns a function which negates the return value of the given function when called.\n */\n\n\n$.negate = function (fx) {\n  return function () {\n    return !fx.apply(this, arguments);\n  };\n};\n/**\n * color calculation\n */\n\n\n$.colorOpacity = function (hex, opacity) {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, '');\n\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n\n  opacity = opacity || 0; // convert to decimal and change luminosity\n\n  var rgb = '#';\n\n  for (var i = 0; i < 3; i++) {\n    var c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, 255 - (255 - c) * opacity), 255)).toString(16);\n    rgb += ('00' + c).substr(c.length);\n  }\n\n  return rgb;\n};\n/**\n * CSP-safe method to dynamically load and execute a script from server.\n *\n * A new <script> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new script tag is passed to the promise's\n * callback functions.\n *\n *   $.injectScript('http://server/path/script.js')\n *     .done(function($scriptTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the script to.\n *\n * removeTag         false               Whether to remove the script tag again from the DOM\n *                                       after the script has been loaded.\n */\n\n\n$.injectScript = function (url, options) {\n  options = options || {};\n  var deferred = $.Deferred();\n  var myDocument = options.document || window.document;\n  var linkTag = myDocument.createElement('script');\n  $(linkTag).attr('src', url).attr('async', true).on('load error', function (event) {\n    if (options.removeTag) {\n      myDocument.head.removeChild(linkTag);\n    }\n\n    if (event.type === 'error') {\n      deferred.reject($(linkTag));\n    } else {\n      deferred.resolve($(linkTag));\n    }\n  }); // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n\n  myDocument.head.appendChild(linkTag);\n  return deferred.promise();\n};\n/**\n * CSP-safe method to dynamically load a style sheet from server.\n *\n * A new <link> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new link tag is passed to the promise's\n * callback functions.\n *\n *   $.injectStyleSheet('http://server/path/style.css')\n *     .done(function($linkTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style sheet to.\n */\n\n\n$.injectStyleSheet = function (url, options) {\n  options = options || {};\n  var deferred = $.Deferred();\n  var myDocument = options.document || window.document;\n  var linkTag = myDocument.createElement('link');\n  $(linkTag).attr('rel', 'stylesheet').attr('type', 'text/css').attr('href', url).on('load error', function (event) {\n    if (event.type === 'error') {\n      deferred.reject($(linkTag));\n    } else {\n      deferred.resolve($(linkTag));\n    }\n  }); // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n\n  myDocument.head.appendChild(linkTag);\n  return deferred.promise();\n};\n/**\n * Dynamically adds styles to the document.\n *\n * A new <style> tag is added to the document's head element. The methods returns\n * a jQuery object referring to the new style tag.\n *\n *   $styleTag = $.injectStyle('p { text-color: orange; }');\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style to.\n */\n\n\n$.injectStyle = function (data, options) {\n  options = options || {};\n  var myDocument = options.document || window.document;\n  var styleTag = myDocument.createElement('style');\n  var $styleTag = $(styleTag);\n  $styleTag.attr('type', 'text/css').html(data);\n  myDocument.head.appendChild(styleTag);\n  return $styleTag;\n};\n\n$.pxToNumber = function (pixel) {\n  if (!pixel) {\n    // parseFloat would return NaN if pixel is '' or undefined\n    return 0;\n  } // parseFloat ignores 'px' and just extracts the number\n\n\n  return parseFloat(pixel);\n};\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]);</code>\n *\n * @param {object[]} [arguments] of this function are passed to the resolve function of the deferred\n * @returns {$.Deferred} a deferred for an already resolved jQuery.Deferred object.\n */\n\n\n$.resolvedDeferred = function () {\n  var deferred = $.Deferred();\n  deferred.resolve.apply(deferred, arguments);\n  return deferred;\n};\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the resolve function of the deferred\n * @returns {Promise} a promise for an already resolved jQuery.Deferred object.\n */\n\n\n$.resolvedPromise = function () {\n  var deferred = $.Deferred();\n  deferred.resolve.apply(deferred, arguments);\n  return deferred.promise();\n};\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().reject([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the reject function of the deferred\n * @returns {Promise} a promise for an already rejected jQuery.Deferred object.\n */\n\n\n$.rejectedPromise = function () {\n  var deferred = $.Deferred();\n  deferred.reject.apply(deferred, arguments);\n  return deferred.promise();\n};\n/**\n * Creates a new promise which resolves when all promises resolve and fails when the first promise fails.\n *\n * @param asArray (optional) when set to true, the resolve function will transform the\n *    flat arguments list containing the results into an array. The arguments of the reject function won't be touched. Default is false.\n */\n\n\n$.promiseAll = function (promises, asArray) {\n  asArray = scout.nvl(asArray, false);\n  promises = arrays.ensure(promises);\n  var deferred = $.Deferred();\n  $.when.apply($, promises).done(function () {\n    if (asArray) {\n      deferred.resolve(objects.argumentsToArray(arguments));\n    } else {\n      deferred.resolve.apply(this, arguments);\n    }\n  }).fail(function () {\n    deferred.reject.apply(this, arguments);\n  });\n  return deferred.promise();\n};\n/**\n * Shorthand for an AJAX request for a JSON file with UTF8 encoding.\n * Errors are caught and converted to a rejected promise with the following\n * arguments: jqXHR, textStatus, errorThrown, requestOptions.\n *\n * @returns a promise from JQuery function $.ajax\n */\n\n\n$.ajaxJson = function (url) {\n  return $.ajax({\n    url: url,\n    dataType: 'json',\n    contentType: 'application/json; charset=UTF-8'\n  }).catch(function () {\n    // Reject the promise with usual arguments (jqXHR, textStatus, errorThrown), but add the request\n    // options as additional argument (e.g. to make the URL available to the error handler)\n    var args = objects.argumentsToArray(arguments);\n    args.push(this);\n    return $.rejectedPromise.apply($, args);\n  });\n};\n/**\n * Ensures the given parameter is a jQuery object.<p>\n * If it is a jQuery object, it will be returned as it is.\n * If it isn't, it will be passed to $() in order to create one.\n * <p>\n * Just using $() on an existing jQuery object would clone it which would work but is unnecessary.\n */\n\n\n$.ensure = function ($elem) {\n  if ($elem instanceof $) {\n    return $elem;\n  }\n\n  return $($elem);\n};\n/**\n * Helper function to determine if an object is of type \"jqXHR\" (http://api.jquery.com/jQuery.ajax/#jqXHR)\n */\n\n\n$.isJqXHR = function (obj) {\n  return _typeof(obj) === 'object' && obj.hasOwnProperty('readyState') && obj.hasOwnProperty('status') && obj.hasOwnProperty('statusText');\n}; // === $.prototype extensions ===\n\n\n$.fn.nvl = function ($element) {\n  if (this.length || !($element instanceof $)) {\n    return this;\n  }\n\n  return $element;\n};\n/**\n * @param element string. Example = &lt;input&gt;\n * @param cssClass (optional) class attribute\n * @param text (optional) adds a child text-node with given text (no HTML content)\n */\n\n\n$.fn.makeElement = function (element, cssClass, text) {\n  var myDocument = this.document(true);\n\n  if (myDocument === undefined || element === undefined) {\n    return new Error('missing arguments: document, element');\n  }\n\n  var $element = $(element, myDocument);\n\n  if (cssClass) {\n    $element.addClass(cssClass);\n  }\n\n  if (text) {\n    $element.text(text);\n  }\n\n  return $element;\n};\n/**\n * Creates a DIV element in the current document.\n *\n * @param cssClass (optional) string added to the 'class' attribute\n * @param text (optional) string used as inner text\n */\n\n\n$.fn.makeDiv = function (cssClass, text) {\n  return this.makeElement('<div>', cssClass, text);\n};\n\n$.fn.makeSpan = function (cssClass, text) {\n  return this.makeElement('<span>', cssClass, text);\n};\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns HTML document reference (ownerDocument) of the HTML element.\n */\n\n\n$.fn.document = function (domElement) {\n  var myDocument = this.length ? this[0] instanceof Document ? this[0] : this[0].ownerDocument : null;\n  return domElement ? myDocument : $(myDocument);\n};\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns HTML window reference (defaultView) of the HTML element\n */\n\n\n$.fn.window = function (domElement) {\n  var myDocument = this.document(true),\n      myWindow = myDocument ? myDocument.defaultView : null;\n  return domElement ? myWindow : $(myWindow);\n};\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the active element of the current document\n */\n\n\n$.fn.activeElement = function (domElement) {\n  var myDocument = this.document(true),\n      activeElement = myDocument ? myDocument.activeElement : null;\n  return domElement ? activeElement : $(activeElement);\n};\n/**\n * @param {boolean} domElement (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the BODY element of the HTML document in which the current HTML element is placed.\n */\n\n\n$.fn.body = function (domElement) {\n  var $body = $('body', this.document(true));\n  return domElement ? $body[0] : $body;\n};\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the closest DOM element that has the 'scout' class.\n */\n\n\n$.fn.entryPoint = function (domElement) {\n  var $element = this.closest('.scout');\n  return domElement ? $element[0] : $element;\n};\n/**\n * @returns {Dimension} size of the window (width and height)\n */\n\n\n$.fn.windowSize = function () {\n  var $window = this.window();\n  return new Dimension($window.width(), $window.height());\n};\n/**\n * Returns the element at the given point considering only child elements and elements matching the selector, if specified.\n */\n\n\n$.fn.elementFromPoint = function (x, y, selector) {\n  var $container = $(this),\n      doc = $container.document(true),\n      elements = [],\n      i = 0,\n      $element;\n\n  if (!doc) {\n    // If doc is null the $container itself is the document\n    doc = $container[0];\n  }\n\n  if (!doc) {\n    // If doc is still null (e.g. because the current jQuery collection does not contain any elements) return an empty collection\n    return $();\n  } // eslint-disable-next-line no-constant-condition\n\n\n  while (true) {\n    $element = $(doc.elementFromPoint(x, y));\n\n    if ($element.length === 0 || $element[0] === doc.documentElement) {\n      break;\n    }\n\n    if ($container.isOrHas($element) && (!selector || $element.is(selector))) {\n      break;\n    }\n\n    elements.push($element); // make the element invisible to get the underlying element (uses visibility: hidden to make sure element size and position won't be changed)\n\n    $element.addClass('invisible');\n    i++;\n\n    if (i > 1000) {\n      $.log.warn('Infinite loop aborted', $element);\n      $element = $();\n      break;\n    }\n  }\n\n  if ($element[0] === doc.documentElement && $container[0] !== doc) {\n    // return an empty element if the only element found is the document element and the document element is not the container\n    $element = $();\n  }\n\n  elements.forEach(function ($element) {\n    // show element again\n    $element.removeClass('invisible');\n  });\n  return $element;\n}; // prepend - and return new div for chaining\n\n\n$.fn.prependDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).prependTo(this);\n}; // append - and return new div for chaining\n\n\n$.fn.appendDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).appendTo(this);\n};\n\n$.fn.prependElement = function (element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).prependTo(this);\n};\n\n$.fn.appendElement = function (element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).appendTo(this);\n}; // insert after - and return new div for chaining\n\n\n$.fn.afterDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).insertAfter(this);\n}; // insert before - and return new div for chaining\n\n\n$.fn.beforeDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).insertBefore(this);\n};\n\n$.fn.appendSpan = function (cssClass, text) {\n  return this.makeSpan(cssClass, text).appendTo(this);\n};\n\n$.fn.appendBr = function (cssClass) {\n  return this.makeElement('<br>', cssClass).appendTo(this);\n};\n\n$.fn.appendTextNode = function (text) {\n  return $(this.document(true).createTextNode(text)).appendTo(this);\n};\n/**\n * @param {IconDesc|string} iconId\n */\n\n\n$.fn.appendIcon = function (iconId, cssClass) {\n  if (!iconId) {\n    return this.appendSpan(cssClass).addClass('icon');\n  }\n\n  var icon;\n\n  if (iconId instanceof IconDesc) {\n    icon = iconId;\n  } else {\n    icon = icons.parseIconId(iconId);\n  }\n\n  if (icon.isFontIcon()) {\n    return this.makeSpan(cssClass, icon.iconCharacter).addClass('icon').addClass(icon.appendCssClass('font-icon')).appendTo(this);\n  }\n\n  return this.appendImg(icon.iconUrl, cssClass).addClass('icon image-icon');\n};\n\n$.fn.appendImg = function (imageSrc, cssClass) {\n  var $icon = this.appendElement('<img>', cssClass);\n\n  if (imageSrc) {\n    $icon.attr('src', imageSrc);\n  }\n\n  return $icon;\n};\n\n$.fn.makeSVG = function (type, cssClass, text, id) {\n  var myDocument = this.document(true);\n\n  if (myDocument === undefined || type === undefined) {\n    return new Error('missing arguments: document, type');\n  }\n\n  var $svg = $(myDocument.createElementNS('http://www.w3.org/2000/svg', type));\n\n  if (cssClass) {\n    $svg.attr('class', cssClass);\n  }\n\n  if (text) {\n    $svg.text(text);\n  }\n\n  if (id !== undefined) {\n    $svg.attr('id', id);\n  }\n\n  return $svg;\n}; // append SVG\n\n\n$.fn.appendSVG = function (type, cssClass, text, id) {\n  return this.makeSVG(type, cssClass, text, id).appendTo(this);\n};\n\n$.fn.attrXLINK = function (attributeName, value) {\n  if (this.length === 0) {\n    // shortcut for empty collections\n    return this;\n  }\n\n  if (this.length === 1) {\n    // shortcut for single element collections\n    this[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n    return this;\n  }\n\n  return this.each(function () {\n    this.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n  });\n};\n/**\n * This function adds a device specific CSS class to the current element.\n * The current implementation adds a class 'ie' if Internet Explorer is used.\n */\n\n\n$.fn.addDeviceClass = function () {\n  var device = Device.get();\n\n  if (device.isInternetExplorer()) {\n    this.addClass('ie');\n\n    if (device.browserVersion === 9) {\n      this.addClass('ie9');\n    }\n  }\n\n  if (device.isIos()) {\n    this.addClass('ios');\n  }\n\n  return this;\n}; // select one and deselect siblings\n\n\n$.fn.selectOne = function () {\n  this.siblings().removeClass('selected');\n  this.addClass('selected');\n  return this;\n};\n\n$.fn.select = function (selected) {\n  return this.toggleClass('selected', !!selected);\n};\n\n$.fn.isSelected = function () {\n  return this.hasClass('selected');\n};\n\n$.fn.setEnabled = function (enabled) {\n  enabled = !!enabled;\n  this.toggleClass('disabled', !enabled); // Toggle disabled attribute for elements that support it (see http://www.w3.org/TR/html5/disabled-elements.html)\n\n  if (this.is('button, input, select, textarea, optgroup, option, fieldset')) {\n    this.toggleAttr('disabled', !enabled);\n  }\n\n  this.trigger(enabled ? 'enable' : 'disable');\n  return this;\n};\n\n$.fn.isEnabled = function () {\n  return !this.hasClass('disabled');\n};\n\n$.fn.setVisible = function (visible) {\n  var isVisible = !this.hasClass('hidden');\n\n  if (isVisible === visible) {\n    return this;\n  }\n\n  if (!visible) {\n    this.addClass('hidden');\n    this.trigger('hide');\n  } else {\n    this.removeClass('hidden');\n    this.trigger('show');\n  }\n\n  return this;\n};\n\n$.fn.isDisplayNone = function () {\n  return this.css('display') === 'none';\n};\n\n$.fn.setTabbable = function (tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : null);\n};\n\n$.fn.isTabbable = function () {\n  return this.attr('tabIndex') >= 0;\n};\n/**\n * @param {string} iconId\n * @param {function} [addToDomFunc] optional function which is used to add the new icon element to the DOM\n *     When not set, this.prepend($icon) is called.\n * @returns {$}\n * @see Icon as an alternative\n */\n\n\n$.fn.icon = function (iconId, addToDomFunc) {\n  var icon,\n      $icon = this.data('$icon');\n\n  if (iconId) {\n    icon = icons.parseIconId(iconId);\n\n    if (icon.isFontIcon()) {\n      getOrCreateIconElement.call(this, $icon, '<span>', addToDomFunc).addClass('icon').addClass(icon.appendCssClass('font-icon')).text(icon.iconCharacter);\n    } else {\n      getOrCreateIconElement.call(this, $icon, '<img>', addToDomFunc).attr('src', icon.iconUrl).addClass('icon image-icon');\n    }\n  } else {\n    removeIconElement.call(this, $icon);\n  }\n\n  return this; // ----- Helper functions -----\n\n  function getOrCreateIconElement($icon, newElement, addToDomFunc) {\n    // If element type does not match existing element, remove the existing element (e.g. when changing from font-icon to picture icon)\n    if ($icon && !$icon.is(newElement.replace(/[<>]/g, ''))) {\n      removeIconElement.call(this, $icon);\n      $icon = null;\n    } // Create new element if necessary\n\n\n    if (!$icon) {\n      $icon = $(newElement);\n      this.data('$icon', $icon);\n\n      if (!addToDomFunc) {\n        this.prepend($icon);\n      } else {\n        addToDomFunc.call(this, $icon);\n      }\n    }\n\n    return $icon;\n  }\n\n  function removeIconElement($icon) {\n    if ($icon) {\n      $icon.remove();\n    }\n\n    this.removeData('$icon');\n  }\n};\n\n$.fn.placeholder = function (placeholder) {\n  return this.toggleAttr('placeholder', !!placeholder, placeholder);\n};\n\n$.fn.isVisible = function () {\n  if (this.hasClass('hidden')) {\n    return false;\n  }\n\n  return elemVisible(this[0]);\n};\n\n$.fn.isEveryParentVisible = function () {\n  var everyParentVisible = true;\n  this.parents().each(function () {\n    if (!$(this).isVisible()) {\n      everyParentVisible = false;\n      return false;\n    }\n  });\n  return everyParentVisible;\n};\n/**\n * @return {boolean} true if the element is attached (= is in the dom tree), false if not\n */\n\n\n$.fn.isAttached = function () {\n  return $.contains(this.document(true).documentElement, this[0]);\n};\n/**\n * @returns {$} the current element if it is scrollable, otherwise the first parent which is scrollable\n */\n\n\n$.fn.scrollParent = function () {\n  var $elem = this;\n\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      return $elem;\n    }\n\n    $elem = $elem.parent();\n  }\n\n  return $();\n};\n/**\n * Returns every parent which is scrollable\n */\n\n\n$.fn.scrollParents = function () {\n  var $scrollParents = $(),\n      $elem = this;\n\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      $scrollParents.push($elem);\n    }\n\n    $elem = $elem.parent();\n  }\n\n  return $scrollParents;\n}; // most used animate\n\n\n$.fn.animateAVCSD = function (attr, value, complete, step, duration) {\n  var properties = {};\n  var options = {};\n  properties[attr] = value;\n\n  if (complete) {\n    options.complete = complete;\n  }\n\n  if (step) {\n    options.step = step;\n  }\n\n  if (duration) {\n    options.duration = duration;\n  }\n\n  options.queue = false;\n  this.animate(properties, options);\n  return this;\n}; // SVG animate, array contains attr, endValue + startValue\n\n\n$.fn.animateSVG = function (attr, endValue, duration, complete, withoutTabIndex) {\n  return this.each(function () {\n    var startValue = parseFloat($(this).attr(attr));\n\n    if (withoutTabIndex) {\n      var oldComplete = complete;\n\n      complete = function complete() {\n        if (oldComplete) {\n          oldComplete.call(this);\n        }\n\n        $(this).removeAttr('tabindex');\n      };\n    }\n\n    $(this).animate({\n      tabIndex: 0\n    }, {\n      step: function step(now, fx) {\n        this.setAttribute(attr, startValue + (endValue - startValue) * fx.pos);\n      },\n      duration: duration,\n      complete: complete,\n      queue: false\n    });\n  });\n};\n\n$.fn.addClassForAnimation = function (className, options) {\n  var defaultOptions = {\n    classesToRemove: className\n  };\n  options = $.extend({}, defaultOptions, options);\n  this.addClass(className);\n  this.oneAnimationEnd(function () {\n    // remove class, otherwise animation will be executed each time the element changes it's visibility (attach/rerender),\n    // and even each time when the css classes change\n    this.removeClass(options.classesToRemove);\n  }.bind(this));\n  return this;\n};\n\n$.fn.oneAnimationEnd = function (selector, data, handler) {\n  return this.one('animationend webkitAnimationEnd', selector, data, handler);\n};\n\n$.fn.hasAnimationClass = function () {\n  // matches any CSS class that starts with 'animate-'\n  return /(^|\\s)animate-/.test(this.attr('class'));\n};\n/**\n * Animates from old to new width\n */\n\n\n$.fn.cssWidthAnimated = function (oldWidth, newWidth, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300); // Reset to old width first\n\n  this.cssWidth(oldWidth); // Then animate to new width\n\n  this.animate({\n    width: newWidth\n  }, opts);\n  return this;\n};\n\n$.fn.cssHeightAnimated = function (oldHeight, newHeight, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300); // Reset to old height first\n\n  this.cssHeight(oldHeight); // Then animate to new height\n\n  this.animate({\n    height: newHeight\n  }, opts);\n  return this;\n};\n\n$.fn.cssLeftAnimated = function (from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300); // Reset to from first\n\n  this.cssLeft(from); // Then animate to new width\n\n  this.animate({\n    left: to\n  }, opts);\n  return this;\n};\n\n$.fn.cssTopAnimated = function (from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300); // Reset to from first\n\n  this.cssTop(from); // Then animate to new pos\n\n  this.animate({\n    top: to\n  }, opts);\n  return this;\n};\n\n$.fn.cssAnimated = function (fromVals, toVals, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300); // Reset to from first\n\n  this.css(fromVals); // Then animate to new pos\n\n  this.animate(toVals, opts);\n  return this;\n}; // over engineered animate\n\n\n$.fn.widthToContent = function (opts) {\n  var oldW = this.outerWidth(),\n      newW = this.css('width', 'auto').outerWidth();\n  this.cssWidthAnimated(oldW, newW, opts);\n  return this;\n};\n/**\n * Offset to a specific ancestor and not to the document as offset() would do.\n * Not the same as position() which returns the position relative to the offset parent.\n */\n\n\n$.fn.offsetTo = function ($to) {\n  var toOffset = $to.offset(),\n      offset = this.offset();\n  return {\n    top: offset.top - toOffset.top,\n    left: offset.left - toOffset.left\n  };\n};\n\n$.fn.cssPxValue = function (prop, value) {\n  if (value === undefined) {\n    return $.pxToNumber(this.css(prop));\n  }\n\n  if (value === null) {\n    value = ''; // \"null\" should also remove the CSS property\n  }\n\n  if (typeof value === 'string') {\n    return this.css(prop, value);\n  }\n\n  return this.css(prop, value + 'px');\n};\n\n$.fn.cssLeft = function (position) {\n  return this.cssPxValue('left', position);\n};\n\n$.fn.cssTop = function (position) {\n  return this.cssPxValue('top', position);\n};\n/**\n * Sets the CSS properties 'left' and 'top' based on the x and y properties of the given point instance.\n *\n * @param {Point} point\n */\n\n\n$.fn.cssPosition = function (point) {\n  return this.cssLeft(point.x).cssTop(point.y);\n};\n\n$.fn.cssBottom = function (position) {\n  return this.cssPxValue('bottom', position);\n};\n\n$.fn.cssRight = function (position) {\n  return this.cssPxValue('right', position);\n};\n\n$.fn.cssWidth = function (width) {\n  return this.cssPxValue('width', width);\n};\n\n$.fn.cssMinWidth = function (minWidth) {\n  if (minWidth === undefined) {\n    var value = this.css('min-width');\n\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n\n    return $.pxToNumber(value);\n  }\n\n  return this.cssPxValue('min-width', minWidth);\n};\n/**\n * @returns {number} the max-width as number. If max-width is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n\n\n$.fn.cssMaxWidth = function (maxWidth) {\n  if (maxWidth === undefined) {\n    var value = this.css('max-width');\n\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n\n    return $.pxToNumber(value);\n  }\n\n  return this.cssPxValue('max-width', maxWidth);\n};\n\n$.fn.cssHeight = function (height) {\n  return this.cssPxValue('height', height);\n};\n\n$.fn.cssMinHeight = function (minHeight) {\n  if (minHeight === undefined) {\n    var value = this.css('min-height');\n\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n\n    return $.pxToNumber(value);\n  }\n\n  return this.cssPxValue('min-height', minHeight);\n};\n/**\n * @returns {number} the max-height as number. If max-height is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n\n\n$.fn.cssMaxHeight = function (maxHeight) {\n  if (maxHeight === undefined) {\n    var value = this.css('max-height');\n\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n\n    return $.pxToNumber(value);\n  }\n\n  return this.cssPxValue('max-height', maxHeight);\n};\n\n$.fn.cssLineHeight = function (height) {\n  return this.cssPxValue('line-height', height);\n};\n\n$.fn.cssMarginLeft = function (value) {\n  return this.cssPxValue('margin-left', value);\n};\n\n$.fn.cssMarginBottom = function (value) {\n  return this.cssPxValue('margin-bottom', value);\n};\n\n$.fn.cssMarginRight = function (value) {\n  return this.cssPxValue('margin-right', value);\n};\n\n$.fn.cssMarginTop = function (value) {\n  return this.cssPxValue('margin-top', value);\n};\n\n$.fn.cssMarginX = function (value) {\n  if (value === undefined) {\n    return this.cssMarginLeft() + this.cssMarginRight();\n  }\n\n  this.cssMarginLeft(value);\n  this.cssMarginRight(value);\n  return this;\n};\n\n$.fn.cssMarginY = function (value) {\n  if (value === undefined) {\n    return this.cssMarginTop() + this.cssMarginBottom();\n  }\n\n  this.cssMarginTop(value);\n  this.cssMarginBottom(value);\n  return this;\n};\n\n$.fn.cssPaddingTop = function (value) {\n  return this.cssPxValue('padding-top', value);\n};\n\n$.fn.cssPaddingRight = function (value) {\n  return this.cssPxValue('padding-right', value);\n};\n\n$.fn.cssPaddingBottom = function (value) {\n  return this.cssPxValue('padding-bottom', value);\n};\n\n$.fn.cssPaddingLeft = function (value) {\n  return this.cssPxValue('padding-left', value);\n};\n\n$.fn.cssPaddingX = function (value) {\n  if (value === undefined) {\n    return this.cssPaddingLeft() + this.cssPaddingRight();\n  }\n\n  this.cssPaddingLeft(value);\n  this.cssPaddingRight(value);\n  return this;\n};\n\n$.fn.cssPaddingY = function (value) {\n  if (value === undefined) {\n    return this.cssPaddingTop() + this.cssPaddingBottom();\n  }\n\n  this.cssPaddingTop(value);\n  this.cssPaddingBottom(value);\n  return this;\n};\n\n$.fn.cssBorderBottomWidth = function (value) {\n  return this.cssPxValue('border-bottom-width', value);\n};\n\n$.fn.cssBorderLeftWidth = function (value) {\n  return this.cssPxValue('border-left-width', value);\n};\n\n$.fn.cssBorderRightWidth = function (value) {\n  return this.cssPxValue('border-right-width', value);\n};\n\n$.fn.cssBorderTopWidth = function (value) {\n  return this.cssPxValue('border-top-width', value);\n};\n\n$.fn.cssBorderWidthY = function (value) {\n  if (value === undefined) {\n    return this.cssBorderTopWidth() + this.cssBorderBottomWidth();\n  }\n\n  this.cssBorderTopWidth(value);\n  this.cssBorderBottomWidth(value);\n};\n\n$.fn.cssBorderWidthX = function (value) {\n  if (value === undefined) {\n    return this.cssBorderLeftWidth() + this.cssBorderRightWidth();\n  }\n\n  this.cssBorderLeftWidth(value);\n  this.cssBorderRightWidth(value);\n};\n/**\n * Bottom of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n\n\n$.fn.innerBottom = function () {\n  return this.position().top + this.outerHeight(true) - this.cssMarginBottom() - this.cssBorderBottomWidth();\n};\n/**\n * Right of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n\n\n$.fn.innerRight = function () {\n  return this.position().left + this.outerWidth(true) - this.cssMarginRight() - this.cssBorderRightWidth();\n};\n\n$.fn.copyCss = function ($origin, props) {\n  var properties = props.split(' ');\n  var $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(function (prop) {\n    $this.css(prop, $origin.css(prop));\n  });\n  return $this;\n};\n\n$.fn.copyCssIfGreater = function ($origin, props) {\n  var properties = props.split(' ');\n  var $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(function (prop) {\n    var originValue = $.pxToNumber($origin.css(prop));\n    var thisValue = $.pxToNumber($this.css(prop));\n\n    if (originValue > thisValue) {\n      $this.css(prop, originValue + 'px');\n    }\n  });\n  return $this;\n};\n\n$.fn.copyCssClasses = function ($other, classString) {\n  var classes = classString.split(' ');\n  var $this = this;\n  classes.forEach(function (cssClass) {\n    if ($other.hasClass(cssClass)) {\n      $this.addClass(cssClass);\n    }\n  });\n  return $this;\n};\n\n$.fn.disableSpellcheck = function () {\n  return this.attr('spellcheck', false);\n};\n/**\n * Returns whether the current element is the given element or has a child which is the given element.\n */\n\n\n$.fn.isOrHas = function (elem) {\n  if (elem instanceof $) {\n    elem = elem[0];\n  }\n\n  return this[0] === elem || this.has(elem).length > 0;\n};\n/**\n * Makes the current element resizable, which means DIVs for resize-handling are added to the DOM\n * in the E, SE and S of the element. This is primarily useful for (modal) dialogs.\n */\n\n\n$.fn.resizable = function (model) {\n  var $this = $(this);\n  var resizable = $this.data('resizable');\n\n  if (resizable) {\n    // Already resizable\n    return this;\n  }\n\n  resizable = scout.create('Resizable', $.extend(model, {\n    $container: $this\n  }));\n  $this.data('resizable', resizable);\n  return this;\n};\n/**\n * Removes the resize handles and event handlers in order to make the element un resizable again.\n */\n\n\n$.fn.unresizable = function () {\n  var $this = $(this);\n  var resizable = $this.data('resizable');\n\n  if (resizable) {\n    resizable.destroy();\n    $this.removeData('resizable');\n  }\n\n  return this;\n};\n/**\n * Makes any element movable with the mouse. If the argument '$handle' is missing, the entire\n * element can be used as a handle.\n *\n * A callback function can be passed as second argument (optional). The function is called for\n * every change of the draggable's position with an object as argument:\n * { top: (top pixels), left: (left pixels) }\n */\n\n\n$.fn.draggable = function ($handle, callback) {\n  var $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.on('mousedown.draggable', function (event) {\n    $('iframe').addClass('dragging-in-progress');\n    var orig_offset = $draggable.offset();\n    var orig_event = event;\n    var handleWidth = $handle.width();\n    var windowWidth = $handle.window().width();\n    var windowHeight = $handle.window().height();\n    $handle.parents().on('mousemove.dragging', function (event) {\n      var top = orig_offset.top + (event.pageY - orig_event.pageY);\n      var left = orig_offset.left + (event.pageX - orig_event.pageX); // do not drop outside of viewport (and leave a margin of 100 pixels)\n\n      left = Math.max(100 - handleWidth, left);\n      left = Math.min(windowWidth - 100, left);\n      top = Math.max(0, top); // must not be dragged outside of top, otherwise dragging back is impossible\n\n      top = Math.min(windowHeight - 100, top);\n      var newOffset = {\n        top: top,\n        left: left\n      };\n      $draggable.offset(newOffset);\n      callback && callback(newOffset);\n    }).on('mouseup.dragging', function (e) {\n      $handle.parents().off('.dragging');\n      $('iframe').removeClass('dragging-in-progress');\n    });\n    event.preventDefault();\n  });\n};\n/**\n *\n * Removes the mouse down handler which was added by draggable() in order to make it un draggable again.\n */\n\n\n$.fn.undraggable = function ($handle) {\n  var $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.off('mousedown.draggable');\n};\n/**\n * Calls jQuery.fadeOut() and then removes the element from the DOM.\n * Default fade-out duration is 150 ms.\n */\n\n\n$.fn.fadeOutAndRemove = function (duration, callback) {\n  if (callback === undefined && typeof duration === 'function') {\n    callback = duration;\n    duration = undefined;\n  }\n\n  duration = scout.nvl(duration, 150);\n  return this.stop(true).fadeOut(duration, function () {\n    $(this).remove();\n\n    if (callback) {\n      callback.call(this);\n    }\n  });\n};\n\n$.fn.removeAnimated = function (cssClass, callback) {\n  if (callback === undefined && typeof cssClass === 'function') {\n    callback = cssClass;\n    cssClass = undefined;\n  }\n\n  if (this.isDisplayNone()) {\n    // Remove without animation\n    this.remove();\n    callback && callback.call(this);\n  } else if (!Device.get().supportsCssAnimation()) {\n    // Cannot remove animated, remove with jQuery.fadeOut()\n    this.fadeOutAndRemove(callback);\n  } else {\n    // Add CSS class and wait for 'animationend' event\n    this.addClass(cssClass || 'animate-remove');\n    this.oneAnimationEnd(function () {\n      $(this).remove();\n      callback && callback.call(this);\n    });\n  }\n};\n\nvar __origHide = $.fn.hide;\n\n$.fn.hide = function () {\n  this.trigger('hide');\n  return __origHide.apply(this, arguments);\n};\n\nvar __origWidth = $.fn.width;\n\n$.fn.width = function () {\n  return _ceilNumber(__origWidth.apply(this, arguments));\n};\n\nvar __origOuterWidth = $.fn.outerWidth;\n\n$.fn.outerWidth = function () {\n  return _ceilNumber(__origOuterWidth.apply(this, arguments));\n};\n\nvar __origHeight = $.fn.height;\n\n$.fn.height = function () {\n  return _ceilNumber(__origHeight.apply(this, arguments));\n};\n\nvar __origOuterHeight = $.fn.outerHeight;\n\n$.fn.outerHeight = function () {\n  return _ceilNumber(__origOuterHeight.apply(this, arguments));\n};\n/**\n * Sets the given 'text' as text to the jQuery element, using the text() function (i.e. HTML is encoded automatically).\n * If the text does not contain any non-space characters, the text '&nbsp;' is set instead (using the html() function).\n * If an 'emptyCssClass' is provided, this CSS class is removed in the former and added in the later case.\n */\n\n\n$.fn.textOrNbsp = function (text, emptyCssClass) {\n  return this.contentOrNbsp(false, text, emptyCssClass);\n};\n/**\n * Same as \"textOrNbsp\", but with html (caller is responsible for encoding).\n */\n\n\n$.fn.htmlOrNbsp = function (html, emptyCssClass) {\n  return this.contentOrNbsp(true, html, emptyCssClass);\n};\n/**\n * Renders the given content as plain-text or HTML depending on the given htmlEnabled flag.\n *\n * @param {boolean} htmlEnabled\n * @param {string} content\n * @param {string} emptyCssClass\n * @returns {$}\n */\n\n\n$.fn.contentOrNbsp = function (htmlEnabled, content, emptyCssClass) {\n  var func = htmlEnabled ? this.html : this.text;\n\n  if (strings.hasText(content)) {\n    func.call(this, content);\n\n    if (emptyCssClass) {\n      this.removeClass(emptyCssClass);\n    }\n  } else {\n    this.html('&nbsp;');\n\n    if (emptyCssClass) {\n      this.addClass(emptyCssClass);\n    }\n  }\n\n  return this;\n};\n/**\n * Like toggleClass(), this toggles a HTML attribute on a set of jquery elements.\n *\n * @param attr\n *          Name of the attribute to toggle.\n * @param state\n *          Specifies if the attribute should be added or removed (based on whether the argument is truthy or falsy).\n *          If this argument is not defined, the attribute is added when it exists, and vice-versa. If this behavior\n *          is not desired, explicitly cast the argument to a boolean using \"!!\".\n * @param value\n *          Value to use when adding the attribute.\n *          If this argument is not specified, 'attr' is used as value.\n */\n\n\n$.fn.toggleAttr = function (attr, state, value) {\n  if (!attr) {\n    return this;\n  }\n\n  if (value === undefined) {\n    value = attr;\n  }\n\n  return this.each(function () {\n    var $element = $(this);\n\n    if (state === undefined) {\n      // set state according to the current value\n      state = $element.attr(attr) === undefined;\n    }\n\n    if (state) {\n      // set attr\n      $element.attr(attr, value);\n    } else {\n      // remove attr\n      $element.removeAttr(attr);\n    }\n  });\n};\n\n$.fn.backupSelection = function () {\n  var field = this[0];\n\n  if (field && field === this.activeElement(true)) {\n    return {\n      selectionStart: field.selectionStart,\n      selectionEnd: field.selectionEnd,\n      selectionDirection: field.selectionDirection\n    };\n  }\n\n  return null;\n};\n\n$.fn.restoreSelection = function (selection) {\n  var field = this[0];\n\n  if (field && field === this.activeElement(true) && selection) {\n    field.setSelectionRange(selection.selectionStart, selection.selectionEnd, selection.selectionDirection);\n  }\n\n  return this;\n};\n/**\n * If the given value is \"truthy\", it is set as attribute on the target. Otherwise, the attribute is removed.\n */\n\n\n$.fn.attrOrRemove = function (attributeName, value) {\n  if (value) {\n    this.attr(attributeName, value);\n  } else {\n    this.removeAttr(attributeName);\n  }\n\n  return this;\n};\n\n$.fn.appendAppLink = function (appLinkBean, func) {\n  return this.appendSpan().appLink(appLinkBean, func);\n};\n/**\n * @param appLinkBean\n *          Either\n *           - an AppLinkBean with both (1) a ref attribute which will be mapped to the\n *             data-ref attribute of the element and (2) a text attribute which will be\n *             set as the text of the element.\n *           - or just a ref, which will be mapped to the data-ref attribute of the\n *             element.\n * @param func\n *          Optional. Either\n *           - a function to be called when the app link has been clicked\n *           - or an object with a method named _onAppLinkAction (e.g. an instance of\n *             BeanField)\n *          If func is not set, the _onAppLinkAction of the inner most widget relative to\n *          this element (if any) will be called when the app link has been clicked.\n */\n\n\n$.fn.appLink = function (appLinkBean, func) {\n  if (!func) {\n    func = function (event) {\n      var widget = scout.widget(this);\n\n      if (widget && widget._onAppLinkAction) {\n        widget._onAppLinkAction(event);\n      }\n    }.bind(this);\n  } else if (_typeof(func) === 'object' && func._onAppLinkAction) {\n    func = func._onAppLinkAction.bind(func);\n  }\n\n  this.addClass('app-link').attr('tabindex', '0').unfocusable().on('click', func);\n\n  if (typeof appLinkBean === 'string') {\n    this.attr('data-ref', appLinkBean);\n  } else {\n    this.text(appLinkBean.name).attr('data-ref', appLinkBean.ref);\n  }\n\n  return this;\n};\n/**\n * Adds the class 'unfocusable' to current result set. The class is not used for styling purposes\n * but has a meaning to the FocusManager.\n */\n\n\n$.fn.unfocusable = function () {\n  return this.addClass('unfocusable');\n};\n/**\n * Select all text within an element, e.g. within a content editable div element.\n */\n\n\n$.fn.selectAllText = function () {\n  var range,\n      myDocument = this.document(true),\n      myWindow = this.window(true),\n      element = this[0];\n\n  if (!myDocument || !myDocument.body || !myWindow || !element) {\n    return this;\n  } // CreateTextRange is only available in IE\n  // noinspection JSUnresolvedVariable\n\n\n  if (myDocument.body.createTextRange) {\n    range = myDocument.body.createTextRange();\n    range.moveToElementText(element);\n    range.select();\n    return this;\n  }\n\n  if (myWindow.getSelection) {\n    range = myDocument.createRange();\n    range.selectNodeContents(element);\n    myWindow.getSelection().removeAllRanges();\n    myWindow.getSelection().addRange(range);\n  }\n\n  return this;\n};\n\n$.fn._getClientAndScrollWidthRounded = function () {\n  var element = this[0];\n  var device = Device.get();\n\n  if (device.isInternetExplorer() || device.isEdge()) {\n    // IE and Edge seem to round up the scrollWidth. Therefore the clientWidth must be rounded up as well to have a valid comparison.\n    return {\n      clientWidth: Math.ceil(element.getBoundingClientRect().width) - this.cssBorderWidthX(),\n      // getBoundingClientRect includes the border -> remove it again to have the clientWidth\n      scrollWidth: element.scrollWidth\n    };\n  }\n\n  return {\n    clientWidth: element.clientWidth,\n    scrollWidth: element.scrollWidth\n  };\n};\n\n$.fn._getClientAndScrollWidthReliable = function () {\n  var widths = this._getClientAndScrollWidthRounded();\n\n  if (!Device.get().isScrollWidthIncludingPadding()) {\n    // browser supports accurate client- and scroll widths.\n    return widths;\n  }\n\n  if (widths.scrollWidth > widths.clientWidth) {\n    // content is large enough so that the scroll-width is already larger than the client-width. Values are correct.\n    return widths;\n  }\n\n  var paddingRight = this.cssPaddingRight(),\n      oldStyle = this.attr('style');\n\n  if (paddingRight > 0) {\n    // Some browsers render text within the right-padding (even with overflow=hidden). This has an effect on the value of scrollWidth which may be wrong in these cases (scrollWidth == clientWidth but ellipsis is shown).\n    // Solution: temporary remove the padding and reduce the width by the padding-size to have the same space for the text but without padding.\n    this.css({\n      width: widths.clientWidth - paddingRight,\n      paddingRight: '0px'\n    });\n    widths = this._getClientAndScrollWidthRounded(); // read value again.\n\n    this.attrOrRemove('style', oldStyle);\n\n    if (widths.scrollWidth > widths.clientWidth) {\n      return widths;\n    }\n  } // In some cases the browser returns the same values for clientWidth and scrollWidth,\n  // but will cut off the text nevertheless. At least in FF this seems to be a bug related\n  // to sub-pixel rendering. The text is \"slightly\" (0.2 pixels) larger than the clientWidth,\n  // but scrollWidth returns the same value.\n  // As a workaround, we do a second measurement of the uncut width before returning false.\n\n\n  var clientWidth = this[0].getBoundingClientRect().width;\n  this.css('width', 'auto');\n  this.css('max-width', 'none');\n  var scrollWidth = this[0].getBoundingClientRect().width;\n  this.attrOrRemove('style', oldStyle);\n  return {\n    clientWidth: clientWidth,\n    scrollWidth: scrollWidth\n  };\n};\n/**\n * Checks if content is truncated.\n */\n\n\n$.fn.isContentTruncated = function () {\n  var widths = this._getClientAndScrollWidthReliable();\n\n  if (widths.scrollWidth > widths.clientWidth) {\n    return true;\n  }\n};\n/**\n * This function is used to distinct between single and double clicks.\n * Instead of executing a handler immediately when the first click occurs,\n * we wait for a given timeout (or by default 300 ms) to check if it is followed by a second click.\n * This will delay the execution of a single click a bit, so you should use this function wisely.\n */\n\n\n$.fn.onSingleOrDoubleClick = function (singleClickFunc, doubleClickFunc, timeout) {\n  return this.each(function () {\n    var that = this,\n        numClicks = 0,\n        timeout = scout.nvl(timeout, 300);\n    $(this).on('click', function (event) {\n      numClicks++;\n\n      if (numClicks === 1) {\n        setTimeout(function () {\n          if (numClicks === 1) {\n            singleClickFunc.call(that, event);\n          } else {\n            doubleClickFunc.call(that, event);\n          }\n\n          numClicks = 0;\n        }, timeout);\n      }\n    });\n  });\n};\n\n$.fn.onPassive = function (eventType, handler) {\n  var options = events.passiveOptions();\n  this[0].addEventListener(eventType, handler, options);\n  return this;\n};\n\n$.fn.offPassive = function (eventType, handler) {\n  var options = events.passiveOptions();\n  this[0].removeEventListener(eventType, handler, options);\n  return this;\n}; // ------------------------------------------------------------------\n\n\n$.fn.appendTable = function (cssClass) {\n  return this.appendElement('<table>', cssClass);\n};\n\n$.fn.appendColgroup = function (cssClass) {\n  return this.appendElement('<colgroup>', cssClass);\n};\n\n$.fn.appendCol = function (cssClass) {\n  return this.appendElement('<col>', cssClass);\n};\n\n$.fn.appendTr = function (cssClass) {\n  return this.appendElement('<tr>', cssClass);\n};\n\n$.fn.appendTd = function (cssClass, text) {\n  return this.appendElement('<td>', cssClass, text);\n};\n\n$.fn.appendTh = function (cssClass, text) {\n  return this.appendElement('<th>', cssClass, text);\n};\n\n$.fn.appendUl = function (cssClass) {\n  return this.appendElement('<ul>', cssClass);\n};\n\n$.fn.appendLi = function (cssClass, text) {\n  return this.appendElement('<li>', cssClass, text);\n}; // === $.easing extensions ===\n\n\n$.extend($.easing, {\n  easeOutQuart: function easeOutQuart(x) {\n    return 1 - Math.pow(1 - x, 4);\n  }\n});\n/**\n * jquery.binarytransport.js\n *\n * @description. jQuery ajax transport for making binary data type requests.\n * @version 1.0\n * @author Henry Algus <henryalgus@gmail.com>\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Henry Algus\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n// use this transport for \"binary\" data type\n\n$.ajaxTransport('+binary', function (options, originalOptions, jqXHR) {\n  // check for conditions and support for blob / arraybuffer response type\n  if (window.FormData && (options.dataType && options.dataType === 'binary' || options.data && (window.ArrayBuffer && options.data instanceof ArrayBuffer || window.Blob && options.data instanceof Blob))) {\n    return {\n      // create new XMLHttpRequest\n      send: function send(headers, callback) {\n        // setup all variables\n        var xhr = new XMLHttpRequest(),\n            url = options.url,\n            type = options.type,\n            async = options.async || true,\n            // blob or arraybuffer. Default is blob\n        dataType = options.responseType || 'blob',\n            data = options.data || null,\n            username = options.username || null,\n            password = options.password || null;\n        xhr.addEventListener('load', function () {\n          var data = {};\n          data[options.dataType] = xhr.response; // make callback and send data\n\n          callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\n        });\n        xhr.open(type, url, async, username, password); // setup custom headers\n\n        for (var i in headers) {\n          // NOSONAR\n          xhr.setRequestHeader(i, headers[i]);\n        } // apply custom fields (if provided)\n        // noinspection JSUnresolvedVariable\n\n\n        if (options.xhrFields) {\n          for (var j in options.xhrFields) {\n            xhr[j] = options.xhrFields[j];\n          }\n        }\n\n        xhr.responseType = dataType;\n        xhr.send(data);\n      },\n      abort: function abort() {}\n    };\n  }\n}); // jquery's noGlobal is true with webpack so jquery does not expose $ by itself\n\nif (window.$ !== $) {\n  window.$ = $;\n}","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/jquery/jquery-scout.js"],"names":["$","arrays","Device","Dimension","events","IconDesc","icons","objects","scout","strings","elemVisible","elem","isHidden","style","myWindow","Document","ownerDocument","defaultView","getComputedStyle","display","explodeShorthandProperties","properties","newProperties","forEach","prop","push","_ceilNumber","val","isNumber","Math","ceil","__origCleanData","cleanData","elems","i","_data","remove","triggerHandler","e","removeThis","suppressEvent","event","preventDefault","stopPropagation","stopImmediatePropagation","suppressEventIfDisabled","$target","target","isEnabled","debounce","fx","options","delay","extend","reschedule","timeoutId","fn","that","args","arguments","clearTimeout","setTimeout","apply","cancel","throttle","undefined","lastExecution","now","Date","getTime","callFx","negate","colorOpacity","hex","opacity","String","replace","length","rgb","c","parseInt","substr","round","min","max","toString","injectScript","url","deferred","Deferred","myDocument","document","window","linkTag","createElement","attr","on","removeTag","head","removeChild","type","reject","resolve","appendChild","promise","injectStyleSheet","injectStyle","data","styleTag","$styleTag","html","pxToNumber","pixel","parseFloat","resolvedDeferred","resolvedPromise","rejectedPromise","promiseAll","promises","asArray","nvl","ensure","when","done","argumentsToArray","fail","ajaxJson","ajax","dataType","contentType","catch","$elem","isJqXHR","obj","hasOwnProperty","$element","makeElement","element","cssClass","text","Error","addClass","makeDiv","makeSpan","domElement","activeElement","body","$body","entryPoint","closest","windowSize","$window","width","height","elementFromPoint","x","y","selector","$container","doc","elements","documentElement","isOrHas","is","log","warn","removeClass","prependDiv","prependTo","appendDiv","appendTo","prependElement","appendElement","afterDiv","insertAfter","beforeDiv","insertBefore","appendSpan","appendBr","appendTextNode","createTextNode","appendIcon","iconId","icon","parseIconId","isFontIcon","iconCharacter","appendCssClass","appendImg","iconUrl","imageSrc","$icon","makeSVG","id","$svg","createElementNS","appendSVG","attrXLINK","attributeName","value","setAttributeNS","each","addDeviceClass","device","get","isInternetExplorer","browserVersion","isIos","selectOne","siblings","select","selected","toggleClass","isSelected","hasClass","setEnabled","enabled","toggleAttr","trigger","setVisible","visible","isVisible","isDisplayNone","css","setTabbable","tabbable","isTabbable","addToDomFunc","getOrCreateIconElement","call","removeIconElement","newElement","prepend","removeData","placeholder","isEveryParentVisible","everyParentVisible","parents","isAttached","contains","scrollParent","parent","scrollParents","$scrollParents","animateAVCSD","complete","step","duration","queue","animate","animateSVG","endValue","withoutTabIndex","startValue","oldComplete","removeAttr","tabIndex","setAttribute","pos","addClassForAnimation","className","defaultOptions","classesToRemove","oneAnimationEnd","bind","handler","one","hasAnimationClass","test","cssWidthAnimated","oldWidth","newWidth","opts","cssWidth","cssHeightAnimated","oldHeight","newHeight","cssHeight","cssLeftAnimated","from","to","cssLeft","left","cssTopAnimated","cssTop","top","cssAnimated","fromVals","toVals","widthToContent","oldW","outerWidth","newW","offsetTo","$to","toOffset","offset","cssPxValue","position","cssPosition","point","cssBottom","cssRight","cssMinWidth","minWidth","indexOf","cssMaxWidth","maxWidth","Number","MAX_VALUE","cssMinHeight","minHeight","cssMaxHeight","maxHeight","cssLineHeight","cssMarginLeft","cssMarginBottom","cssMarginRight","cssMarginTop","cssMarginX","cssMarginY","cssPaddingTop","cssPaddingRight","cssPaddingBottom","cssPaddingLeft","cssPaddingX","cssPaddingY","cssBorderBottomWidth","cssBorderLeftWidth","cssBorderRightWidth","cssBorderTopWidth","cssBorderWidthY","cssBorderWidthX","innerBottom","outerHeight","innerRight","copyCss","$origin","props","split","$this","copyCssIfGreater","originValue","thisValue","copyCssClasses","$other","classString","classes","disableSpellcheck","has","resizable","model","create","unresizable","destroy","draggable","$handle","callback","$draggable","orig_offset","orig_event","handleWidth","windowWidth","windowHeight","pageY","pageX","newOffset","off","undraggable","fadeOutAndRemove","stop","fadeOut","removeAnimated","supportsCssAnimation","__origHide","hide","__origWidth","__origOuterWidth","__origHeight","__origOuterHeight","textOrNbsp","emptyCssClass","contentOrNbsp","htmlOrNbsp","htmlEnabled","content","func","hasText","state","backupSelection","field","selectionStart","selectionEnd","selectionDirection","restoreSelection","selection","setSelectionRange","attrOrRemove","appendAppLink","appLinkBean","appLink","widget","_onAppLinkAction","unfocusable","name","ref","selectAllText","range","createTextRange","moveToElementText","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","_getClientAndScrollWidthRounded","isEdge","clientWidth","getBoundingClientRect","scrollWidth","_getClientAndScrollWidthReliable","widths","isScrollWidthIncludingPadding","paddingRight","oldStyle","isContentTruncated","onSingleOrDoubleClick","singleClickFunc","doubleClickFunc","timeout","numClicks","onPassive","eventType","passiveOptions","addEventListener","offPassive","removeEventListener","appendTable","appendColgroup","appendCol","appendTr","appendTd","appendTh","appendUl","appendLi","easing","easeOutQuart","pow","ajaxTransport","originalOptions","jqXHR","FormData","ArrayBuffer","Blob","send","headers","xhr","XMLHttpRequest","async","responseType","username","password","response","status","statusText","getAllResponseHeaders","open","setRequestHeader","xhrFields","j","abort"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n/**\n * jQuery plugin with scout extensions\n */\nimport $ from 'jquery';\nimport {arrays, Device, Dimension, events, IconDesc, icons, objects, scout, strings} from '../index';\n\n/**\n * By using $ in jsdoc all the functions is this file are recognized as part of $.\n * By additionally defining $ as jQuery all default jQuery functions are recognized as well.\n * @typedef {jQuery} $\n */\n\n// === internal methods ===\n\n/**\n * Returns false when the component display is 'none', otherwise true.\n *\n * Note: this gives other results than $.is(':visible'), since that method will also return false\n * when a component has absolute positioning and no width and height is defined (well, you cannot\n * see a component with a style like this, but technically it is not set to 'not visible').\n *\n * Also note that this function _only_ checks the 'display' property! Other methods to make an element\n * invisible to the user ('visibility: hidden', 'opacity: 0', off-screen position etc.) are _not_\n * considered.\n */\nfunction elemVisible(elem) {\n  // Check if element itself is hidden by its own style attribute\n  if (!elem || isHidden(elem.style)) {\n    return false;\n  }\n  // Must use correct window for element / computedStyle\n  var myWindow = (elem instanceof Document ? elem : elem.ownerDocument).defaultView;\n  // In some cases with popup windows the window object may be already set to null\n  // but we still have a valid reference to a DOM element. In that case we assume\n  // the element is not visible anymore.\n  if (!myWindow) {\n    return false;\n  }\n  // Check if element itself is hidden by external style-sheet\n  if (isHidden(myWindow.getComputedStyle(elem))) {\n    return false;\n  }\n  // Else visible\n  return true;\n\n  // ----- Helper functions -----\n\n  function isHidden(style) {\n    return style.display === 'none';\n  }\n}\n\nfunction explodeShorthandProperties(properties) {\n  var newProperties = [];\n  properties.forEach(function(prop) {\n    // shorthand css properties may not be copied directly (at least not in firefox) -> copy the actual properties\n    if (prop === 'margin' || prop === 'padding') {\n      newProperties.push(prop + '-top');\n      newProperties.push(prop + '-right');\n      newProperties.push(prop + '-bottom');\n      newProperties.push(prop + '-left');\n    } else if (prop === 'border') {\n      newProperties.push('border-top-style');\n      newProperties.push('border-right-style');\n      newProperties.push('border-bottom-style');\n      newProperties.push('border-left-style');\n\n      newProperties.push('border-top-color');\n      newProperties.push('border-right-color');\n      newProperties.push('border-bottom-color');\n      newProperties.push('border-left-color');\n\n      newProperties.push('border-top-width');\n      newProperties.push('border-right-width');\n      newProperties.push('border-bottom-width');\n      newProperties.push('border-left-width');\n    } else {\n      newProperties.push(prop);\n    }\n  });\n  return newProperties;\n}\n\n/**\n * This function is required because most jQuery functions can be used with or without arguments\n * and do return the jQuery instance when used as a setter (with arguments), ceiling should only\n * be done, when used as getter (without arguments).\n */\nfunction _ceilNumber(val) {\n  return objects.isNumber(val) ? Math.ceil(val) : val;\n}\n\n// === $ extensions ===\n\n/* !\n * jQuery UI Widget 1.11.2\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\nconst __origCleanData = $.cleanData;\n/**\n * This function is copied from jQuery UI. It is used to fire a 'remove' event\n * when we call the .remove() function on a jQuery object.\n */\n$.cleanData = function(elems) {\n  var events, elem, i;\n  for (i = 0; (elem = elems[i]); i++) { // NOSONAR\n    try {\n      // Only trigger remove when necessary to save time\n      events = $._data(elem, 'events');\n      if (events && events.remove) {\n        $(elem).triggerHandler('remove');\n      }\n      // http://bugs.jquery.com/ticket/8235\n    } catch (e) {\n      // NOP\n    }\n  }\n  __origCleanData(elems);\n};\n\n/**\n * Used by some animate functions.\n */\n$.removeThis = function() {\n  $(this).remove();\n};\n\n/**\n * Convenience function that can be used as an jQuery event handler, when this\n * event should be \"swallowed\". Technically, this function calls preventDefault(),\n * stopPropagation() and stopImmediatePropagation() on the event.\n *\n * Note: \"return false\" is equal to preventDefault() and stopPropagation(), but\n * not stopImmediatePropagation().\n */\n$.suppressEvent = function(event) {\n  if (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n  }\n};\n\n/**\n * If the event target is disabled (according to $.fn.isEnabled()), the event is suppressed\n * and the method returns true. Otherwise, false is returned.\n */\n$.suppressEventIfDisabled = function(event, $target) {\n  $target = $target || $(event.target);\n  if (!$target.isEnabled()) {\n    $.suppressEvent(event);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Implements the 'debounce' pattern. The given function fx is executed after a certain delay\n * (in milliseconds), but if the same function is called a second time within the waiting time,\n * depending on the 'reschedule' option, the timer is reset or the second call is ignored.\n * The default value for the 'delay' option is 250 ms.\n *\n * The resulting function has a function member 'cancel' that can be used to clear any scheduled\n * calls to the original function. If no such call was scheduled, cancel() returns false,\n * otherwise true.\n *\n * OPTION         DEFAULT VALUE   DESCRIPTION\n * ------------------------------------------------------------------------------------\n * delay          250             Waiting time in milliseconds before the function is executed.\n *\n * reschedule     true            Defines whether subsequent call to the debounced function\n *                                within the waiting time cause the timer to be reset or not.\n *                                If the reschedule option is 'false', subsequent calls within\n *                                the waiting time will just be ignored.\n *\n * @param fx\n *          the function to wrap\n * @param options\n *          an optional options object (see table above). Short-hand version: If a number is passed instead\n *          of an object, the value is automatically converted to the option 'delay'.\n */\n$.debounce = function(fx, options) {\n  if (typeof options === 'number') {\n    options = {\n      delay: options\n    };\n  }\n  options = $.extend({\n    delay: 250,\n    reschedule: true\n  }, options);\n\n  var timeoutId = null;\n  var fn = function() {\n    var that = this,\n      args = arguments;\n\n    if (timeoutId && !options.reschedule) {\n      // Function is already schedule but 'reschedule' option is set to false --> discard this request\n      return;\n    }\n    if (timeoutId) {\n      // Function is already scheduled --> cancel current scheduled call and re-schedule the call\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(function() {\n      timeoutId = null;\n      fx.apply(that, args);\n    }, options.delay);\n  };\n  fn.cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      return true;\n    }\n    return false;\n  };\n  return fn;\n};\n\n/**\n * Executes the given function. Further calls to the same function are delayed by the given delay\n * (default 250ms). This is similar to $.debounce() but ensures that function is called at least\n * every 'delay' milliseconds. Can be useful to prevent too many function calls, e.g. from UI events.\n */\n$.throttle = function(fx, delay) {\n  delay = (delay !== undefined) ? delay : 250;\n  var timeoutId = null;\n  var lastExecution;\n  return function() {\n    var that = this,\n      args = arguments,\n      now = new Date().getTime(),\n      callFx = function() {\n        lastExecution = now;\n        fx.apply(that, args);\n      };\n    if (lastExecution && lastExecution + delay > now) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function() {\n        callFx();\n      }, delay);\n    } else {\n      callFx();\n    }\n  };\n};\n\n/**\n * Returns a function which negates the return value of the given function when called.\n */\n$.negate = function(fx) {\n  return function() {\n    return !fx.apply(this, arguments);\n  };\n};\n\n/**\n * color calculation\n */\n$.colorOpacity = function(hex, opacity) {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, '');\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  opacity = opacity || 0;\n\n  // convert to decimal and change luminosity\n  var rgb = '#';\n  for (var i = 0; i < 3; i++) {\n    var c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, 255 - (255 - c) * opacity), 255)).toString(16);\n    rgb += ('00' + c).substr(c.length);\n  }\n\n  return rgb;\n};\n\n/**\n * CSP-safe method to dynamically load and execute a script from server.\n *\n * A new <script> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new script tag is passed to the promise's\n * callback functions.\n *\n *   $.injectScript('http://server/path/script.js')\n *     .done(function($scriptTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the script to.\n *\n * removeTag         false               Whether to remove the script tag again from the DOM\n *                                       after the script has been loaded.\n */\n$.injectScript = function(url, options) {\n  options = options || {};\n  var deferred = $.Deferred();\n\n  var myDocument = options.document || window.document;\n  var linkTag = myDocument.createElement('script');\n  $(linkTag)\n    .attr('src', url)\n    .attr('async', true)\n    .on('load error', function(event) {\n      if (options.removeTag) {\n        myDocument.head.removeChild(linkTag);\n      }\n      if (event.type === 'error') {\n        deferred.reject($(linkTag));\n      } else {\n        deferred.resolve($(linkTag));\n      }\n    });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n\n  return deferred.promise();\n};\n\n/**\n * CSP-safe method to dynamically load a style sheet from server.\n *\n * A new <link> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new link tag is passed to the promise's\n * callback functions.\n *\n *   $.injectStyleSheet('http://server/path/style.css')\n *     .done(function($linkTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style sheet to.\n */\n$.injectStyleSheet = function(url, options) {\n  options = options || {};\n  var deferred = $.Deferred();\n\n  var myDocument = options.document || window.document;\n  var linkTag = myDocument.createElement('link');\n  $(linkTag)\n    .attr('rel', 'stylesheet')\n    .attr('type', 'text/css')\n    .attr('href', url)\n    .on('load error', function(event) {\n      if (event.type === 'error') {\n        deferred.reject($(linkTag));\n      } else {\n        deferred.resolve($(linkTag));\n      }\n    });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n\n  return deferred.promise();\n};\n\n/**\n * Dynamically adds styles to the document.\n *\n * A new <style> tag is added to the document's head element. The methods returns\n * a jQuery object referring to the new style tag.\n *\n *   $styleTag = $.injectStyle('p { text-color: orange; }');\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style to.\n */\n$.injectStyle = function(data, options) {\n  options = options || {};\n\n  var myDocument = options.document || window.document;\n  var styleTag = myDocument.createElement('style');\n  var $styleTag = $(styleTag);\n  $styleTag\n    .attr('type', 'text/css')\n    .html(data);\n  myDocument.head.appendChild(styleTag);\n\n  return $styleTag;\n};\n\n$.pxToNumber = function(pixel) {\n  if (!pixel) {\n    // parseFloat would return NaN if pixel is '' or undefined\n    return 0;\n  }\n  // parseFloat ignores 'px' and just extracts the number\n  return parseFloat(pixel);\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]);</code>\n *\n * @param {object[]} [arguments] of this function are passed to the resolve function of the deferred\n * @returns {$.Deferred} a deferred for an already resolved jQuery.Deferred object.\n */\n$.resolvedDeferred = function() {\n  var deferred = $.Deferred();\n  deferred.resolve.apply(deferred, arguments);\n  return deferred;\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the resolve function of the deferred\n * @returns {Promise} a promise for an already resolved jQuery.Deferred object.\n */\n$.resolvedPromise = function() {\n  var deferred = $.Deferred();\n  deferred.resolve.apply(deferred, arguments);\n  return deferred.promise();\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().reject([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the reject function of the deferred\n * @returns {Promise} a promise for an already rejected jQuery.Deferred object.\n */\n$.rejectedPromise = function() {\n  var deferred = $.Deferred();\n  deferred.reject.apply(deferred, arguments);\n  return deferred.promise();\n};\n\n/**\n * Creates a new promise which resolves when all promises resolve and fails when the first promise fails.\n *\n * @param asArray (optional) when set to true, the resolve function will transform the\n *    flat arguments list containing the results into an array. The arguments of the reject function won't be touched. Default is false.\n */\n$.promiseAll = function(promises, asArray) {\n  asArray = scout.nvl(asArray, false);\n  promises = arrays.ensure(promises);\n  var deferred = $.Deferred();\n  $.when.apply($, promises).done(function() {\n    if (asArray) {\n      deferred.resolve(objects.argumentsToArray(arguments));\n    } else {\n      deferred.resolve.apply(this, arguments);\n    }\n  }).fail(function() {\n    deferred.reject.apply(this, arguments);\n  });\n  return deferred.promise();\n};\n\n/**\n * Shorthand for an AJAX request for a JSON file with UTF8 encoding.\n * Errors are caught and converted to a rejected promise with the following\n * arguments: jqXHR, textStatus, errorThrown, requestOptions.\n *\n * @returns a promise from JQuery function $.ajax\n */\n$.ajaxJson = function(url) {\n  return $.ajax({\n    url: url,\n    dataType: 'json',\n    contentType: 'application/json; charset=UTF-8'\n  }).catch(function() {\n    // Reject the promise with usual arguments (jqXHR, textStatus, errorThrown), but add the request\n    // options as additional argument (e.g. to make the URL available to the error handler)\n    var args = objects.argumentsToArray(arguments);\n    args.push(this);\n    return $.rejectedPromise.apply($, args);\n  });\n};\n\n/**\n * Ensures the given parameter is a jQuery object.<p>\n * If it is a jQuery object, it will be returned as it is.\n * If it isn't, it will be passed to $() in order to create one.\n * <p>\n * Just using $() on an existing jQuery object would clone it which would work but is unnecessary.\n */\n$.ensure = function($elem) {\n  if ($elem instanceof $) {\n    return $elem;\n  }\n  return $($elem);\n};\n\n/**\n * Helper function to determine if an object is of type \"jqXHR\" (http://api.jquery.com/jQuery.ajax/#jqXHR)\n */\n$.isJqXHR = function(obj) {\n  return (typeof obj === 'object' && obj.hasOwnProperty('readyState') && obj.hasOwnProperty('status') && obj.hasOwnProperty('statusText'));\n};\n\n// === $.prototype extensions ===\n\n$.fn.nvl = function($element) {\n  if (this.length || !($element instanceof $)) {\n    return this;\n  }\n  return $element;\n};\n\n/**\n * @param element string. Example = &lt;input&gt;\n * @param cssClass (optional) class attribute\n * @param text (optional) adds a child text-node with given text (no HTML content)\n */\n$.fn.makeElement = function(element, cssClass, text) {\n  var myDocument = this.document(true);\n  if (myDocument === undefined || element === undefined) {\n    return new Error('missing arguments: document, element');\n  }\n  var $element = $(element, myDocument);\n  if (cssClass) {\n    $element.addClass(cssClass);\n  }\n  if (text) {\n    $element.text(text);\n  }\n  return $element;\n};\n\n/**\n * Creates a DIV element in the current document.\n *\n * @param cssClass (optional) string added to the 'class' attribute\n * @param text (optional) string used as inner text\n */\n$.fn.makeDiv = function(cssClass, text) {\n  return this.makeElement('<div>', cssClass, text);\n};\n\n$.fn.makeSpan = function(cssClass, text) {\n  return this.makeElement('<span>', cssClass, text);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns HTML document reference (ownerDocument) of the HTML element.\n */\n$.fn.document = function(domElement) {\n  var myDocument = this.length ? (this[0] instanceof Document ? this[0] : this[0].ownerDocument) : null;\n  return domElement ? myDocument : $(myDocument);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns HTML window reference (defaultView) of the HTML element\n */\n$.fn.window = function(domElement) {\n  var myDocument = this.document(true),\n    myWindow = myDocument ? myDocument.defaultView : null;\n  return domElement ? myWindow : $(myWindow);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the active element of the current document\n */\n$.fn.activeElement = function(domElement) {\n  var myDocument = this.document(true),\n    activeElement = myDocument ? myDocument.activeElement : null;\n  return domElement ? activeElement : $(activeElement);\n};\n\n/**\n * @param {boolean} domElement (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the BODY element of the HTML document in which the current HTML element is placed.\n */\n$.fn.body = function(domElement) {\n  var $body = $('body', this.document(true));\n  return domElement ? $body[0] : $body;\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the closest DOM element that has the 'scout' class.\n */\n$.fn.entryPoint = function(domElement) {\n  var $element = this.closest('.scout');\n  return domElement ? $element[0] : $element;\n};\n\n/**\n * @returns {Dimension} size of the window (width and height)\n */\n$.fn.windowSize = function() {\n  var $window = this.window();\n  return new Dimension($window.width(), $window.height());\n};\n\n/**\n * Returns the element at the given point considering only child elements and elements matching the selector, if specified.\n */\n$.fn.elementFromPoint = function(x, y, selector) {\n  var $container = $(this),\n    doc = $container.document(true),\n    elements = [],\n    i = 0,\n    $element;\n\n  if (!doc) {\n    // If doc is null the $container itself is the document\n    doc = $container[0];\n  }\n  if (!doc) {\n    // If doc is still null (e.g. because the current jQuery collection does not contain any elements) return an empty collection\n    return $();\n  }\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    $element = $(doc.elementFromPoint(x, y));\n    if ($element.length === 0 || $element[0] === doc.documentElement) {\n      break;\n    }\n    if ($container.isOrHas($element) && (!selector || $element.is(selector))) {\n      break;\n    }\n    elements.push($element);\n    // make the element invisible to get the underlying element (uses visibility: hidden to make sure element size and position won't be changed)\n    $element.addClass('invisible');\n    i++;\n    if (i > 1000) {\n      $.log.warn('Infinite loop aborted', $element);\n      $element = $();\n      break;\n    }\n  }\n\n  if ($element[0] === doc.documentElement && $container[0] !== doc) {\n    // return an empty element if the only element found is the document element and the document element is not the container\n    $element = $();\n  }\n\n  elements.forEach(function($element) {\n    // show element again\n    $element.removeClass('invisible');\n  });\n  return $element;\n};\n\n// prepend - and return new div for chaining\n$.fn.prependDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).prependTo(this);\n};\n\n// append - and return new div for chaining\n$.fn.appendDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).appendTo(this);\n};\n\n$.fn.prependElement = function(element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).prependTo(this);\n};\n\n$.fn.appendElement = function(element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).appendTo(this);\n};\n\n// insert after - and return new div for chaining\n$.fn.afterDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).insertAfter(this);\n};\n\n// insert before - and return new div for chaining\n$.fn.beforeDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).insertBefore(this);\n};\n\n$.fn.appendSpan = function(cssClass, text) {\n  return this.makeSpan(cssClass, text).appendTo(this);\n};\n\n$.fn.appendBr = function(cssClass) {\n  return this.makeElement('<br>', cssClass).appendTo(this);\n};\n\n$.fn.appendTextNode = function(text) {\n  return $(this.document(true).createTextNode(text)).appendTo(this);\n};\n\n/**\n * @param {IconDesc|string} iconId\n */\n$.fn.appendIcon = function(iconId, cssClass) {\n  if (!iconId) {\n    return this.appendSpan(cssClass)\n      .addClass('icon');\n  }\n  var icon;\n  if (iconId instanceof IconDesc) {\n    icon = iconId;\n  } else {\n    icon = icons.parseIconId(iconId);\n  }\n  if (icon.isFontIcon()) {\n    return this.makeSpan(cssClass, icon.iconCharacter)\n      .addClass('icon')\n      .addClass(icon.appendCssClass('font-icon'))\n      .appendTo(this);\n  }\n  return this.appendImg(icon.iconUrl, cssClass)\n    .addClass('icon image-icon');\n};\n\n$.fn.appendImg = function(imageSrc, cssClass) {\n  var $icon = this.appendElement('<img>', cssClass);\n  if (imageSrc) {\n    $icon.attr('src', imageSrc);\n  }\n  return $icon;\n};\n\n$.fn.makeSVG = function(type, cssClass, text, id) {\n  var myDocument = this.document(true);\n  if (myDocument === undefined || type === undefined) {\n    return new Error('missing arguments: document, type');\n  }\n  var $svg = $(myDocument.createElementNS('http://www.w3.org/2000/svg', type));\n  if (cssClass) {\n    $svg.attr('class', cssClass);\n  }\n  if (text) {\n    $svg.text(text);\n  }\n  if (id !== undefined) {\n    $svg.attr('id', id);\n  }\n  return $svg;\n};\n\n// append SVG\n$.fn.appendSVG = function(type, cssClass, text, id) {\n  return this.makeSVG(type, cssClass, text, id).appendTo(this);\n};\n\n$.fn.attrXLINK = function(attributeName, value) {\n  if (this.length === 0) { // shortcut for empty collections\n    return this;\n  }\n  if (this.length === 1) { // shortcut for single element collections\n    this[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n    return this;\n  }\n  return this.each(function() {\n    this.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n  });\n};\n\n/**\n * This function adds a device specific CSS class to the current element.\n * The current implementation adds a class 'ie' if Internet Explorer is used.\n */\n$.fn.addDeviceClass = function() {\n  var device = Device.get();\n  if (device.isInternetExplorer()) {\n    this.addClass('ie');\n    if (device.browserVersion === 9) {\n      this.addClass('ie9');\n    }\n  }\n  if (device.isIos()) {\n    this.addClass('ios');\n  }\n  return this;\n};\n\n// select one and deselect siblings\n$.fn.selectOne = function() {\n  this.siblings().removeClass('selected');\n  this.addClass('selected');\n  return this;\n};\n\n$.fn.select = function(selected) {\n  return this.toggleClass('selected', !!selected);\n};\n\n$.fn.isSelected = function() {\n  return this.hasClass('selected');\n};\n\n$.fn.setEnabled = function(enabled) {\n  enabled = !!enabled;\n  this.toggleClass('disabled', !enabled);\n  // Toggle disabled attribute for elements that support it (see http://www.w3.org/TR/html5/disabled-elements.html)\n  if (this.is('button, input, select, textarea, optgroup, option, fieldset')) {\n    this.toggleAttr('disabled', !enabled);\n  }\n  this.trigger(enabled ? 'enable' : 'disable');\n  return this;\n};\n\n$.fn.isEnabled = function() {\n  return !this.hasClass('disabled');\n};\n\n$.fn.setVisible = function(visible) {\n  var isVisible = !this.hasClass('hidden');\n  if (isVisible === visible) {\n    return this;\n  }\n  if (!visible) {\n    this.addClass('hidden');\n    this.trigger('hide');\n  } else {\n    this.removeClass('hidden');\n    this.trigger('show');\n  }\n  return this;\n};\n\n$.fn.isDisplayNone = function() {\n  return this.css('display') === 'none';\n};\n\n$.fn.setTabbable = function(tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : null);\n};\n\n$.fn.isTabbable = function() {\n  return this.attr('tabIndex') >= 0;\n};\n\n/**\n * @param {string} iconId\n * @param {function} [addToDomFunc] optional function which is used to add the new icon element to the DOM\n *     When not set, this.prepend($icon) is called.\n * @returns {$}\n * @see Icon as an alternative\n */\n$.fn.icon = function(iconId, addToDomFunc) {\n  var icon, $icon = this.data('$icon');\n  if (iconId) {\n    icon = icons.parseIconId(iconId);\n    if (icon.isFontIcon()) {\n      getOrCreateIconElement.call(this, $icon, '<span>', addToDomFunc)\n        .addClass('icon')\n        .addClass(icon.appendCssClass('font-icon'))\n        .text(icon.iconCharacter);\n    } else {\n      getOrCreateIconElement.call(this, $icon, '<img>', addToDomFunc)\n        .attr('src', icon.iconUrl)\n        .addClass('icon image-icon');\n    }\n  } else {\n    removeIconElement.call(this, $icon);\n  }\n  return this;\n\n  // ----- Helper functions -----\n\n  function getOrCreateIconElement($icon, newElement, addToDomFunc) {\n    // If element type does not match existing element, remove the existing element (e.g. when changing from font-icon to picture icon)\n    if ($icon && !$icon.is(newElement.replace(/[<>]/g, ''))) {\n      removeIconElement.call(this, $icon);\n      $icon = null;\n    }\n    // Create new element if necessary\n    if (!$icon) {\n      $icon = $(newElement);\n      this.data('$icon', $icon);\n      if (!addToDomFunc) {\n        this.prepend($icon);\n      } else {\n        addToDomFunc.call(this, $icon);\n      }\n    }\n    return $icon;\n  }\n\n  function removeIconElement($icon) {\n    if ($icon) {\n      $icon.remove();\n    }\n    this.removeData('$icon');\n  }\n};\n\n$.fn.placeholder = function(placeholder) {\n  return this.toggleAttr('placeholder', !!placeholder, placeholder);\n};\n\n$.fn.isVisible = function() {\n  if (this.hasClass('hidden')) {\n    return false;\n  }\n  return elemVisible(this[0]);\n};\n\n$.fn.isEveryParentVisible = function() {\n  var everyParentVisible = true;\n  this.parents().each(function() {\n    if (!$(this).isVisible()) {\n      everyParentVisible = false;\n      return false;\n    }\n  });\n  return everyParentVisible;\n};\n\n/**\n * @return {boolean} true if the element is attached (= is in the dom tree), false if not\n */\n$.fn.isAttached = function() {\n  return $.contains(this.document(true).documentElement, this[0]);\n};\n\n/**\n * @returns {$} the current element if it is scrollable, otherwise the first parent which is scrollable\n */\n$.fn.scrollParent = function() {\n  var $elem = this;\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      return $elem;\n    }\n    $elem = $elem.parent();\n  }\n  return $();\n};\n\n/**\n * Returns every parent which is scrollable\n */\n$.fn.scrollParents = function() {\n  var $scrollParents = $(),\n    $elem = this;\n\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      $scrollParents.push($elem);\n    }\n    $elem = $elem.parent();\n  }\n  return $scrollParents;\n};\n\n// most used animate\n$.fn.animateAVCSD = function(attr, value, complete, step, duration) {\n  var properties = {};\n  var options = {};\n\n  properties[attr] = value;\n  if (complete) {\n    options.complete = complete;\n  }\n  if (step) {\n    options.step = step;\n  }\n  if (duration) {\n    options.duration = duration;\n  }\n  options.queue = false;\n\n  this.animate(properties, options);\n  return this;\n};\n\n// SVG animate, array contains attr, endValue + startValue\n$.fn.animateSVG = function(attr, endValue, duration, complete, withoutTabIndex) {\n  return this.each(function() {\n    var startValue = parseFloat($(this).attr(attr));\n    if (withoutTabIndex) {\n      var oldComplete = complete;\n      complete = function() {\n        if (oldComplete) {\n          oldComplete.call(this);\n        }\n        $(this).removeAttr('tabindex');\n      };\n    }\n    $(this).animate({\n      tabIndex: 0\n    }, {\n      step: function(now, fx) {\n        this.setAttribute(attr, startValue + (endValue - startValue) * fx.pos);\n      },\n      duration: duration,\n      complete: complete,\n      queue: false\n    });\n  });\n};\n\n$.fn.addClassForAnimation = function(className, options) {\n  var defaultOptions = {\n    classesToRemove: className\n  };\n  options = $.extend({}, defaultOptions, options);\n  this.addClass(className);\n  this.oneAnimationEnd(function() {\n    // remove class, otherwise animation will be executed each time the element changes it's visibility (attach/rerender),\n    // and even each time when the css classes change\n    this.removeClass(options.classesToRemove);\n  }.bind(this));\n  return this;\n};\n\n$.fn.oneAnimationEnd = function(selector, data, handler) {\n  return this.one('animationend webkitAnimationEnd', selector, data, handler);\n};\n\n$.fn.hasAnimationClass = function() {\n  // matches any CSS class that starts with 'animate-'\n  return /(^|\\s)animate-/.test(this.attr('class'));\n};\n\n/**\n * Animates from old to new width\n */\n$.fn.cssWidthAnimated = function(oldWidth, newWidth, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old width first\n  this.cssWidth(oldWidth);\n\n  // Then animate to new width\n  this.animate({\n    width: newWidth\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssHeightAnimated = function(oldHeight, newHeight, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old height first\n  this.cssHeight(oldHeight);\n\n  // Then animate to new height\n  this.animate({\n    height: newHeight\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssLeftAnimated = function(from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssLeft(from);\n\n  // Then animate to new width\n  this.animate({\n    left: to\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssTopAnimated = function(from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssTop(from);\n\n  // Then animate to new pos\n  this.animate({\n    top: to\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssAnimated = function(fromVals, toVals, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.css(fromVals);\n\n  // Then animate to new pos\n  this.animate(toVals, opts);\n  return this;\n};\n\n// over engineered animate\n$.fn.widthToContent = function(opts) {\n  var oldW = this.outerWidth(),\n    newW = this.css('width', 'auto').outerWidth();\n\n  this.cssWidthAnimated(oldW, newW, opts);\n  return this;\n};\n\n/**\n * Offset to a specific ancestor and not to the document as offset() would do.\n * Not the same as position() which returns the position relative to the offset parent.\n */\n$.fn.offsetTo = function($to) {\n  var toOffset = $to.offset(),\n    offset = this.offset();\n\n  return {\n    top: offset.top - toOffset.top,\n    left: offset.left - toOffset.left\n  };\n};\n\n$.fn.cssPxValue = function(prop, value) {\n  if (value === undefined) {\n    return $.pxToNumber(this.css(prop));\n  }\n  if (value === null) {\n    value = ''; // \"null\" should also remove the CSS property\n  }\n  if (typeof value === 'string') {\n    return this.css(prop, value);\n  }\n  return this.css(prop, value + 'px');\n};\n\n$.fn.cssLeft = function(position) {\n  return this.cssPxValue('left', position);\n};\n\n$.fn.cssTop = function(position) {\n  return this.cssPxValue('top', position);\n};\n\n/**\n * Sets the CSS properties 'left' and 'top' based on the x and y properties of the given point instance.\n *\n * @param {Point} point\n */\n$.fn.cssPosition = function(point) {\n  return this.cssLeft(point.x).cssTop(point.y);\n};\n\n$.fn.cssBottom = function(position) {\n  return this.cssPxValue('bottom', position);\n};\n\n$.fn.cssRight = function(position) {\n  return this.cssPxValue('right', position);\n};\n\n$.fn.cssWidth = function(width) {\n  return this.cssPxValue('width', width);\n};\n\n$.fn.cssMinWidth = function(minWidth) {\n  if (minWidth === undefined) {\n    var value = this.css('min-width');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-width', minWidth);\n};\n\n/**\n * @returns {number} the max-width as number. If max-width is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxWidth = function(maxWidth) {\n  if (maxWidth === undefined) {\n    var value = this.css('max-width');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-width', maxWidth);\n};\n\n$.fn.cssHeight = function(height) {\n  return this.cssPxValue('height', height);\n};\n\n$.fn.cssMinHeight = function(minHeight) {\n  if (minHeight === undefined) {\n    var value = this.css('min-height');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-height', minHeight);\n};\n\n/**\n * @returns {number} the max-height as number. If max-height is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxHeight = function(maxHeight) {\n  if (maxHeight === undefined) {\n    var value = this.css('max-height');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-height', maxHeight);\n};\n\n$.fn.cssLineHeight = function(height) {\n  return this.cssPxValue('line-height', height);\n};\n\n$.fn.cssMarginLeft = function(value) {\n  return this.cssPxValue('margin-left', value);\n};\n\n$.fn.cssMarginBottom = function(value) {\n  return this.cssPxValue('margin-bottom', value);\n};\n\n$.fn.cssMarginRight = function(value) {\n  return this.cssPxValue('margin-right', value);\n};\n\n$.fn.cssMarginTop = function(value) {\n  return this.cssPxValue('margin-top', value);\n};\n\n$.fn.cssMarginX = function(value) {\n  if (value === undefined) {\n    return this.cssMarginLeft() + this.cssMarginRight();\n  }\n  this.cssMarginLeft(value);\n  this.cssMarginRight(value);\n  return this;\n};\n\n$.fn.cssMarginY = function(value) {\n  if (value === undefined) {\n    return this.cssMarginTop() + this.cssMarginBottom();\n  }\n  this.cssMarginTop(value);\n  this.cssMarginBottom(value);\n  return this;\n};\n\n$.fn.cssPaddingTop = function(value) {\n  return this.cssPxValue('padding-top', value);\n};\n\n$.fn.cssPaddingRight = function(value) {\n  return this.cssPxValue('padding-right', value);\n};\n\n$.fn.cssPaddingBottom = function(value) {\n  return this.cssPxValue('padding-bottom', value);\n};\n\n$.fn.cssPaddingLeft = function(value) {\n  return this.cssPxValue('padding-left', value);\n};\n\n$.fn.cssPaddingX = function(value) {\n  if (value === undefined) {\n    return this.cssPaddingLeft() + this.cssPaddingRight();\n  }\n  this.cssPaddingLeft(value);\n  this.cssPaddingRight(value);\n  return this;\n};\n\n$.fn.cssPaddingY = function(value) {\n  if (value === undefined) {\n    return this.cssPaddingTop() + this.cssPaddingBottom();\n  }\n  this.cssPaddingTop(value);\n  this.cssPaddingBottom(value);\n  return this;\n};\n\n$.fn.cssBorderBottomWidth = function(value) {\n  return this.cssPxValue('border-bottom-width', value);\n};\n\n$.fn.cssBorderLeftWidth = function(value) {\n  return this.cssPxValue('border-left-width', value);\n};\n\n$.fn.cssBorderRightWidth = function(value) {\n  return this.cssPxValue('border-right-width', value);\n};\n\n$.fn.cssBorderTopWidth = function(value) {\n  return this.cssPxValue('border-top-width', value);\n};\n\n$.fn.cssBorderWidthY = function(value) {\n  if (value === undefined) {\n    return this.cssBorderTopWidth() + this.cssBorderBottomWidth();\n  }\n  this.cssBorderTopWidth(value);\n  this.cssBorderBottomWidth(value);\n};\n\n$.fn.cssBorderWidthX = function(value) {\n  if (value === undefined) {\n    return this.cssBorderLeftWidth() + this.cssBorderRightWidth();\n  }\n  this.cssBorderLeftWidth(value);\n  this.cssBorderRightWidth(value);\n};\n\n/**\n * Bottom of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerBottom = function() {\n  return this.position().top + this.outerHeight(true) - this.cssMarginBottom() - this.cssBorderBottomWidth();\n};\n\n/**\n * Right of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerRight = function() {\n  return this.position().left + this.outerWidth(true) - this.cssMarginRight() - this.cssBorderRightWidth();\n};\n\n$.fn.copyCss = function($origin, props) {\n  var properties = props.split(' ');\n  var $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(function(prop) {\n    $this.css(prop, $origin.css(prop));\n  });\n  return $this;\n};\n\n$.fn.copyCssIfGreater = function($origin, props) {\n  var properties = props.split(' ');\n  var $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(function(prop) {\n    var originValue = $.pxToNumber($origin.css(prop));\n    var thisValue = $.pxToNumber($this.css(prop));\n    if (originValue > thisValue) {\n      $this.css(prop, originValue + 'px');\n    }\n  });\n  return $this;\n};\n\n$.fn.copyCssClasses = function($other, classString) {\n  var classes = classString.split(' ');\n  var $this = this;\n  classes.forEach(function(cssClass) {\n    if ($other.hasClass(cssClass)) {\n      $this.addClass(cssClass);\n    }\n  });\n  return $this;\n};\n\n$.fn.disableSpellcheck = function() {\n  return this.attr('spellcheck', false);\n};\n\n/**\n * Returns whether the current element is the given element or has a child which is the given element.\n */\n$.fn.isOrHas = function(elem) {\n  if (elem instanceof $) {\n    elem = elem[0];\n  }\n  return this[0] === elem || this.has(elem).length > 0;\n};\n\n/**\n * Makes the current element resizable, which means DIVs for resize-handling are added to the DOM\n * in the E, SE and S of the element. This is primarily useful for (modal) dialogs.\n */\n$.fn.resizable = function(model) {\n  var $this = $(this);\n  var resizable = $this.data('resizable');\n  if (resizable) {\n    // Already resizable\n    return this;\n  }\n  resizable = scout.create('Resizable', $.extend(model, {$container: $this}));\n  $this.data('resizable', resizable);\n  return this;\n};\n\n/**\n * Removes the resize handles and event handlers in order to make the element un resizable again.\n */\n$.fn.unresizable = function() {\n  var $this = $(this);\n  var resizable = $this.data('resizable');\n  if (resizable) {\n    resizable.destroy();\n    $this.removeData('resizable');\n  }\n  return this;\n};\n\n/**\n * Makes any element movable with the mouse. If the argument '$handle' is missing, the entire\n * element can be used as a handle.\n *\n * A callback function can be passed as second argument (optional). The function is called for\n * every change of the draggable's position with an object as argument:\n * { top: (top pixels), left: (left pixels) }\n */\n$.fn.draggable = function($handle, callback) {\n  var $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.on('mousedown.draggable', function(event) {\n    $('iframe').addClass('dragging-in-progress');\n    var orig_offset = $draggable.offset();\n    var orig_event = event;\n    var handleWidth = $handle.width();\n    var windowWidth = $handle.window().width();\n    var windowHeight = $handle.window().height();\n    $handle.parents()\n      .on('mousemove.dragging', function(event) {\n        var top = orig_offset.top + (event.pageY - orig_event.pageY);\n        var left = orig_offset.left + (event.pageX - orig_event.pageX);\n        // do not drop outside of viewport (and leave a margin of 100 pixels)\n        left = Math.max(100 - handleWidth, left);\n        left = Math.min(windowWidth - 100, left);\n        top = Math.max(0, top); // must not be dragged outside of top, otherwise dragging back is impossible\n        top = Math.min(windowHeight - 100, top);\n        var newOffset = {\n          top: top,\n          left: left\n        };\n        $draggable.offset(newOffset);\n        callback && callback(newOffset);\n      })\n      .on('mouseup.dragging', function(e) {\n        $handle.parents().off('.dragging');\n        $('iframe').removeClass('dragging-in-progress');\n      });\n    event.preventDefault();\n  });\n};\n\n/**\n *\n * Removes the mouse down handler which was added by draggable() in order to make it un draggable again.\n */\n$.fn.undraggable = function($handle) {\n  var $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.off('mousedown.draggable');\n};\n\n/**\n * Calls jQuery.fadeOut() and then removes the element from the DOM.\n * Default fade-out duration is 150 ms.\n */\n$.fn.fadeOutAndRemove = function(duration, callback) {\n  if (callback === undefined && typeof duration === 'function') {\n    callback = duration;\n    duration = undefined;\n  }\n  duration = scout.nvl(duration, 150);\n  return this.stop(true).fadeOut(duration, function() {\n    $(this).remove();\n    if (callback) {\n      callback.call(this);\n    }\n  });\n};\n\n$.fn.removeAnimated = function(cssClass, callback) {\n  if (callback === undefined && typeof cssClass === 'function') {\n    callback = cssClass;\n    cssClass = undefined;\n  }\n  if (this.isDisplayNone()) {\n    // Remove without animation\n    this.remove();\n    callback && callback.call(this);\n  } else if (!Device.get().supportsCssAnimation()) {\n    // Cannot remove animated, remove with jQuery.fadeOut()\n    this.fadeOutAndRemove(callback);\n  } else {\n    // Add CSS class and wait for 'animationend' event\n    this.addClass(cssClass || 'animate-remove');\n    this.oneAnimationEnd(function() {\n      $(this).remove();\n      callback && callback.call(this);\n    });\n  }\n};\n\nconst __origHide = $.fn.hide;\n$.fn.hide = function() {\n  this.trigger('hide');\n  return __origHide.apply(this, arguments);\n};\n\nconst __origWidth = $.fn.width;\n$.fn.width = function() {\n  return _ceilNumber(__origWidth.apply(this, arguments));\n};\n\nconst __origOuterWidth = $.fn.outerWidth;\n$.fn.outerWidth = function() {\n  return _ceilNumber(__origOuterWidth.apply(this, arguments));\n};\n\nconst __origHeight = $.fn.height;\n$.fn.height = function() {\n  return _ceilNumber(__origHeight.apply(this, arguments));\n};\n\nvar __origOuterHeight = $.fn.outerHeight;\n$.fn.outerHeight = function() {\n  return _ceilNumber(__origOuterHeight.apply(this, arguments));\n};\n\n/**\n * Sets the given 'text' as text to the jQuery element, using the text() function (i.e. HTML is encoded automatically).\n * If the text does not contain any non-space characters, the text '&nbsp;' is set instead (using the html() function).\n * If an 'emptyCssClass' is provided, this CSS class is removed in the former and added in the later case.\n */\n$.fn.textOrNbsp = function(text, emptyCssClass) {\n  return this.contentOrNbsp(false, text, emptyCssClass);\n};\n\n/**\n * Same as \"textOrNbsp\", but with html (caller is responsible for encoding).\n */\n$.fn.htmlOrNbsp = function(html, emptyCssClass) {\n  return this.contentOrNbsp(true, html, emptyCssClass);\n};\n\n/**\n * Renders the given content as plain-text or HTML depending on the given htmlEnabled flag.\n *\n * @param {boolean} htmlEnabled\n * @param {string} content\n * @param {string} emptyCssClass\n * @returns {$}\n */\n$.fn.contentOrNbsp = function(htmlEnabled, content, emptyCssClass) {\n  var func = htmlEnabled ? this.html : this.text;\n  if (strings.hasText(content)) {\n    func.call(this, content);\n    if (emptyCssClass) {\n      this.removeClass(emptyCssClass);\n    }\n  } else {\n    this.html('&nbsp;');\n    if (emptyCssClass) {\n      this.addClass(emptyCssClass);\n    }\n  }\n  return this;\n};\n\n/**\n * Like toggleClass(), this toggles a HTML attribute on a set of jquery elements.\n *\n * @param attr\n *          Name of the attribute to toggle.\n * @param state\n *          Specifies if the attribute should be added or removed (based on whether the argument is truthy or falsy).\n *          If this argument is not defined, the attribute is added when it exists, and vice-versa. If this behavior\n *          is not desired, explicitly cast the argument to a boolean using \"!!\".\n * @param value\n *          Value to use when adding the attribute.\n *          If this argument is not specified, 'attr' is used as value.\n */\n$.fn.toggleAttr = function(attr, state, value) {\n  if (!attr) {\n    return this;\n  }\n  if (value === undefined) {\n    value = attr;\n  }\n  return this.each(function() {\n    var $element = $(this);\n    if (state === undefined) {\n      // set state according to the current value\n      state = ($element.attr(attr) === undefined);\n    }\n    if (state) {\n      // set attr\n      $element.attr(attr, value);\n    } else {\n      // remove attr\n      $element.removeAttr(attr);\n    }\n  });\n};\n\n$.fn.backupSelection = function() {\n  var field = this[0];\n  if (field && field === this.activeElement(true)) {\n    return {\n      selectionStart: field.selectionStart,\n      selectionEnd: field.selectionEnd,\n      selectionDirection: field.selectionDirection\n    };\n  }\n  return null;\n};\n\n$.fn.restoreSelection = function(selection) {\n  var field = this[0];\n  if (field && field === this.activeElement(true) && selection) {\n    field.setSelectionRange(selection.selectionStart, selection.selectionEnd, selection.selectionDirection);\n  }\n  return this;\n};\n\n/**\n * If the given value is \"truthy\", it is set as attribute on the target. Otherwise, the attribute is removed.\n */\n$.fn.attrOrRemove = function(attributeName, value) {\n  if (value) {\n    this.attr(attributeName, value);\n  } else {\n    this.removeAttr(attributeName);\n  }\n  return this;\n};\n\n$.fn.appendAppLink = function(appLinkBean, func) {\n  return this.appendSpan().appLink(appLinkBean, func);\n};\n\n/**\n * @param appLinkBean\n *          Either\n *           - an AppLinkBean with both (1) a ref attribute which will be mapped to the\n *             data-ref attribute of the element and (2) a text attribute which will be\n *             set as the text of the element.\n *           - or just a ref, which will be mapped to the data-ref attribute of the\n *             element.\n * @param func\n *          Optional. Either\n *           - a function to be called when the app link has been clicked\n *           - or an object with a method named _onAppLinkAction (e.g. an instance of\n *             BeanField)\n *          If func is not set, the _onAppLinkAction of the inner most widget relative to\n *          this element (if any) will be called when the app link has been clicked.\n */\n$.fn.appLink = function(appLinkBean, func) {\n  if (!func) {\n    func = function(event) {\n      var widget = scout.widget(this);\n      if (widget && widget._onAppLinkAction) {\n        widget._onAppLinkAction(event);\n      }\n    }.bind(this);\n  } else if (typeof func === 'object' && func._onAppLinkAction) {\n    func = func._onAppLinkAction.bind(func);\n  }\n\n  this.addClass('app-link')\n    .attr('tabindex', '0')\n    .unfocusable()\n    .on('click', func);\n\n  if (typeof appLinkBean === 'string') {\n    this.attr('data-ref', appLinkBean);\n  } else {\n    this\n      .text(appLinkBean.name)\n      .attr('data-ref', appLinkBean.ref);\n  }\n  return this;\n};\n\n/**\n * Adds the class 'unfocusable' to current result set. The class is not used for styling purposes\n * but has a meaning to the FocusManager.\n */\n$.fn.unfocusable = function() {\n  return this.addClass('unfocusable');\n};\n\n/**\n * Select all text within an element, e.g. within a content editable div element.\n */\n$.fn.selectAllText = function() {\n  var range,\n    myDocument = this.document(true),\n    myWindow = this.window(true),\n    element = this[0];\n\n  if (!myDocument || !myDocument.body || !myWindow || !element) {\n    return this;\n  }\n\n  // CreateTextRange is only available in IE\n  // noinspection JSUnresolvedVariable\n  if (myDocument.body.createTextRange) {\n    range = myDocument.body.createTextRange();\n    range.moveToElementText(element);\n    range.select();\n    return this;\n  }\n\n  if (myWindow.getSelection) {\n    range = myDocument.createRange();\n    range.selectNodeContents(element);\n    myWindow.getSelection().removeAllRanges();\n    myWindow.getSelection().addRange(range);\n  }\n\n  return this;\n};\n\n$.fn._getClientAndScrollWidthRounded = function() {\n  var element = this[0];\n  var device = Device.get();\n  if (device.isInternetExplorer() || device.isEdge()) {\n    // IE and Edge seem to round up the scrollWidth. Therefore the clientWidth must be rounded up as well to have a valid comparison.\n    return {\n      clientWidth: Math.ceil(element.getBoundingClientRect().width) - this.cssBorderWidthX(), // getBoundingClientRect includes the border -> remove it again to have the clientWidth\n      scrollWidth: element.scrollWidth\n    };\n  }\n\n  return {\n    clientWidth: element.clientWidth,\n    scrollWidth: element.scrollWidth\n  };\n};\n\n$.fn._getClientAndScrollWidthReliable = function() {\n  var widths = this._getClientAndScrollWidthRounded();\n  if (!Device.get().isScrollWidthIncludingPadding()) {\n    // browser supports accurate client- and scroll widths.\n    return widths;\n  }\n  if (widths.scrollWidth > widths.clientWidth) {\n    // content is large enough so that the scroll-width is already larger than the client-width. Values are correct.\n    return widths;\n  }\n\n  var paddingRight = this.cssPaddingRight(),\n    oldStyle = this.attr('style');\n  if (paddingRight > 0) {\n    // Some browsers render text within the right-padding (even with overflow=hidden). This has an effect on the value of scrollWidth which may be wrong in these cases (scrollWidth == clientWidth but ellipsis is shown).\n    // Solution: temporary remove the padding and reduce the width by the padding-size to have the same space for the text but without padding.\n    this.css({\n      width: widths.clientWidth - paddingRight,\n      paddingRight: '0px'\n    });\n    widths = this._getClientAndScrollWidthRounded(); // read value again.\n    this.attrOrRemove('style', oldStyle);\n    if (widths.scrollWidth > widths.clientWidth) {\n      return widths;\n    }\n  }\n\n  // In some cases the browser returns the same values for clientWidth and scrollWidth,\n  // but will cut off the text nevertheless. At least in FF this seems to be a bug related\n  // to sub-pixel rendering. The text is \"slightly\" (0.2 pixels) larger than the clientWidth,\n  // but scrollWidth returns the same value.\n  // As a workaround, we do a second measurement of the uncut width before returning false.\n  var clientWidth = this[0].getBoundingClientRect().width;\n  this.css('width', 'auto');\n  this.css('max-width', 'none');\n  var scrollWidth = this[0].getBoundingClientRect().width;\n  this.attrOrRemove('style', oldStyle);\n  return {\n    clientWidth: clientWidth,\n    scrollWidth: scrollWidth\n  };\n};\n\n/**\n * Checks if content is truncated.\n */\n$.fn.isContentTruncated = function() {\n  var widths = this._getClientAndScrollWidthReliable();\n  if (widths.scrollWidth > widths.clientWidth) {\n    return true;\n  }\n};\n\n/**\n * This function is used to distinct between single and double clicks.\n * Instead of executing a handler immediately when the first click occurs,\n * we wait for a given timeout (or by default 300 ms) to check if it is followed by a second click.\n * This will delay the execution of a single click a bit, so you should use this function wisely.\n */\n$.fn.onSingleOrDoubleClick = function(singleClickFunc, doubleClickFunc, timeout) {\n  return this.each(function() {\n    var that = this,\n      numClicks = 0,\n      timeout = scout.nvl(timeout, 300);\n    $(this).on('click', function(event) {\n      numClicks++;\n      if (numClicks === 1) {\n        setTimeout(function() {\n          if (numClicks === 1) {\n            singleClickFunc.call(that, event);\n          } else {\n            doubleClickFunc.call(that, event);\n          }\n          numClicks = 0;\n        }, timeout);\n      }\n    });\n  });\n};\n\n$.fn.onPassive = function(eventType, handler) {\n  var options = events.passiveOptions();\n  this[0].addEventListener(eventType, handler, options);\n  return this;\n};\n\n$.fn.offPassive = function(eventType, handler) {\n  var options = events.passiveOptions();\n  this[0].removeEventListener(eventType, handler, options);\n  return this;\n};\n\n// ------------------------------------------------------------------\n\n$.fn.appendTable = function(cssClass) {\n  return this.appendElement('<table>', cssClass);\n};\n\n$.fn.appendColgroup = function(cssClass) {\n  return this.appendElement('<colgroup>', cssClass);\n};\n\n$.fn.appendCol = function(cssClass) {\n  return this.appendElement('<col>', cssClass);\n};\n\n$.fn.appendTr = function(cssClass) {\n  return this.appendElement('<tr>', cssClass);\n};\n\n$.fn.appendTd = function(cssClass, text) {\n  return this.appendElement('<td>', cssClass, text);\n};\n\n$.fn.appendTh = function(cssClass, text) {\n  return this.appendElement('<th>', cssClass, text);\n};\n\n$.fn.appendUl = function(cssClass) {\n  return this.appendElement('<ul>', cssClass);\n};\n\n$.fn.appendLi = function(cssClass, text) {\n  return this.appendElement('<li>', cssClass, text);\n};\n\n// === $.easing extensions ===\n\n$.extend($.easing, {\n  easeOutQuart: function(x) {\n    return 1 - Math.pow(1 - x, 4);\n  }\n});\n\n/**\n * jquery.binarytransport.js\n *\n * @description. jQuery ajax transport for making binary data type requests.\n * @version 1.0\n * @author Henry Algus <henryalgus@gmail.com>\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Henry Algus\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// use this transport for \"binary\" data type\n$.ajaxTransport('+binary', function(options, originalOptions, jqXHR) {\n  // check for conditions and support for blob / arraybuffer response type\n  if (window.FormData && ((options.dataType && (options.dataType === 'binary')) ||\n    (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) ||\n      (window.Blob && options.data instanceof Blob))))) {\n    return {\n      // create new XMLHttpRequest\n      send: function(headers, callback) {\n        // setup all variables\n        var xhr = new XMLHttpRequest(),\n          url = options.url,\n          type = options.type,\n          async = options.async || true,\n          // blob or arraybuffer. Default is blob\n          dataType = options.responseType || 'blob',\n          data = options.data || null,\n          username = options.username || null,\n          password = options.password || null;\n\n        xhr.addEventListener('load', function() {\n          var data = {};\n          data[options.dataType] = xhr.response;\n          // make callback and send data\n          callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\n        });\n\n        xhr.open(type, url, async, username, password);\n\n        // setup custom headers\n        for (var i in headers) { // NOSONAR\n          xhr.setRequestHeader(i, headers[i]);\n        }\n\n        // apply custom fields (if provided)\n        // noinspection JSUnresolvedVariable\n        if (options.xhrFields) {\n          for (var j in options.xhrFields) {\n            xhr[j] = options.xhrFields[j];\n          }\n        }\n\n        xhr.responseType = dataType;\n        xhr.send(data);\n      },\n      abort: function() {\n      }\n    };\n  }\n});\n\n// jquery's noGlobal is true with webpack so jquery does not expose $ by itself\nif (window.$ !== $) {\n  window.$ = $;\n}\n"]},"metadata":{},"sourceType":"module"}