{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { strings, tooltips, Widget } from '../index';\n\nvar SimpleTab = /*#__PURE__*/function (_Widget) {\n  _inherits(SimpleTab, _Widget);\n\n  var _super = _createSuper(SimpleTab);\n\n  function SimpleTab() {\n    var _this;\n\n    _classCallCheck(this, SimpleTab);\n\n    _this = _super.call(this); // optional\n\n    _this.view = null;\n    _this.title = null;\n    _this.subTitle = null;\n    _this.iconId = null;\n    _this.cssClass = null;\n    _this.closable = false;\n    _this.saveNeeded = false;\n    _this.saveNeededVisible = false;\n    _this.status = null;\n    _this.selected = false; // Order: $statusContainer, $iconContainer, $title, $subTitle\n    // - Status container needs to be the first element because it is \"float: right\".\n    // - Icon container is \"float: left\" , must be before title.\n\n    _this.$title = null;\n    _this.$subTitle = null;\n    _this.$iconContainer = null;\n    _this.$statusContainer = null;\n    _this._statusContainerUsageCounter = 0;\n    _this._statusIconDivs = [];\n    _this._viewPropertyChangeListener = _this._onViewPropertyChange.bind(_assertThisInitialized(_this));\n    _this._viewRemoveListener = _this._onViewRemove.bind(_assertThisInitialized(_this));\n\n    _this._glassPaneContribution = function (element) {\n      return this.$statusContainer;\n    }.bind(_assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  _createClass(SimpleTab, [{\n    key: \"_init\",\n    value: function _init(model) {\n      _get(_getPrototypeOf(SimpleTab.prototype), \"_init\", this).call(this, model);\n\n      this.view = model.view;\n      this.title = this.view ? this.view.title : model.title;\n      this.subTitle = this.view ? this.view.subTitle : model.subTitle;\n      this.iconId = this.view ? this.view.iconId : model.iconId;\n      this.cssClass = this.view ? this.view.cssClass : model.cssClass;\n      this.closable = this.view ? this.view.closable : model.closable;\n      this.saveNeeded = this.view ? this.view.saveNeeded : model.saveNeeded;\n      this.saveNeededVisible = this.view ? this.view.saveNeededVisible : model.saveNeededVisible;\n      this.status = this.view ? this.view.status : model.status;\n\n      if (this.view) {\n        this._installViewListeners();\n\n        this.view.addGlassPaneContribution(this._glassPaneContribution);\n      }\n    }\n  }, {\n    key: \"renderAfter\",\n    value: function renderAfter($parent, sibling) {\n      this.render($parent);\n\n      if (sibling) {\n        this.$container.insertAfter(sibling.$container);\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this.$container = this.$parent.prependDiv('simple-tab');\n      this.$container.on('mousedown', this._onMouseDown.bind(this));\n    }\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      _get(_getPrototypeOf(SimpleTab.prototype), \"_renderProperties\", this).call(this);\n\n      this._renderTitle();\n\n      this._renderSubTitle();\n\n      this._renderIconId();\n\n      this._renderCssClass();\n\n      this._renderClosable();\n\n      this._renderSaveNeeded();\n\n      this._renderStatus();\n\n      this._renderSelected();\n    }\n  }, {\n    key: \"_remove\",\n    value: function _remove() {\n      this._remove$Title();\n\n      this._remove$SubTitle();\n\n      this._remove$IconContainer();\n\n      this._remove$StatusContainer();\n\n      this.$close = null;\n\n      _get(_getPrototypeOf(SimpleTab.prototype), \"_remove\", this).call(this);\n    }\n  }, {\n    key: \"_getOrCreate$Title\",\n    value: function _getOrCreate$Title() {\n      if (this.$title) {\n        return this.$title;\n      }\n\n      this.$title = this.$container.makeDiv('title');\n      tooltips.installForEllipsis(this.$title, {\n        parent: this\n      });\n\n      if (this.$subTitle) {\n        this.$title.insertBefore(this.$subTitle);\n      } else if (this.$iconContainer) {\n        this.$title.insertAfter(this.$iconContainer);\n      } else if (this.$statusContainer) {\n        this.$title.insertAfter(this.$statusContainer);\n      } else {\n        this.$title.appendTo(this.$container);\n      }\n\n      return this.$title;\n    }\n  }, {\n    key: \"_getOrCreate$SubTitle\",\n    value: function _getOrCreate$SubTitle() {\n      if (this.$subTitle) {\n        return this.$subTitle;\n      }\n\n      this.$subTitle = this.$container.makeDiv('sub-title');\n      tooltips.installForEllipsis(this.$subTitle, {\n        parent: this\n      });\n\n      if (this.$title) {\n        this.$subTitle.insertAfter(this.$title);\n      } else if (this.$iconContainer) {\n        this.$subTitle.insertAfter(this.$iconContainer);\n      } else if (this.$statusContainer) {\n        this.$subTitle.insertAfter(this.$statusContainer);\n      } else {\n        this.$subTitle.appendTo(this.$container);\n      }\n\n      return this.$subTitle;\n    }\n  }, {\n    key: \"_getOrCreate$IconContainer\",\n    value: function _getOrCreate$IconContainer() {\n      if (this.$iconContainer) {\n        return this.$iconContainer;\n      }\n\n      this.$iconContainer = this.$container.makeDiv('icon-container');\n\n      if (this.$title) {\n        this.$iconContainer.insertBefore(this.$title);\n      } else if (this.$subTitle) {\n        this.$iconContainer.insertBefore(this.$subTitle);\n      } else if (this.$statusContainer) {\n        this.$iconContainer.insertAfter(this.$statusContainer);\n      } else {\n        this.$iconContainer.appendTo(this.$container);\n      }\n\n      return this.$iconContainer;\n    }\n  }, {\n    key: \"_getOrCreate$StatusContainer\",\n    value: function _getOrCreate$StatusContainer() {\n      if (this.$statusContainer) {\n        return this.$statusContainer;\n      } // Prepend because of \"float: right\"\n\n\n      this.$statusContainer = this.$container.prependDiv('status-container');\n      return this.$statusContainer;\n    }\n  }, {\n    key: \"_remove$Title\",\n    value: function _remove$Title() {\n      if (this.$title) {\n        tooltips.uninstall(this.$title);\n        this.$title.remove();\n        this.$title = null;\n      }\n    }\n  }, {\n    key: \"_remove$SubTitle\",\n    value: function _remove$SubTitle() {\n      if (this.$subTitle) {\n        tooltips.uninstall(this.$subTitle);\n        this.$subTitle.remove();\n        this.$subTitle = null;\n      }\n    }\n  }, {\n    key: \"_remove$IconContainer\",\n    value: function _remove$IconContainer() {\n      if (this.$iconContainer) {\n        this.$iconContainer.remove();\n        this.$iconContainer = null;\n      }\n    }\n  }, {\n    key: \"_remove$StatusContainer\",\n    value: function _remove$StatusContainer() {\n      if (this.$statusContainer) {\n        this.$statusContainer.remove();\n        this.$statusContainer = null;\n      }\n    }\n  }, {\n    key: \"setTitle\",\n    value: function setTitle(title) {\n      this.setProperty('title', title);\n    }\n  }, {\n    key: \"_renderTitle\",\n    value: function _renderTitle() {\n      if (this.title || this.subTitle) {\n        // $title is always needed if subtitle is not empty\n        this._getOrCreate$Title().textOrNbsp(this.title);\n      } else {\n        this._remove$Title();\n      }\n    }\n  }, {\n    key: \"setSubTitle\",\n    value: function setSubTitle(subTitle) {\n      this.setProperty('subTitle', subTitle);\n    }\n  }, {\n    key: \"_renderSubTitle\",\n    value: function _renderSubTitle() {\n      if (this.subTitle) {\n        if (!this.title) {\n          this._renderTitle();\n        }\n\n        this._getOrCreate$SubTitle().textOrNbsp(this.subTitle);\n      } else {\n        if (!this.title) {\n          this._renderTitle();\n        }\n\n        this._remove$SubTitle();\n      }\n    }\n  }, {\n    key: \"setIconId\",\n    value: function setIconId(iconId) {\n      this.setProperty('iconId', iconId);\n    }\n  }, {\n    key: \"_renderIconId\",\n    value: function _renderIconId(iconId) {\n      if (this.iconId) {\n        this._getOrCreate$IconContainer().icon(this.iconId);\n      } else {\n        this._remove$IconContainer();\n      }\n    }\n  }, {\n    key: \"setClosable\",\n    value: function setClosable(closable) {\n      this.setProperty('closable', closable);\n    }\n  }, {\n    key: \"_renderClosable\",\n    value: function _renderClosable() {\n      if (this.closable) {\n        if (this.$close) {\n          return;\n        }\n\n        this.$container.addClass('closable');\n        this.$close = this._getOrCreate$StatusContainer().appendDiv('status closer').on('click', this._onClose.bind(this));\n        this._statusContainerUsageCounter++;\n      } else {\n        if (!this.$close) {\n          return;\n        }\n\n        this.$container.removeClass('closable');\n        this.$close.remove();\n        this.$close = null;\n        this._statusContainerUsageCounter--;\n\n        if (this._statusContainerUsageCounter === 0) {\n          this._remove$StatusContainer();\n        }\n      }\n    }\n  }, {\n    key: \"setSaveNeededVisible\",\n    value: function setSaveNeededVisible(saveNeededVisible) {\n      if (this.saveNeededVisible === saveNeededVisible) {\n        return;\n      }\n\n      this._setProperty('saveNeededVisible', saveNeededVisible);\n\n      if (this.rendered) {\n        this._renderSaveNeeded();\n      }\n    }\n  }, {\n    key: \"setSaveNeeded\",\n    value: function setSaveNeeded(saveNeeded) {\n      if (this.saveNeeded === saveNeeded) {\n        return;\n      }\n\n      this._setProperty('saveNeeded', saveNeeded);\n\n      if (this.rendered) {\n        this._renderSaveNeeded();\n      }\n    }\n  }, {\n    key: \"_renderSaveNeeded\",\n    value: function _renderSaveNeeded() {\n      if (this.saveNeeded && this.saveNeededVisible) {\n        this.$container.addClass('save-needed');\n\n        if (this.$saveNeeded) {\n          return;\n        }\n\n        this.$saveNeeded = this._getOrCreate$StatusContainer().prependDiv('status save-needer');\n        this._statusContainerUsageCounter++;\n      } else {\n        if (!this.$saveNeeded) {\n          return;\n        }\n\n        this.$container.removeClass('save-needed');\n        this.$saveNeeded.remove();\n        this.$saveNeeded = null;\n        this._statusContainerUsageCounter--;\n\n        if (this._statusContainerUsageCounter === 0) {\n          this._remove$StatusContainer();\n        }\n      }\n    }\n  }, {\n    key: \"setStatus\",\n    value: function setStatus(status) {\n      this.setProperty('status', status);\n    }\n  }, {\n    key: \"_renderStatus\",\n    value: function _renderStatus() {\n      this._statusContainerUsageCounter -= this._statusIconDivs.length === 0 ? 0 : 1;\n\n      this._statusIconDivs.forEach(function ($statusIcon) {\n        $statusIcon.remove();\n      });\n\n      this._statusIconDivs = [];\n\n      if (this.status) {\n        this.status.asFlatList().forEach(function (status) {\n          if (!status || !status.iconId) {\n            return;\n          }\n\n          var $statusIcon = this._getOrCreate$StatusContainer().appendIcon(status.iconId, 'status');\n\n          if (status.cssClass()) {\n            $statusIcon.addClass(status.cssClass());\n          }\n\n          this._statusIconDivs.push($statusIcon);\n        }.bind(this));\n      }\n\n      this._statusContainerUsageCounter += this._statusIconDivs.length === 0 ? 0 : 1;\n\n      if (this._statusContainerUsageCounter === 0) {\n        this._remove$StatusContainer();\n      }\n    }\n  }, {\n    key: \"select\",\n    value: function select() {\n      this.setSelected(true);\n    }\n  }, {\n    key: \"deselect\",\n    value: function deselect() {\n      this.setSelected(false);\n    }\n  }, {\n    key: \"setSelected\",\n    value: function setSelected(selected) {\n      this.setProperty('selected', selected);\n    }\n  }, {\n    key: \"_renderSelected\",\n    value: function _renderSelected() {\n      this.$container.select(this.selected);\n    }\n  }, {\n    key: \"_onMouseDown\",\n    value: function _onMouseDown(event) {\n      this.trigger('click'); // When the tab is clicked the user wants to execute the action and not see the tooltip\n\n      if (this.$title) {\n        tooltips.cancel(this.$title);\n        tooltips.close(this.$title);\n      }\n\n      if (this.$subTitle) {\n        tooltips.cancel(this.$subTitle);\n        tooltips.close(this.$subTitle);\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"_onClose\",\n    value: function _onClose() {\n      if (this.view) {\n        this.view.abort();\n      }\n    }\n  }, {\n    key: \"getMenuText\",\n    value: function getMenuText() {\n      return strings.join(\" \\u2013 \", this.title, this.subTitle);\n    }\n  }, {\n    key: \"_installViewListeners\",\n    value: function _installViewListeners() {\n      this.view.on('propertyChange', this._viewPropertyChangeListener);\n      this.view.on('remove', this._viewRemoveListener);\n    }\n  }, {\n    key: \"_uninstallViewListeners\",\n    value: function _uninstallViewListeners() {\n      this.view.off('propertyChange', this._viewPropertyChangeListener);\n      this.view.off('remove', this._viewRemoveListener);\n    }\n  }, {\n    key: \"_onViewPropertyChange\",\n    value: function _onViewPropertyChange(event) {\n      if (event.propertyName === 'title') {\n        this.setTitle(this.view.title);\n      } else if (event.propertyName === 'subTitle') {\n        this.setSubTitle(this.view.subTitle);\n      } else if (event.propertyName === 'iconId') {\n        this.setIconId(this.view.iconId);\n      } else if (event.propertyName === 'cssClass') {\n        this.setCssClass(event.newValue);\n      } else if (event.propertyName === 'saveNeeded') {\n        this.setSaveNeeded(event.newValue);\n      } else if (event.propertyName === 'saveNeededVisible') {\n        this.setSaveNeededVisible(event.newValue);\n      } else if (event.propertyName === 'closable') {\n        this.setClosable(event.newValue);\n      } else if (event.propertyName === 'status') {\n        this.setStatus(event.newValue);\n      }\n    }\n    /**\n     * We cannot not bind the 'remove' event of the view to the remove function\n     * of the this tab, because in bench-mode the tab is never rendered\n     * and thus the _remove function is never called.\n     */\n\n  }, {\n    key: \"_onViewRemove\",\n    value: function _onViewRemove() {\n      this._uninstallViewListeners();\n\n      if (this.rendered) {\n        this.remove();\n      } else {\n        this.trigger('remove');\n      }\n    }\n  }]);\n\n  return SimpleTab;\n}(Widget);\n\nexport { SimpleTab as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/tabbox/SimpleTab.js"],"names":["strings","tooltips","Widget","SimpleTab","view","title","subTitle","iconId","cssClass","closable","saveNeeded","saveNeededVisible","status","selected","$title","$subTitle","$iconContainer","$statusContainer","_statusContainerUsageCounter","_statusIconDivs","_viewPropertyChangeListener","_onViewPropertyChange","bind","_viewRemoveListener","_onViewRemove","_glassPaneContribution","element","model","_installViewListeners","addGlassPaneContribution","$parent","sibling","render","$container","insertAfter","prependDiv","on","_onMouseDown","_renderTitle","_renderSubTitle","_renderIconId","_renderCssClass","_renderClosable","_renderSaveNeeded","_renderStatus","_renderSelected","_remove$Title","_remove$SubTitle","_remove$IconContainer","_remove$StatusContainer","$close","makeDiv","installForEllipsis","parent","insertBefore","appendTo","uninstall","remove","setProperty","_getOrCreate$Title","textOrNbsp","_getOrCreate$SubTitle","_getOrCreate$IconContainer","icon","addClass","_getOrCreate$StatusContainer","appendDiv","_onClose","removeClass","_setProperty","rendered","$saveNeeded","length","forEach","$statusIcon","asFlatList","appendIcon","push","setSelected","select","event","trigger","cancel","close","preventDefault","abort","join","off","propertyName","setTitle","setSubTitle","setIconId","setCssClass","newValue","setSaveNeeded","setSaveNeededVisible","setClosable","setStatus","_uninstallViewListeners"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {strings, tooltips, Widget} from '../index';\n\nexport default class SimpleTab extends Widget {\n\n  constructor() {\n    super();\n\n    // optional\n    this.view = null;\n\n    this.title = null;\n    this.subTitle = null;\n    this.iconId = null;\n    this.cssClass = null;\n    this.closable = false;\n    this.saveNeeded = false;\n    this.saveNeededVisible = false;\n    this.status = null;\n    this.selected = false;\n\n    // Order: $statusContainer, $iconContainer, $title, $subTitle\n    // - Status container needs to be the first element because it is \"float: right\".\n    // - Icon container is \"float: left\" , must be before title.\n    this.$title = null;\n    this.$subTitle = null;\n    this.$iconContainer = null;\n    this.$statusContainer = null;\n\n    this._statusContainerUsageCounter = 0;\n    this._statusIconDivs = [];\n\n    this._viewPropertyChangeListener = this._onViewPropertyChange.bind(this);\n    this._viewRemoveListener = this._onViewRemove.bind(this);\n    this._glassPaneContribution = function(element) {\n      return this.$statusContainer;\n    }.bind(this);\n  }\n\n  _init(model) {\n    super._init(model);\n\n    this.view = model.view;\n\n    this.title = (this.view ? this.view.title : model.title);\n    this.subTitle = (this.view ? this.view.subTitle : model.subTitle);\n    this.iconId = (this.view ? this.view.iconId : model.iconId);\n    this.cssClass = (this.view ? this.view.cssClass : model.cssClass);\n    this.closable = (this.view ? this.view.closable : model.closable);\n    this.saveNeeded = (this.view ? this.view.saveNeeded : model.saveNeeded);\n    this.saveNeededVisible = (this.view ? this.view.saveNeededVisible : model.saveNeededVisible);\n    this.status = (this.view ? this.view.status : model.status);\n\n    if (this.view) {\n      this._installViewListeners();\n      this.view.addGlassPaneContribution(this._glassPaneContribution);\n    }\n  }\n\n  renderAfter($parent, sibling) {\n    this.render($parent);\n    if (sibling) {\n      this.$container.insertAfter(sibling.$container);\n    }\n  }\n\n  _render() {\n    this.$container = this.$parent.prependDiv('simple-tab');\n    this.$container.on('mousedown', this._onMouseDown.bind(this));\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderTitle();\n    this._renderSubTitle();\n    this._renderIconId();\n    this._renderCssClass();\n    this._renderClosable();\n    this._renderSaveNeeded();\n    this._renderStatus();\n    this._renderSelected();\n  }\n\n  _remove() {\n    this._remove$Title();\n    this._remove$SubTitle();\n    this._remove$IconContainer();\n    this._remove$StatusContainer();\n    this.$close = null;\n    super._remove();\n  }\n\n  _getOrCreate$Title() {\n    if (this.$title) {\n      return this.$title;\n    }\n    this.$title = this.$container.makeDiv('title');\n    tooltips.installForEllipsis(this.$title, {\n      parent: this\n    });\n    if (this.$subTitle) {\n      this.$title.insertBefore(this.$subTitle);\n    } else if (this.$iconContainer) {\n      this.$title.insertAfter(this.$iconContainer);\n    } else if (this.$statusContainer) {\n      this.$title.insertAfter(this.$statusContainer);\n    } else {\n      this.$title.appendTo(this.$container);\n    }\n    return this.$title;\n  }\n\n  _getOrCreate$SubTitle() {\n    if (this.$subTitle) {\n      return this.$subTitle;\n    }\n    this.$subTitle = this.$container.makeDiv('sub-title');\n    tooltips.installForEllipsis(this.$subTitle, {\n      parent: this\n    });\n    if (this.$title) {\n      this.$subTitle.insertAfter(this.$title);\n    } else if (this.$iconContainer) {\n      this.$subTitle.insertAfter(this.$iconContainer);\n    } else if (this.$statusContainer) {\n      this.$subTitle.insertAfter(this.$statusContainer);\n    } else {\n      this.$subTitle.appendTo(this.$container);\n    }\n    return this.$subTitle;\n  }\n\n  _getOrCreate$IconContainer() {\n    if (this.$iconContainer) {\n      return this.$iconContainer;\n    }\n    this.$iconContainer = this.$container.makeDiv('icon-container');\n    if (this.$title) {\n      this.$iconContainer.insertBefore(this.$title);\n    } else if (this.$subTitle) {\n      this.$iconContainer.insertBefore(this.$subTitle);\n    } else if (this.$statusContainer) {\n      this.$iconContainer.insertAfter(this.$statusContainer);\n    } else {\n      this.$iconContainer.appendTo(this.$container);\n    }\n    return this.$iconContainer;\n  }\n\n  _getOrCreate$StatusContainer() {\n    if (this.$statusContainer) {\n      return this.$statusContainer;\n    }\n    // Prepend because of \"float: right\"\n    this.$statusContainer = this.$container.prependDiv('status-container');\n    return this.$statusContainer;\n  }\n\n  _remove$Title() {\n    if (this.$title) {\n      tooltips.uninstall(this.$title);\n      this.$title.remove();\n      this.$title = null;\n    }\n  }\n\n  _remove$SubTitle() {\n    if (this.$subTitle) {\n      tooltips.uninstall(this.$subTitle);\n      this.$subTitle.remove();\n      this.$subTitle = null;\n    }\n  }\n\n  _remove$IconContainer() {\n    if (this.$iconContainer) {\n      this.$iconContainer.remove();\n      this.$iconContainer = null;\n    }\n  }\n\n  _remove$StatusContainer() {\n    if (this.$statusContainer) {\n      this.$statusContainer.remove();\n      this.$statusContainer = null;\n    }\n  }\n\n  setTitle(title) {\n    this.setProperty('title', title);\n  }\n\n  _renderTitle() {\n    if (this.title || this.subTitle) { // $title is always needed if subtitle is not empty\n      this._getOrCreate$Title().textOrNbsp(this.title);\n    } else {\n      this._remove$Title();\n    }\n  }\n\n  setSubTitle(subTitle) {\n    this.setProperty('subTitle', subTitle);\n  }\n\n  _renderSubTitle() {\n    if (this.subTitle) {\n      if (!this.title) {\n        this._renderTitle();\n      }\n      this._getOrCreate$SubTitle().textOrNbsp(this.subTitle);\n    } else {\n      if (!this.title) {\n        this._renderTitle();\n      }\n      this._remove$SubTitle();\n    }\n  }\n\n  setIconId(iconId) {\n    this.setProperty('iconId', iconId);\n  }\n\n  _renderIconId(iconId) {\n    if (this.iconId) {\n      this._getOrCreate$IconContainer().icon(this.iconId);\n    } else {\n      this._remove$IconContainer();\n    }\n  }\n\n  setClosable(closable) {\n    this.setProperty('closable', closable);\n  }\n\n  _renderClosable() {\n    if (this.closable) {\n      if (this.$close) {\n        return;\n      }\n      this.$container.addClass('closable');\n      this.$close = this._getOrCreate$StatusContainer().appendDiv('status closer')\n        .on('click', this._onClose.bind(this));\n      this._statusContainerUsageCounter++;\n    } else {\n      if (!this.$close) {\n        return;\n      }\n      this.$container.removeClass('closable');\n      this.$close.remove();\n      this.$close = null;\n      this._statusContainerUsageCounter--;\n      if (this._statusContainerUsageCounter === 0) {\n        this._remove$StatusContainer();\n      }\n    }\n  }\n\n  setSaveNeededVisible(saveNeededVisible) {\n    if (this.saveNeededVisible === saveNeededVisible) {\n      return;\n    }\n    this._setProperty('saveNeededVisible', saveNeededVisible);\n    if (this.rendered) {\n      this._renderSaveNeeded();\n    }\n  }\n\n  setSaveNeeded(saveNeeded) {\n    if (this.saveNeeded === saveNeeded) {\n      return;\n    }\n    this._setProperty('saveNeeded', saveNeeded);\n    if (this.rendered) {\n      this._renderSaveNeeded();\n    }\n  }\n\n  _renderSaveNeeded() {\n    if (this.saveNeeded && this.saveNeededVisible) {\n      this.$container.addClass('save-needed');\n      if (this.$saveNeeded) {\n        return;\n      }\n      this.$saveNeeded = this._getOrCreate$StatusContainer().prependDiv('status save-needer');\n      this._statusContainerUsageCounter++;\n    } else {\n      if (!this.$saveNeeded) {\n        return;\n      }\n      this.$container.removeClass('save-needed');\n      this.$saveNeeded.remove();\n      this.$saveNeeded = null;\n      this._statusContainerUsageCounter--;\n      if (this._statusContainerUsageCounter === 0) {\n        this._remove$StatusContainer();\n      }\n    }\n  }\n\n  setStatus(status) {\n    this.setProperty('status', status);\n  }\n\n  _renderStatus() {\n    this._statusContainerUsageCounter -= (this._statusIconDivs.length === 0 ? 0 : 1);\n\n    this._statusIconDivs.forEach(function($statusIcon) {\n      $statusIcon.remove();\n    });\n    this._statusIconDivs = [];\n\n    if (this.status) {\n      this.status.asFlatList().forEach(function(status) {\n        if (!status || !status.iconId) {\n          return;\n        }\n        var $statusIcon = this._getOrCreate$StatusContainer().appendIcon(status.iconId, 'status');\n        if (status.cssClass()) {\n          $statusIcon.addClass(status.cssClass());\n        }\n        this._statusIconDivs.push($statusIcon);\n      }.bind(this));\n    }\n\n    this._statusContainerUsageCounter += (this._statusIconDivs.length === 0 ? 0 : 1);\n    if (this._statusContainerUsageCounter === 0) {\n      this._remove$StatusContainer();\n    }\n  }\n\n  select() {\n    this.setSelected(true);\n  }\n\n  deselect() {\n    this.setSelected(false);\n  }\n\n  setSelected(selected) {\n    this.setProperty('selected', selected);\n  }\n\n  _renderSelected() {\n    this.$container.select(this.selected);\n  }\n\n  _onMouseDown(event) {\n    this.trigger('click');\n\n    // When the tab is clicked the user wants to execute the action and not see the tooltip\n    if (this.$title) {\n      tooltips.cancel(this.$title);\n      tooltips.close(this.$title);\n    }\n    if (this.$subTitle) {\n      tooltips.cancel(this.$subTitle);\n      tooltips.close(this.$subTitle);\n    }\n    event.preventDefault();\n  }\n\n  _onClose() {\n    if (this.view) {\n      this.view.abort();\n    }\n  }\n\n  getMenuText() {\n    return strings.join(' \\u2013 ', this.title, this.subTitle);\n  }\n\n  _installViewListeners() {\n    this.view.on('propertyChange', this._viewPropertyChangeListener);\n    this.view.on('remove', this._viewRemoveListener);\n  }\n\n  _uninstallViewListeners() {\n    this.view.off('propertyChange', this._viewPropertyChangeListener);\n    this.view.off('remove', this._viewRemoveListener);\n  }\n\n  _onViewPropertyChange(event) {\n    if (event.propertyName === 'title') {\n      this.setTitle(this.view.title);\n    } else if (event.propertyName === 'subTitle') {\n      this.setSubTitle(this.view.subTitle);\n    } else if (event.propertyName === 'iconId') {\n      this.setIconId(this.view.iconId);\n    } else if (event.propertyName === 'cssClass') {\n      this.setCssClass(event.newValue);\n    } else if (event.propertyName === 'saveNeeded') {\n      this.setSaveNeeded(event.newValue);\n    } else if (event.propertyName === 'saveNeededVisible') {\n      this.setSaveNeededVisible(event.newValue);\n    } else if (event.propertyName === 'closable') {\n      this.setClosable(event.newValue);\n    } else if (event.propertyName === 'status') {\n      this.setStatus(event.newValue);\n    }\n  }\n\n  /**\n   * We cannot not bind the 'remove' event of the view to the remove function\n   * of the this tab, because in bench-mode the tab is never rendered\n   * and thus the _remove function is never called.\n   */\n  _onViewRemove() {\n    this._uninstallViewListeners();\n    if (this.rendered) {\n      this.remove();\n    } else {\n      this.trigger('remove');\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}