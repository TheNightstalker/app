{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { InputFieldKeyStrokeContext, keys, keyStrokeModifier, Outline, scout, SearchOutlineLayout } from '../../index';\nimport $ from 'jquery';\n\nvar SearchOutline = /*#__PURE__*/function (_Outline) {\n  _inherits(SearchOutline, _Outline);\n\n  var _super = _createSuper(SearchOutline);\n\n  function SearchOutline() {\n    var _this;\n\n    _classCallCheck(this, SearchOutline);\n\n    _this = _super.call(this);\n    _this.hasText = false;\n    _this.$searchPanel = null;\n    _this.$clearIcon = null;\n    _this.$searchStatus = null;\n    _this.$queryField = null;\n    return _this;\n  }\n  /**\n   * @override Tree.js\n   */\n\n\n  _createClass(SearchOutline, [{\n    key: \"_initKeyStrokeContext\",\n    value: function _initKeyStrokeContext() {\n      _get(_getPrototypeOf(SearchOutline.prototype), \"_initKeyStrokeContext\", this).call(this);\n\n      this.searchFieldKeyStrokeContext = this._createKeyStrokeContextForSearchField();\n    }\n  }, {\n    key: \"_createKeyStrokeContextForSearchField\",\n    value: function _createKeyStrokeContextForSearchField() {\n      var keyStrokeContext = new InputFieldKeyStrokeContext();\n\n      keyStrokeContext.$scopeTarget = function () {\n        return this.$searchPanel;\n      }.bind(this);\n\n      keyStrokeContext.$bindTarget = function () {\n        return this.$queryField;\n      }.bind(this);\n\n      keyStrokeContext.registerStopPropagationKeys(keyStrokeModifier.NONE, [keys.ENTER, keys.BACKSPACE]);\n      return keyStrokeContext;\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      _get(_getPrototypeOf(SearchOutline.prototype), \"_render\", this).call(this); // Override layout\n\n\n      this.htmlComp.setLayout(new SearchOutlineLayout(this));\n      this.$container.addClass('search-outline');\n      this.$searchPanel = this.$container.prependDiv('search-outline-panel');\n      this.$queryField = this.$searchPanel.appendElement('<input>', 'search-outline-field').on('input', this._createOnQueryFieldInputFunction().bind(this)).on('keypress', this._onQueryFieldKeyPress.bind(this));\n      this.$clearIcon = this.$searchPanel.appendSpan('clear-icon unfocusable needsclick').on('mousedown', this._onClearIconMouseDown.bind(this));\n      this.$searchStatus = this.$searchPanel.appendDiv('search-outline-status').on('mousedown', this._onTitleMouseDown.bind(this));\n      this.session.keyStrokeManager.installKeyStrokeContext(this.searchFieldKeyStrokeContext);\n    }\n  }, {\n    key: \"_remove\",\n    value: function _remove() {\n      this.session.keyStrokeManager.uninstallKeyStrokeContext(this.searchFieldKeyStrokeContext);\n      this.$searchPanel.remove();\n\n      _get(_getPrototypeOf(SearchOutline.prototype), \"_remove\", this).call(this);\n    }\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      _get(_getPrototypeOf(SearchOutline.prototype), \"_renderProperties\", this).call(this);\n\n      this._renderSearchQuery();\n\n      this._renderSearchStatus();\n\n      this._updateHasText();\n    }\n  }, {\n    key: \"_renderTitle\",\n    value: function _renderTitle() {\n      _get(_getPrototypeOf(SearchOutline.prototype), \"_renderTitle\", this).call(this); // Move before search panel\n\n\n      if (this.titleVisible) {\n        this.$title.insertBefore(this.$searchPanel);\n      }\n    }\n  }, {\n    key: \"_renderSearchQuery\",\n    value: function _renderSearchQuery() {\n      this.$queryField.val(this.searchQuery);\n    }\n  }, {\n    key: \"_renderSearchStatus\",\n    value: function _renderSearchStatus() {\n      var animate = this.rendered;\n\n      if (this.searchStatus && !this.$searchStatus.isVisible()) {\n        if (animate) {\n          this.$searchStatus.slideDown({\n            duration: 200,\n            progress: this.revalidateLayout.bind(this)\n          });\n        } else {\n          this.$searchStatus.show();\n        }\n      } else if (!this.searchStatus && this.$searchStatus.isVisible()) {\n        if (animate) {\n          this.$searchStatus.slideUp({\n            duration: 200,\n            progress: this.revalidateLayout.bind(this)\n          });\n        } else {\n          this.$searchStatus.hide();\n        }\n      }\n\n      this.$searchStatus.textOrNbsp(this.searchStatus);\n      this.$searchPanel.toggleClass('has-status', !!this.searchStatus);\n    }\n  }, {\n    key: \"focusQueryField\",\n    value: function focusQueryField() {\n      this.validateFocus();\n    }\n  }, {\n    key: \"_triggerSearch\",\n    value: function _triggerSearch() {\n      this.trigger('search', {\n        query: scout.nvl(this.searchQuery, '')\n      });\n    }\n  }, {\n    key: \"_createOnQueryFieldInputFunction\",\n    value: function _createOnQueryFieldInputFunction(event) {\n      var debounceFunction = $.debounce(this._search.bind(this));\n\n      var fn = function fn(event) {\n        this._updateHasText(); // debounced search\n\n\n        debounceFunction();\n      };\n\n      return fn;\n    }\n  }, {\n    key: \"_onClearIconMouseDown\",\n    value: function _onClearIconMouseDown(event) {\n      this.$queryField.val('');\n\n      this._updateHasText();\n\n      this._search(); // focus field if x is pressed when the field does not have the focus\n\n\n      this.$queryField.focus(); // stay in field when x is pressed\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"_onQueryFieldKeyPress\",\n    value: function _onQueryFieldKeyPress(event) {\n      if (event.which === keys.ENTER) {\n        this._setSearchQuery(this.$queryField.val());\n\n        this._triggerSearch();\n      }\n    }\n  }, {\n    key: \"_search\",\n    value: function _search(event) {\n      // Don't send query if value did not change (may happen when _createOnQueryFieldInputFunction is executed after _onQueryFieldKeyPress)\n      var searchQuery = this.$queryField.val();\n\n      if (this.searchQuery !== searchQuery) {\n        // Store locally so that the value persists when changing the outline without performing the search\n        this._setSearchQuery(searchQuery);\n\n        this._triggerSearch();\n      }\n    }\n  }, {\n    key: \"_setSearchQuery\",\n    value: function _setSearchQuery(searchQuery) {\n      this.searchQuery = searchQuery;\n    }\n  }, {\n    key: \"_updateHasText\",\n    value: function _updateHasText() {\n      this.$queryField.toggleClass('has-text', !!this.$queryField.val());\n    }\n    /**\n     * Focus and select content AFTER the search outline was rendered (and therefore the query field filled).\n     *\n     * @override Outline.js\n     */\n\n  }, {\n    key: \"validateFocus\",\n    value: function validateFocus() {\n      if (!this.rendered) {\n        return;\n      }\n\n      var elementToFocus = this.$queryField[0];\n\n      if (this.session.focusManager.requestFocus(elementToFocus)) {\n        elementToFocus.select();\n      }\n    }\n  }]);\n\n  return SearchOutline;\n}(Outline);\n\nexport { SearchOutline as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/desktop/outline/SearchOutline.js"],"names":["InputFieldKeyStrokeContext","keys","keyStrokeModifier","Outline","scout","SearchOutlineLayout","$","SearchOutline","hasText","$searchPanel","$clearIcon","$searchStatus","$queryField","searchFieldKeyStrokeContext","_createKeyStrokeContextForSearchField","keyStrokeContext","$scopeTarget","bind","$bindTarget","registerStopPropagationKeys","NONE","ENTER","BACKSPACE","htmlComp","setLayout","$container","addClass","prependDiv","appendElement","on","_createOnQueryFieldInputFunction","_onQueryFieldKeyPress","appendSpan","_onClearIconMouseDown","appendDiv","_onTitleMouseDown","session","keyStrokeManager","installKeyStrokeContext","uninstallKeyStrokeContext","remove","_renderSearchQuery","_renderSearchStatus","_updateHasText","titleVisible","$title","insertBefore","val","searchQuery","animate","rendered","searchStatus","isVisible","slideDown","duration","progress","revalidateLayout","show","slideUp","hide","textOrNbsp","toggleClass","validateFocus","trigger","query","nvl","event","debounceFunction","debounce","_search","fn","focus","preventDefault","which","_setSearchQuery","_triggerSearch","elementToFocus","focusManager","requestFocus","select"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {InputFieldKeyStrokeContext, keys, keyStrokeModifier, Outline, scout, SearchOutlineLayout} from '../../index';\nimport $ from 'jquery';\n\nexport default class SearchOutline extends Outline {\n\n  constructor() {\n    super();\n    this.hasText = false;\n    this.$searchPanel = null;\n    this.$clearIcon = null;\n    this.$searchStatus = null;\n    this.$queryField = null;\n  }\n\n  /**\n   * @override Tree.js\n   */\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n\n    this.searchFieldKeyStrokeContext = this._createKeyStrokeContextForSearchField();\n  }\n\n  _createKeyStrokeContextForSearchField() {\n    var keyStrokeContext = new InputFieldKeyStrokeContext();\n    keyStrokeContext.$scopeTarget = function() {\n      return this.$searchPanel;\n    }.bind(this);\n    keyStrokeContext.$bindTarget = function() {\n      return this.$queryField;\n    }.bind(this);\n    keyStrokeContext.registerStopPropagationKeys(keyStrokeModifier.NONE, [\n      keys.ENTER, keys.BACKSPACE\n    ]);\n    return keyStrokeContext;\n  }\n\n  _render() {\n    super._render();\n\n    // Override layout\n    this.htmlComp.setLayout(new SearchOutlineLayout(this));\n\n    this.$container.addClass('search-outline');\n    this.$searchPanel = this.$container.prependDiv('search-outline-panel');\n    this.$queryField = this.$searchPanel.appendElement('<input>', 'search-outline-field')\n      .on('input', this._createOnQueryFieldInputFunction().bind(this))\n      .on('keypress', this._onQueryFieldKeyPress.bind(this));\n    this.$clearIcon = this.$searchPanel.appendSpan('clear-icon unfocusable needsclick')\n      .on('mousedown', this._onClearIconMouseDown.bind(this));\n\n    this.$searchStatus = this.$searchPanel.appendDiv('search-outline-status')\n      .on('mousedown', this._onTitleMouseDown.bind(this));\n    this.session.keyStrokeManager.installKeyStrokeContext(this.searchFieldKeyStrokeContext);\n  }\n\n  _remove() {\n    this.session.keyStrokeManager.uninstallKeyStrokeContext(this.searchFieldKeyStrokeContext);\n    this.$searchPanel.remove();\n    super._remove();\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderSearchQuery();\n    this._renderSearchStatus();\n    this._updateHasText();\n  }\n\n  _renderTitle() {\n    super._renderTitle();\n    // Move before search panel\n    if (this.titleVisible) {\n      this.$title.insertBefore(this.$searchPanel);\n    }\n  }\n\n  _renderSearchQuery() {\n    this.$queryField.val(this.searchQuery);\n  }\n\n  _renderSearchStatus() {\n    var animate = this.rendered;\n\n    if (this.searchStatus && !this.$searchStatus.isVisible()) {\n      if (animate) {\n        this.$searchStatus.slideDown({\n          duration: 200,\n          progress: this.revalidateLayout.bind(this)\n        });\n      } else {\n        this.$searchStatus.show();\n      }\n    } else if (!this.searchStatus && this.$searchStatus.isVisible()) {\n      if (animate) {\n        this.$searchStatus.slideUp({\n          duration: 200,\n          progress: this.revalidateLayout.bind(this)\n        });\n      } else {\n        this.$searchStatus.hide();\n      }\n    }\n    this.$searchStatus.textOrNbsp(this.searchStatus);\n    this.$searchPanel.toggleClass('has-status', !!this.searchStatus);\n  }\n\n  focusQueryField() {\n    this.validateFocus();\n  }\n\n  _triggerSearch() {\n    this.trigger('search', {\n      query: scout.nvl(this.searchQuery, '')\n    });\n  }\n\n  _createOnQueryFieldInputFunction(event) {\n    var debounceFunction = $.debounce(this._search.bind(this));\n    var fn = function(event) {\n      this._updateHasText();\n      // debounced search\n      debounceFunction();\n    };\n    return fn;\n  }\n\n  _onClearIconMouseDown(event) {\n    this.$queryField.val('');\n    this._updateHasText();\n    this._search();\n    // focus field if x is pressed when the field does not have the focus\n    this.$queryField.focus();\n    // stay in field when x is pressed\n    event.preventDefault();\n  }\n\n  _onQueryFieldKeyPress(event) {\n    if (event.which === keys.ENTER) {\n      this._setSearchQuery(this.$queryField.val());\n      this._triggerSearch();\n    }\n  }\n\n  _search(event) {\n    // Don't send query if value did not change (may happen when _createOnQueryFieldInputFunction is executed after _onQueryFieldKeyPress)\n    var searchQuery = this.$queryField.val();\n    if (this.searchQuery !== searchQuery) {\n      // Store locally so that the value persists when changing the outline without performing the search\n      this._setSearchQuery(searchQuery);\n      this._triggerSearch();\n    }\n  }\n\n  _setSearchQuery(searchQuery) {\n    this.searchQuery = searchQuery;\n  }\n\n  _updateHasText() {\n    this.$queryField.toggleClass('has-text', !!this.$queryField.val());\n  }\n\n  /**\n   * Focus and select content AFTER the search outline was rendered (and therefore the query field filled).\n   *\n   * @override Outline.js\n   */\n  validateFocus() {\n    if (!this.rendered) {\n      return;\n    }\n    var elementToFocus = this.$queryField[0];\n    if (this.session.focusManager.requestFocus(elementToFocus)) {\n      elementToFocus.select();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}