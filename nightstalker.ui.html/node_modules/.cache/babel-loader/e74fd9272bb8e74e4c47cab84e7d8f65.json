{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { Key, keys, KeyStroke, scout } from '../../index';\nimport $ from 'jquery';\n/**\n * Keystroke to move the cursor into field field to table footer.\n *\n * Hint: This keystroke is not implemented as RangeKeyStroke.js because:\n *       a) the accepted keys are not rendered on F1, but a condensed 'a-z' instead;\n *       b) there is no need to evaluate a concrete key's propagation status when being rendered (because of (a))\n *\n */\n\nvar TableFocusFilterFieldKeyStroke = /*#__PURE__*/function (_KeyStroke) {\n  _inherits(TableFocusFilterFieldKeyStroke, _KeyStroke);\n\n  var _super = _createSuper(TableFocusFilterFieldKeyStroke);\n\n  function TableFocusFilterFieldKeyStroke(table) {\n    var _this;\n\n    _classCallCheck(this, TableFocusFilterFieldKeyStroke);\n\n    _this = _super.call(this);\n    _this.field = table;\n\n    _this.renderingHints.$drawingArea = function ($drawingArea, event) {\n      return event._$filterInput;\n    };\n\n    _this.virtualKeyStrokeWhich = 'a-Z;a-z;0-9';\n    _this.preventDefault = false; // false so that the key is inserted into the search field.\n\n    _this.keyStrokeMode = KeyStroke.Mode.DOWN;\n    return _this;\n  }\n  /**\n   * @override KeyStroke.js\n   */\n\n\n  _createClass(TableFocusFilterFieldKeyStroke, [{\n    key: \"_accept\",\n    value: function _accept(event) {\n      if (!this._isKeyStrokeInRange(event)) {\n        return false;\n      }\n\n      var $filterInput = $('.table-text-filter', this.field.$container);\n\n      if (!$filterInput.length) {\n        return false;\n      }\n\n      var activeElement = this.field.$container.activeElement(true),\n          activeElementType = activeElement.tagName.toLowerCase(),\n          focusOnInputField = activeElementType === 'textarea' || activeElementType === 'input';\n\n      if (activeElement.className !== 'table-text-filter' || !focusOnInputField) {\n        event._$filterInput = $filterInput;\n\n        this._isKeyStrokeInRange(event);\n\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * @override KeyStroke.js\n     */\n\n  }, {\n    key: \"handle\",\n    value: function handle(event) {\n      var $filterInput = event._$filterInput; // Focus the field and move cursor to the end.\n\n      if (this.field.session.focusManager.requestFocus($filterInput)) {\n        $filterInput.focus();\n        var length = scout.nvl($filterInput.val(), '').length;\n        $filterInput[0].setSelectionRange(length, length);\n      }\n    }\n    /**\n     * Returns a virtual key to represent this keystroke.\n     */\n\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      return [new Key(this, this.virtualKeyStrokeWhich)];\n    }\n    /**\n     * @override KeyStroke.js\n     */\n\n  }, {\n    key: \"renderKeyBox\",\n    value: function renderKeyBox($drawingArea, event) {\n      var $filterInput = event._$filterInput;\n      var filterInputPosition = $filterInput.position();\n      var left = filterInputPosition.left + $filterInput.cssMarginLeft() + 4;\n      $filterInput.beforeDiv('key-box char', 'a - z').toggleClass('disabled', !this.enabledByFilter).cssLeft(left);\n      return $filterInput.parent();\n    }\n  }, {\n    key: \"_isKeyStrokeInRange\",\n    value: function _isKeyStrokeInRange(event) {\n      if (event.which === this.virtualKeyStrokeWhich) {\n        return true; // the event has this keystroke's 'virtual which part' in case it is rendered.\n      }\n\n      if (event.altKey | event.ctrlKey) {\n        // NOSONAR\n        return false;\n      }\n\n      return event.which >= keys.a && event.which <= keys.z || event.which >= keys.A && event.which <= keys.Z || event.which >= keys['0'] && event.which <= keys['9'] || event.which >= keys.NUMPAD_0 && event.which <= keys.NUMPAD_9;\n    }\n  }]);\n\n  return TableFocusFilterFieldKeyStroke;\n}(KeyStroke);\n\nexport { TableFocusFilterFieldKeyStroke as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/table/keystrokes/TableFocusFilterFieldKeyStroke.js"],"names":["Key","keys","KeyStroke","scout","$","TableFocusFilterFieldKeyStroke","table","field","renderingHints","$drawingArea","event","_$filterInput","virtualKeyStrokeWhich","preventDefault","keyStrokeMode","Mode","DOWN","_isKeyStrokeInRange","$filterInput","$container","length","activeElement","activeElementType","tagName","toLowerCase","focusOnInputField","className","session","focusManager","requestFocus","focus","nvl","val","setSelectionRange","filterInputPosition","position","left","cssMarginLeft","beforeDiv","toggleClass","enabledByFilter","cssLeft","parent","which","altKey","ctrlKey","a","z","A","Z","NUMPAD_0","NUMPAD_9"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {Key, keys, KeyStroke, scout} from '../../index';\nimport $ from 'jquery';\n\n/**\n * Keystroke to move the cursor into field field to table footer.\n *\n * Hint: This keystroke is not implemented as RangeKeyStroke.js because:\n *       a) the accepted keys are not rendered on F1, but a condensed 'a-z' instead;\n *       b) there is no need to evaluate a concrete key's propagation status when being rendered (because of (a))\n *\n */\nexport default class TableFocusFilterFieldKeyStroke extends KeyStroke {\n\n  constructor(table) {\n    super();\n    this.field = table;\n\n    this.renderingHints.$drawingArea = function($drawingArea, event) {\n      return event._$filterInput;\n    };\n\n    this.virtualKeyStrokeWhich = 'a-Z;a-z;0-9';\n    this.preventDefault = false; // false so that the key is inserted into the search field.\n    this.keyStrokeMode = KeyStroke.Mode.DOWN;\n  }\n\n  /**\n   * @override KeyStroke.js\n   */\n  _accept(event) {\n    if (!this._isKeyStrokeInRange(event)) {\n      return false;\n    }\n\n    var $filterInput = $('.table-text-filter', this.field.$container);\n    if (!$filterInput.length) {\n      return false;\n    }\n\n    var activeElement = this.field.$container.activeElement(true),\n      activeElementType = activeElement.tagName.toLowerCase(),\n      focusOnInputField = (activeElementType === 'textarea' || activeElementType === 'input');\n    if (activeElement.className !== 'table-text-filter' || !focusOnInputField) {\n      event._$filterInput = $filterInput;\n      this._isKeyStrokeInRange(event);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @override KeyStroke.js\n   */\n  handle(event) {\n    var $filterInput = event._$filterInput;\n\n    // Focus the field and move cursor to the end.\n    if (this.field.session.focusManager.requestFocus($filterInput)) {\n      $filterInput.focus();\n\n      var length = scout.nvl($filterInput.val(), '').length;\n      $filterInput[0].setSelectionRange(length, length);\n    }\n  }\n\n  /**\n   * Returns a virtual key to represent this keystroke.\n   */\n  keys() {\n    return [new Key(this, this.virtualKeyStrokeWhich)];\n  }\n\n  /**\n   * @override KeyStroke.js\n   */\n  renderKeyBox($drawingArea, event) {\n    var $filterInput = event._$filterInput;\n    var filterInputPosition = $filterInput.position();\n    var left = filterInputPosition.left + $filterInput.cssMarginLeft() + 4;\n    $filterInput.beforeDiv('key-box char', 'a - z')\n      .toggleClass('disabled', !this.enabledByFilter)\n      .cssLeft(left);\n    return $filterInput.parent();\n  }\n\n  _isKeyStrokeInRange(event) {\n    if (event.which === this.virtualKeyStrokeWhich) {\n      return true; // the event has this keystroke's 'virtual which part' in case it is rendered.\n    }\n\n    if (event.altKey | event.ctrlKey) { // NOSONAR\n      return false;\n    }\n    return (event.which >= keys.a && event.which <= keys.z) ||\n      (event.which >= keys.A && event.which <= keys.Z) ||\n      (event.which >= keys['0'] && event.which <= keys['9']) ||\n      (event.which >= keys.NUMPAD_0 && event.which <= keys.NUMPAD_9);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}