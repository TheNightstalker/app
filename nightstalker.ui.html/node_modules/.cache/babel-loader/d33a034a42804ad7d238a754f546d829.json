{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, CompositeField, FormField, HtmlComponent, scout, SingleLayout, TabArea, TabBoxLayout } from '../../../index';\nimport $ from 'jquery';\n/**\n * Tab-area = where the 1-n tabs are placed (may have multiple runs = lines).\n * Tab-content = where the content of a single tab is displayed.\n */\n\nvar TabBox = /*#__PURE__*/function (_CompositeField) {\n  _inherits(TabBox, _CompositeField);\n\n  var _super = _createSuper(TabBox);\n\n  function TabBox() {\n    var _this;\n\n    _classCallCheck(this, TabBox);\n\n    _this = _super.call(this);\n    _this.gridDataHints.useUiHeight = true;\n    _this.gridDataHints.w = FormField.FULL_WIDTH;\n    _this.menusVisible = false; // TabBox shows its menus in the tab box header -> don't draw an ellipsis status icon\n\n    _this.selectedTab = null;\n    _this.tabItems = [];\n    _this.tabAreaStyle = TabArea.DisplayStyle.DEFAULT;\n\n    _this._addWidgetProperties(['tabItems', 'selectedTab']);\n\n    _this._addPreserveOnPropertyChangeProperties(['selectedTab']);\n\n    _this._$tabContent = null;\n    _this._tabBoxHeaderPropertyChangeHander = _this._onTabBoxHeaderPropertyChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @override FormField.js\n   */\n\n\n  _createClass(TabBox, [{\n    key: \"_init\",\n    value: function _init(model) {\n      _get(_getPrototypeOf(TabBox.prototype), \"_init\", this).call(this, model);\n\n      this.header = scout.create('TabBoxHeader', {\n        parent: this,\n        tabBox: this\n      });\n\n      this._initProperties(model);\n\n      this.header.on('propertyChange', this._tabBoxHeaderPropertyChangeHander);\n    }\n  }, {\n    key: \"_initProperties\",\n    value: function _initProperties(model) {\n      this._setTabItems(this.tabItems);\n\n      this._setSelectedTab(this.selectedTab);\n\n      this._setTabAreaStyle(this.tabAreaStyle);\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      _get(_getPrototypeOf(TabBox.prototype), \"_destroy\", this).call(this);\n\n      this.header.off('propertyChange', this._tabBoxHeaderPropertyChangeHander);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this.addContainer(this.$parent, 'tab-box', new TabBoxLayout(this));\n      this.header.render(this.$container);\n      this.addStatus();\n      this._$tabContent = this.$container.appendDiv('tab-content');\n      var htmlCompContent = HtmlComponent.install(this._$tabContent, this.session);\n      htmlCompContent.setLayout(new SingleLayout());\n    }\n    /**\n     * @override FormField.js\n     */\n\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      _get(_getPrototypeOf(TabBox.prototype), \"_renderProperties\", this).call(this);\n\n      this._renderSelectedTab();\n    }\n    /**\n     * @override FormField.js\n     */\n\n  }, {\n    key: \"_remove\",\n    value: function _remove() {\n      _get(_getPrototypeOf(TabBox.prototype), \"_remove\", this).call(this);\n\n      this._removeSelectedTab();\n    }\n  }, {\n    key: \"_getCurrentMenus\",\n    value: function _getCurrentMenus() {\n      // handled by the menubar\n      return [];\n    }\n  }, {\n    key: \"_removeMenus\",\n    value: function _removeMenus() {// menubar takes care about removal\n    }\n  }, {\n    key: \"deleteTabItem\",\n    value: function deleteTabItem(tabItem) {\n      var index = this.tabItems.indexOf(tabItem);\n      var newTabItems = this.tabItems.slice();\n\n      if (index >= 0) {\n        newTabItems.splice(index, 1);\n        this.setTabItems(newTabItems);\n      }\n    }\n  }, {\n    key: \"insertTabItem\",\n    value: function insertTabItem(tabItem, index) {\n      if (!tabItem) {\n        return;\n      }\n\n      index = scout.nvl(index, this.tabItems.length);\n      var newTabItems = this.tabItems.slice();\n      newTabItems.splice(index, 0, tabItem);\n      this.setTabItems(newTabItems);\n    }\n  }, {\n    key: \"setTabItems\",\n    value: function setTabItems(tabItems) {\n      this.setProperty('tabItems', tabItems);\n    }\n  }, {\n    key: \"_setTabItems\",\n    value: function _setTabItems(tabItems) {\n      tabItems = tabItems || [];\n      var tabsToRemove = this.tabItems || [];\n      tabsToRemove.filter(function (tabItem) {\n        return tabItems.indexOf(tabItem) < 0;\n      }, this).forEach(function (tabItem) {\n        tabItem.remove();\n      });\n\n      this._setProperty('tabItems', tabItems);\n\n      this.header.setTabItems(this.tabItems); // if no tab is selected select first\n\n      if (this.tabItems.indexOf(this.selectedTab) < 0) {\n        this.setSelectedTab(this.tabItems[0]);\n      }\n    }\n  }, {\n    key: \"_renderTabItems\",\n    value: function _renderTabItems(tabItems) {// void only selected tab is rendered\n    }\n  }, {\n    key: \"_removeTabItems\",\n    value: function _removeTabItems(tabItems) {// void only selected tab is rendered\n    }\n  }, {\n    key: \"_removeTabContent\",\n    value: function _removeTabContent() {\n      this.tabItems.forEach(function (tabItem) {\n        tabItem.remove();\n      }, this);\n    }\n  }, {\n    key: \"selectTabById\",\n    value: function selectTabById(tabId) {\n      var tab = this.getTabItem(tabId);\n\n      if (!tab) {\n        throw new Error('Tab with ID \\'' + tabId + '\\' does not exist');\n      }\n\n      this.setSelectedTab(tab);\n    }\n  }, {\n    key: \"setSelectedTab\",\n    value: function setSelectedTab(tabItem) {\n      this.setProperty('selectedTab', tabItem);\n    }\n  }, {\n    key: \"_setSelectedTab\",\n    value: function _setSelectedTab(tabItem) {\n      $.log.isDebugEnabled() && $.log.debug('(TabBox#_selectTab) tab=' + tabItem);\n\n      if (this.selectedTab && this.selectedTab.rendered) {\n        this.selectedTab.remove();\n      }\n\n      this._setProperty('selectedTab', tabItem);\n\n      this.header.setSelectedTabItem(this.selectedTab);\n    }\n  }, {\n    key: \"_renderSelectedTab\",\n    value: function _renderSelectedTab() {\n      if (this.selectedTab) {\n        this.selectedTab.render(this._$tabContent);\n      }\n\n      if (this.rendered) {\n        HtmlComponent.get(this._$tabContent).revalidateLayoutTree();\n      }\n    }\n  }, {\n    key: \"_removeSelectedTab\",\n    value: function _removeSelectedTab() {\n      if (this.selectedTab) {\n        this.selectedTab.remove();\n      }\n    }\n  }, {\n    key: \"setTabAreaStyle\",\n    value: function setTabAreaStyle(tabAreaStyle) {\n      this.setProperty('tabAreaStyle', tabAreaStyle);\n    }\n  }, {\n    key: \"_setTabAreaStyle\",\n    value: function _setTabAreaStyle(tabAreaStyle) {\n      this.tabAreaStyle = tabAreaStyle;\n\n      if (this.header && this.header.tabArea) {\n        this.header.tabArea.setDisplayStyle(tabAreaStyle);\n      }\n    }\n    /**\n     * @override FormField.js\n     */\n\n  }, {\n    key: \"_renderStatusPosition\",\n    value: function _renderStatusPosition() {\n      _get(_getPrototypeOf(TabBox.prototype), \"_renderStatusPosition\", this).call(this);\n\n      if (!this.fieldStatus) {\n        return;\n      }\n\n      if (this.statusPosition === FormField.StatusPosition.TOP) {\n        // move into title\n        this.$status.appendTo(this.header.$container);\n      } else {\n        this.$status.appendTo(this.$container);\n      }\n\n      this.invalidateLayoutTree();\n    }\n    /**\n     * @override CompositeField.js\n     */\n\n  }, {\n    key: \"getFields\",\n    value: function getFields() {\n      return this.tabItems;\n    }\n  }, {\n    key: \"getTabItem\",\n    value: function getTabItem(tabId) {\n      return arrays.find(this.tabItems, function (tabItem) {\n        return tabItem.id === tabId;\n      });\n    }\n    /**\n     * @override FormField.js\n     */\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (!this.rendered) {\n        this.session.layoutValidator.schedulePostValidateFunction(this.focus.bind(this));\n        return false;\n      }\n\n      if (this.selectedTab) {\n        return this.selectedTab.focus();\n      }\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"getFocusableElement\",\n    value: function getFocusableElement() {\n      if (this.selectedTab) {\n        return this.selectedTab.getFocusableElement();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"isTabItemFocused\",\n    value: function isTabItemFocused(tabItem) {\n      return this.header.isTabItemFocused(tabItem);\n    }\n  }, {\n    key: \"focusTabItem\",\n    value: function focusTabItem(tabItem) {\n      if (this.selectedTab !== tabItem) {\n        this.selectTab(tabItem);\n      }\n\n      this.header.focusTabItem(tabItem);\n    }\n    /**\n     * @deprecated use focusTabItem instead\n     */\n\n  }, {\n    key: \"focusTab\",\n    value: function focusTab(tab) {\n      this.focusTabItem(tab);\n    }\n  }, {\n    key: \"_onTabBoxHeaderPropertyChange\",\n    value: function _onTabBoxHeaderPropertyChange(event) {\n      if (event.propertyName === 'selectedTabItem') {\n        this.setSelectedTab(event.newValue);\n      }\n    }\n  }]);\n\n  return TabBox;\n}(CompositeField);\n\nexport { TabBox as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/form/fields/tabbox/TabBox.js"],"names":["arrays","CompositeField","FormField","HtmlComponent","scout","SingleLayout","TabArea","TabBoxLayout","$","TabBox","gridDataHints","useUiHeight","w","FULL_WIDTH","menusVisible","selectedTab","tabItems","tabAreaStyle","DisplayStyle","DEFAULT","_addWidgetProperties","_addPreserveOnPropertyChangeProperties","_$tabContent","_tabBoxHeaderPropertyChangeHander","_onTabBoxHeaderPropertyChange","bind","model","header","create","parent","tabBox","_initProperties","on","_setTabItems","_setSelectedTab","_setTabAreaStyle","off","addContainer","$parent","render","$container","addStatus","appendDiv","htmlCompContent","install","session","setLayout","_renderSelectedTab","_removeSelectedTab","tabItem","index","indexOf","newTabItems","slice","splice","setTabItems","nvl","length","setProperty","tabsToRemove","filter","forEach","remove","_setProperty","setSelectedTab","tabId","tab","getTabItem","Error","log","isDebugEnabled","debug","rendered","setSelectedTabItem","get","revalidateLayoutTree","tabArea","setDisplayStyle","fieldStatus","statusPosition","StatusPosition","TOP","$status","appendTo","invalidateLayoutTree","find","id","layoutValidator","schedulePostValidateFunction","focus","getFocusableElement","isTabItemFocused","selectTab","focusTabItem","event","propertyName","newValue"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, CompositeField, FormField, HtmlComponent, scout, SingleLayout, TabArea, TabBoxLayout} from '../../../index';\nimport $ from 'jquery';\n\n/**\n * Tab-area = where the 1-n tabs are placed (may have multiple runs = lines).\n * Tab-content = where the content of a single tab is displayed.\n */\nexport default class TabBox extends CompositeField {\n\n  constructor() {\n    super();\n\n    this.gridDataHints.useUiHeight = true;\n    this.gridDataHints.w = FormField.FULL_WIDTH;\n    this.menusVisible = false; // TabBox shows its menus in the tab box header -> don't draw an ellipsis status icon\n    this.selectedTab = null;\n    this.tabItems = [];\n    this.tabAreaStyle = TabArea.DisplayStyle.DEFAULT;\n\n    this._addWidgetProperties(['tabItems', 'selectedTab']);\n    this._addPreserveOnPropertyChangeProperties(['selectedTab']);\n    this._$tabContent = null;\n\n    this._tabBoxHeaderPropertyChangeHander = this._onTabBoxHeaderPropertyChange.bind(this);\n  }\n\n  /**\n   * @override FormField.js\n   */\n  _init(model) {\n    super._init(model);\n    this.header = scout.create('TabBoxHeader', {\n      parent: this,\n      tabBox: this\n    });\n\n    this._initProperties(model);\n    this.header.on('propertyChange', this._tabBoxHeaderPropertyChangeHander);\n  }\n\n  _initProperties(model) {\n    this._setTabItems(this.tabItems);\n    this._setSelectedTab(this.selectedTab);\n    this._setTabAreaStyle(this.tabAreaStyle);\n  }\n\n  _destroy() {\n    super._destroy();\n    this.header.off('propertyChange', this._tabBoxHeaderPropertyChangeHander);\n  }\n\n  _render() {\n    this.addContainer(this.$parent, 'tab-box', new TabBoxLayout(this));\n\n    this.header.render(this.$container);\n    this.addStatus();\n\n    this._$tabContent = this.$container.appendDiv('tab-content');\n    var htmlCompContent = HtmlComponent.install(this._$tabContent, this.session);\n    htmlCompContent.setLayout(new SingleLayout());\n  }\n\n  /**\n   * @override FormField.js\n   */\n  _renderProperties() {\n    super._renderProperties();\n    this._renderSelectedTab();\n  }\n\n  /**\n   * @override FormField.js\n   */\n  _remove() {\n    super._remove();\n    this._removeSelectedTab();\n  }\n\n  _getCurrentMenus() {\n    // handled by the menubar\n    return [];\n  }\n\n  _removeMenus() {\n    // menubar takes care about removal\n  }\n\n  deleteTabItem(tabItem) {\n    var index = this.tabItems.indexOf(tabItem);\n    var newTabItems = this.tabItems.slice();\n    if (index >= 0) {\n      newTabItems.splice(index, 1);\n      this.setTabItems(newTabItems);\n    }\n  }\n\n  insertTabItem(tabItem, index) {\n    if (!tabItem) {\n      return;\n    }\n    index = scout.nvl(index, this.tabItems.length);\n    var newTabItems = this.tabItems.slice();\n    newTabItems.splice(index, 0, tabItem);\n    this.setTabItems(newTabItems);\n  }\n\n  setTabItems(tabItems) {\n    this.setProperty('tabItems', tabItems);\n  }\n\n  _setTabItems(tabItems) {\n    tabItems = tabItems || [];\n    var tabsToRemove = this.tabItems || [];\n    tabsToRemove.filter(function(tabItem) {\n      return tabItems.indexOf(tabItem) < 0;\n    }, this).forEach(function(tabItem) {\n      tabItem.remove();\n    });\n\n    this._setProperty('tabItems', tabItems);\n    this.header.setTabItems(this.tabItems);\n    // if no tab is selected select first\n    if (this.tabItems.indexOf(this.selectedTab) < 0) {\n      this.setSelectedTab(this.tabItems[0]);\n    }\n  }\n\n  _renderTabItems(tabItems) {\n    // void only selected tab is rendered\n  }\n\n  _removeTabItems(tabItems) {\n    // void only selected tab is rendered\n  }\n\n  _removeTabContent() {\n    this.tabItems.forEach(function(tabItem) {\n      tabItem.remove();\n    }, this);\n  }\n\n  selectTabById(tabId) {\n    var tab = this.getTabItem(tabId);\n    if (!tab) {\n      throw new Error('Tab with ID \\'' + tabId + '\\' does not exist');\n    }\n    this.setSelectedTab(tab);\n  }\n\n  setSelectedTab(tabItem) {\n    this.setProperty('selectedTab', tabItem);\n  }\n\n  _setSelectedTab(tabItem) {\n    $.log.isDebugEnabled() && $.log.debug('(TabBox#_selectTab) tab=' + tabItem);\n    if (this.selectedTab && this.selectedTab.rendered) {\n      this.selectedTab.remove();\n    }\n    this._setProperty('selectedTab', tabItem);\n    this.header.setSelectedTabItem(this.selectedTab);\n  }\n\n  _renderSelectedTab() {\n    if (this.selectedTab) {\n      this.selectedTab.render(this._$tabContent);\n    }\n    if (this.rendered) {\n      HtmlComponent.get(this._$tabContent).revalidateLayoutTree();\n    }\n  }\n\n  _removeSelectedTab() {\n    if (this.selectedTab) {\n      this.selectedTab.remove();\n    }\n  }\n\n  setTabAreaStyle(tabAreaStyle) {\n    this.setProperty('tabAreaStyle', tabAreaStyle);\n  }\n\n  _setTabAreaStyle(tabAreaStyle) {\n    this.tabAreaStyle = tabAreaStyle;\n    if (this.header && this.header.tabArea) {\n      this.header.tabArea.setDisplayStyle(tabAreaStyle);\n    }\n  }\n\n  /**\n   * @override FormField.js\n   */\n  _renderStatusPosition() {\n    super._renderStatusPosition();\n    if (!this.fieldStatus) {\n      return;\n    }\n    if (this.statusPosition === FormField.StatusPosition.TOP) {\n      // move into title\n      this.$status.appendTo(this.header.$container);\n    } else {\n      this.$status.appendTo(this.$container);\n    }\n    this.invalidateLayoutTree();\n  }\n\n  /**\n   * @override CompositeField.js\n   */\n  getFields() {\n    return this.tabItems;\n  }\n\n  getTabItem(tabId) {\n    return arrays.find(this.tabItems, function(tabItem) {\n      return tabItem.id === tabId;\n    });\n  }\n\n  /**\n   * @override FormField.js\n   */\n  focus() {\n    if (!this.rendered) {\n      this.session.layoutValidator.schedulePostValidateFunction(this.focus.bind(this));\n      return false;\n    }\n    if (this.selectedTab) {\n      return this.selectedTab.focus();\n    }\n  }\n\n  /**\n   * @override\n   */\n  getFocusableElement() {\n    if (this.selectedTab) {\n      return this.selectedTab.getFocusableElement();\n    }\n    return null;\n  }\n\n  isTabItemFocused(tabItem) {\n    return this.header.isTabItemFocused(tabItem);\n  }\n\n  focusTabItem(tabItem) {\n    if (this.selectedTab !== tabItem) {\n      this.selectTab(tabItem);\n    }\n    this.header.focusTabItem(tabItem);\n  }\n\n  /**\n   * @deprecated use focusTabItem instead\n   */\n  focusTab(tab) {\n    this.focusTabItem(tab);\n  }\n\n  _onTabBoxHeaderPropertyChange(event) {\n    if (event.propertyName === 'selectedTabItem') {\n      this.setSelectedTab(event.newValue);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}