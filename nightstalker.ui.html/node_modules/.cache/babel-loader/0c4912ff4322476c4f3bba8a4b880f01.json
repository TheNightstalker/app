{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, Button, CheckBoxField, CompositeField, FormField, GridData, GroupBox, HtmlEnvironment, LabelField, PlaceholderField, ResponsiveHandler, ResponsiveManager, SequenceBox, TreeVisitResult } from '../index';\n\nvar GroupBoxResponsiveHandler = /*#__PURE__*/function (_ResponsiveHandler) {\n  _inherits(GroupBoxResponsiveHandler, _ResponsiveHandler);\n\n  var _super = _createSuper(GroupBoxResponsiveHandler);\n\n  function GroupBoxResponsiveHandler() {\n    var _this;\n\n    _classCallCheck(this, GroupBoxResponsiveHandler);\n\n    _this = _super.call(this);\n\n    _this._initDefaults();\n\n    _this.allowedStates = [ResponsiveManager.ResponsiveState.NORMAL, ResponsiveManager.ResponsiveState.CONDENSED, ResponsiveManager.ResponsiveState.COMPACT]; // Event handlers\n\n    _this._formFieldAddedHandler = _this._onFormFieldAdded.bind(_assertThisInitialized(_this));\n    _this._compositeFields = [];\n    _this._htmlPropertyChangeHandler = _this._onHtmlEnvironmenPropertyChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(GroupBoxResponsiveHandler, [{\n    key: \"_initDefaults\",\n    value: function _initDefaults() {\n      this.compactThreshold = HtmlEnvironment.get().formColumnWidth;\n    }\n  }, {\n    key: \"_onHtmlEnvironmenPropertyChange\",\n    value: function _onHtmlEnvironmenPropertyChange() {\n      this._initDefaults();\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"init\",\n    value: function init(model) {\n      _get(_getPrototypeOf(GroupBoxResponsiveHandler.prototype), \"init\", this).call(this, model);\n\n      var transformationType = GroupBoxResponsiveHandler.TransformationType;\n      var responsiveState = ResponsiveManager.ResponsiveState;\n\n      this._registerTransformation(transformationType.LABEL_POSITION_ON_FIELD, this._transformLabelPositionOnField);\n\n      this._registerTransformation(transformationType.LABEL_POSITION_ON_TOP, this._transformLabelPositionOnTop);\n\n      this._registerTransformation(transformationType.LABEL_VISIBILITY, this._transformLabelVisibility);\n\n      this._registerTransformation(transformationType.STATUS_POSITION_ON_TOP, this._transformStatusPosition);\n\n      this._registerTransformation(transformationType.STATUS_VISIBILITY, this._transformStatusVisibility);\n\n      this._registerTransformation(transformationType.VERTICAL_ALIGNMENT, this._transformVerticalAlignment);\n\n      this._registerTransformation(transformationType.GRID_COLUMN_COUNT, this._transformGridColumnCount);\n\n      this._registerTransformation(transformationType.HIDE_PLACE_HOLDER_FIELD, this._transformHidePlaceHolderField);\n\n      this._registerTransformation(transformationType.FIELD_SCALABLE, this._transformFieldScalable);\n\n      this._enableTransformation(responsiveState.CONDENSED, transformationType.LABEL_POSITION_ON_TOP);\n\n      this._enableTransformation(responsiveState.CONDENSED, transformationType.LABEL_VISIBILITY);\n\n      this._enableTransformation(responsiveState.CONDENSED, transformationType.VERTICAL_ALIGNMENT);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.LABEL_POSITION_ON_TOP);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.LABEL_VISIBILITY);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.STATUS_POSITION_ON_TOP);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.STATUS_VISIBILITY);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.VERTICAL_ALIGNMENT);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.GRID_COLUMN_COUNT);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.HIDE_PLACE_HOLDER_FIELD);\n\n      this._enableTransformation(responsiveState.COMPACT, transformationType.FIELD_SCALABLE);\n\n      HtmlEnvironment.get().on('propertyChange', this._htmlPropertyChangeHandler);\n      this.widget.visitFields(function (field) {\n        if (field instanceof CompositeField) {\n          field.on('propertyChange', this._formFieldAddedHandler);\n\n          this._compositeFields.push(field);\n        }\n      }.bind(this));\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(GroupBoxResponsiveHandler.prototype), \"destroy\", this).call(this);\n\n      this._compositeFields.forEach(function (compositeField) {\n        compositeField.off('propertyChange', this._formFieldAddedHandler);\n      }.bind(this));\n\n      HtmlEnvironment.get().off('propertyChange', this._htmlPropertyChangeHandler);\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"active\",\n    value: function active() {\n      return this.widget.responsive;\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"getCondensedThreshold\",\n    value: function getCondensedThreshold() {\n      if (this.condensedThreshold > 0) {\n        return this.condensedThreshold;\n      }\n\n      return this.widget.htmlComp.prefSize({\n        widthOnly: true\n      }).width;\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"_transform\",\n    value: function _transform() {\n      this.widget.visitFields(this._transformWidget.bind(this));\n    }\n    /**\n     * @Override\n     */\n\n  }, {\n    key: \"_transformWidget\",\n    value: function _transformWidget(widget) {\n      // skip group boxes with responsiveness set.\n      if (widget !== this.widget && widget instanceof GroupBox && widget.responsive !== null) {\n        return TreeVisitResult.SKIP_SUBTREE;\n      } // skip everything that is not a form field.\n\n\n      if (!(widget instanceof FormField)) {\n        return;\n      } // suppress a revalidate of the layout tree, since setLabelPosition would trigger it.\n\n\n      var htmlParent;\n\n      if (widget.htmlComp) {\n        widget.htmlComp.suppressInvalidate = true;\n        htmlParent = widget.htmlComp.getParent();\n\n        if (htmlParent) {\n          htmlParent.suppressInvalidate = true;\n        }\n      }\n\n      _get(_getPrototypeOf(GroupBoxResponsiveHandler.prototype), \"_transformWidget\", this).call(this, widget);\n\n      if (widget.htmlComp) {\n        widget.htmlComp.suppressInvalidate = false;\n      }\n\n      if (htmlParent) {\n        htmlParent.suppressInvalidate = false;\n      }\n    }\n    /* --- TRANSFORMATIONS ------------------------------------------------------------- */\n\n    /**\n     * Label Position -> ON_FIELD\n     */\n\n  }, {\n    key: \"_transformLabelPositionOnField\",\n    value: function _transformLabelPositionOnField(field, apply) {\n      if (field.parent instanceof SequenceBox || field instanceof CheckBoxField || field instanceof LabelField) {\n        return;\n      }\n\n      if (apply) {\n        this._storeFieldProperty(field, 'labelPosition', field.labelPosition);\n\n        field.setLabelPosition(FormField.LabelPosition.ON_FIELD);\n      } else {\n        if (this._hasFieldProperty(field, 'labelPosition')) {\n          field.setLabelPosition(this._getFieldProperty(field, 'labelPosition'));\n        }\n      }\n    }\n    /**\n     * Label Position -> ON_TOP\n     */\n\n  }, {\n    key: \"_transformLabelPositionOnTop\",\n    value: function _transformLabelPositionOnTop(field, apply) {\n      if (field.parent instanceof SequenceBox || field instanceof CheckBoxField || field instanceof LabelField || field.labelPosition === FormField.LabelPosition.ON_FIELD) {\n        return;\n      }\n\n      if (apply) {\n        this._storeFieldProperty(field, 'labelPosition', field.labelPosition);\n\n        field.setLabelPosition(FormField.LabelPosition.TOP);\n      } else {\n        if (this._hasFieldProperty(field, 'labelPosition')) {\n          field.setLabelPosition(this._getFieldProperty(field, 'labelPosition'));\n        }\n      }\n    }\n    /**\n     * Label visibility\n     */\n\n  }, {\n    key: \"_transformLabelVisibility\",\n    value: function _transformLabelVisibility(field, apply) {\n      if (!(field instanceof CheckBoxField)) {\n        return;\n      }\n\n      if (apply) {\n        this._storeFieldProperty(field, 'labelVisible', field.labelVisible);\n\n        field.setLabelVisible(false);\n      } else {\n        if (this._hasFieldProperty(field, 'labelVisible')) {\n          field.setLabelVisible(this._getFieldProperty(field, 'labelVisible'));\n        }\n      }\n    } // Scoutjs specific method. This methods will be overridden by GroupBoxAdapter for scout classic case.\n\n  }, {\n    key: \"getGridData\",\n    value: function getGridData(field) {\n      return new GridData(field.gridDataHints);\n    } // Scoutjs specific method. This methods will be overridden by GroupBoxAdapter for scout classic case.\n\n  }, {\n    key: \"setGridData\",\n    value: function setGridData(field, gridData) {\n      field.setGridDataHints(gridData);\n    }\n    /**\n     * Status position\n     */\n\n  }, {\n    key: \"_transformStatusPosition\",\n    value: function _transformStatusPosition(field, apply) {\n      if (apply) {\n        this._storeFieldProperty(field, 'statusPosition', field.statusPosition);\n\n        field.setStatusPosition(FormField.StatusPosition.TOP);\n      } else {\n        if (this._hasFieldProperty(field, 'statusPosition')) {\n          field.setStatusPosition(this._getFieldProperty(field, 'statusPosition'));\n        }\n      }\n    }\n    /**\n     * Status visibility\n     */\n\n  }, {\n    key: \"_transformStatusVisibility\",\n    value: function _transformStatusVisibility(field, apply) {\n      if (apply) {\n        this._storeFieldProperty(field, 'statusVisible', field.statusVisible);\n\n        field.setStatusVisible(false);\n      } else {\n        if (this._hasFieldProperty(field, 'statusVisible')) {\n          field.setStatusVisible(this._getFieldProperty(field, 'statusVisible'));\n        }\n      }\n    }\n    /**\n     * Vertical alignment\n     */\n\n  }, {\n    key: \"_transformVerticalAlignment\",\n    value: function _transformVerticalAlignment(field, apply) {\n      var isDefaultButton = field instanceof Button && field.displayStyle === Button.DisplayStyle.DEFAULT;\n      var isCheckbox = field instanceof CheckBoxField;\n      var isSingleHeightOnFieldLabelField = field.labelPosition === FormField.LabelPosition.ON_FIELD && field.gridData && field.gridData.h === 1;\n\n      if (!(isDefaultButton || isCheckbox || isSingleHeightOnFieldLabelField) || !field.gridData) {\n        return;\n      }\n\n      var gridData = this.getGridData(field);\n\n      if (apply) {\n        this._storeFieldProperty(field, 'fillVertical', gridData.fillVertical);\n\n        this._storeFieldProperty(field, 'verticalAlignment', gridData.verticalAlignment);\n\n        gridData.fillVertical = false;\n        gridData.verticalAlignment = 1;\n      } else {\n        if (this._hasFieldProperty(field, 'fillVertical')) {\n          gridData.fillVertical = this._getFieldProperty(field, 'fillVertical');\n        }\n\n        if (this._hasFieldProperty(field, 'verticalAlignment')) {\n          gridData.verticalAlignment = this._getFieldProperty(field, 'verticalAlignment');\n        }\n      }\n\n      this.setGridData(field, gridData);\n    }\n    /**\n     * Column count\n     */\n\n  }, {\n    key: \"_transformGridColumnCount\",\n    value: function _transformGridColumnCount(field, apply) {\n      if (!(field instanceof GroupBox)) {\n        return;\n      }\n\n      if (apply) {\n        this._storeFieldProperty(field, 'gridColumnCount', field.gridColumnCount);\n\n        field.setGridColumnCount(1);\n      } else {\n        if (this._hasFieldProperty(field, 'gridColumnCount')) {\n          field.setGridColumnCount(this._getFieldProperty(field, 'gridColumnCount'));\n        }\n      }\n    }\n    /**\n     * Hide placeholder field\n     */\n\n  }, {\n    key: \"_transformHidePlaceHolderField\",\n    value: function _transformHidePlaceHolderField(field, apply) {\n      if (!(field instanceof PlaceholderField)) {\n        return;\n      }\n\n      if (apply) {\n        this._storeFieldProperty(field, 'visible', field.visible);\n\n        field.setVisible(false);\n      } else {\n        if (this._hasFieldProperty(field, 'visible')) {\n          field.setVisible(this._getFieldProperty(field, 'visible'));\n        }\n      }\n    }\n    /**\n     * GroupBox: Makes sure weightX is set to 1 which makes the field scalable.\n     *\n     * Reason:<br>\n     * The width of the field should be adjusted according to the display width, otherwise it may be too big to be\n     * displayed. <br>\n     * Additionally, since we use a one column layout, setting weightX to 0 might destroy the layout because it affects\n     * all the fields in the groupBox.\n     */\n\n  }, {\n    key: \"_transformFieldScalable\",\n    value: function _transformFieldScalable(field, apply) {\n      if (field.parent instanceof SequenceBox) {\n        return;\n      }\n\n      var gridData = this.getGridData(field);\n\n      if (apply && gridData.weightX === 0) {\n        this._storeFieldProperty(field, 'weightX', gridData.weightX);\n\n        gridData.weightX = 1;\n      } else if (!apply) {\n        if (this._hasFieldProperty(field, 'weightX')) {\n          gridData.weightX = this._getFieldProperty(field, 'weightX');\n        }\n      }\n\n      this.setGridData(field, gridData);\n    }\n    /* --- HANDLERS ------------------------------------------------------------- */\n\n  }, {\n    key: \"_onFormFieldAdded\",\n    value: function _onFormFieldAdded(event) {\n      if (this.state !== ResponsiveManager.ResponsiveState.NORMAL && (event.propertyName === 'fields' || event.propertyName === 'tabItems')) {\n        var newFields = arrays.diff(event.newValue, event.oldValue);\n        newFields.forEach(function (field) {\n          field.visitFields(this._transformWidget.bind(this));\n        }.bind(this));\n      }\n    }\n  }]);\n\n  return GroupBoxResponsiveHandler;\n}(ResponsiveHandler);\n\n_defineProperty(GroupBoxResponsiveHandler, \"TransformationType\", {\n  LABEL_POSITION_ON_FIELD: 'labelPositionOnField',\n  LABEL_POSITION_ON_TOP: 'labelPositionOnTop',\n  LABEL_VISIBILITY: 'labelVisibility',\n  STATUS_POSITION_ON_TOP: 'statusPositionOnTop',\n  STATUS_VISIBILITY: 'statusVisibility',\n  VERTICAL_ALIGNMENT: 'verticalAlignment',\n  GRID_COLUMN_COUNT: 'gridColumnCount',\n  HIDE_PLACE_HOLDER_FIELD: 'hidePlaceHolderField',\n  FIELD_SCALABLE: 'fieldScalable'\n});\n\nexport { GroupBoxResponsiveHandler as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/form/GroupBoxResponsiveHandler.js"],"names":["arrays","Button","CheckBoxField","CompositeField","FormField","GridData","GroupBox","HtmlEnvironment","LabelField","PlaceholderField","ResponsiveHandler","ResponsiveManager","SequenceBox","TreeVisitResult","GroupBoxResponsiveHandler","_initDefaults","allowedStates","ResponsiveState","NORMAL","CONDENSED","COMPACT","_formFieldAddedHandler","_onFormFieldAdded","bind","_compositeFields","_htmlPropertyChangeHandler","_onHtmlEnvironmenPropertyChange","compactThreshold","get","formColumnWidth","model","transformationType","TransformationType","responsiveState","_registerTransformation","LABEL_POSITION_ON_FIELD","_transformLabelPositionOnField","LABEL_POSITION_ON_TOP","_transformLabelPositionOnTop","LABEL_VISIBILITY","_transformLabelVisibility","STATUS_POSITION_ON_TOP","_transformStatusPosition","STATUS_VISIBILITY","_transformStatusVisibility","VERTICAL_ALIGNMENT","_transformVerticalAlignment","GRID_COLUMN_COUNT","_transformGridColumnCount","HIDE_PLACE_HOLDER_FIELD","_transformHidePlaceHolderField","FIELD_SCALABLE","_transformFieldScalable","_enableTransformation","on","widget","visitFields","field","push","forEach","compositeField","off","responsive","condensedThreshold","htmlComp","prefSize","widthOnly","width","_transformWidget","SKIP_SUBTREE","htmlParent","suppressInvalidate","getParent","apply","parent","_storeFieldProperty","labelPosition","setLabelPosition","LabelPosition","ON_FIELD","_hasFieldProperty","_getFieldProperty","TOP","labelVisible","setLabelVisible","gridDataHints","gridData","setGridDataHints","statusPosition","setStatusPosition","StatusPosition","statusVisible","setStatusVisible","isDefaultButton","displayStyle","DisplayStyle","DEFAULT","isCheckbox","isSingleHeightOnFieldLabelField","h","getGridData","fillVertical","verticalAlignment","setGridData","gridColumnCount","setGridColumnCount","visible","setVisible","weightX","event","state","propertyName","newFields","diff","newValue","oldValue"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACEA,MADF,EAEEC,MAFF,EAGEC,aAHF,EAIEC,cAJF,EAKEC,SALF,EAMEC,QANF,EAOEC,QAPF,EAQEC,eARF,EASEC,UATF,EAUEC,gBAVF,EAWEC,iBAXF,EAYEC,iBAZF,EAaEC,WAbF,EAcEC,eAdF,QAeO,UAfP;;IAiBqBC,yB;;;;;AAEnB,uCAAc;AAAA;;AAAA;;AACZ;;AAEA,UAAKC,aAAL;;AACA,UAAKC,aAAL,GAAqB,CAACL,iBAAiB,CAACM,eAAlB,CAAkCC,MAAnC,EAA2CP,iBAAiB,CAACM,eAAlB,CAAkCE,SAA7E,EAAwFR,iBAAiB,CAACM,eAAlB,CAAkCG,OAA1H,CAArB,CAJY,CAMZ;;AACA,UAAKC,sBAAL,GAA8B,MAAKC,iBAAL,CAAuBC,IAAvB,+BAA9B;AACA,UAAKC,gBAAL,GAAwB,EAAxB;AACA,UAAKC,0BAAL,GAAkC,MAAKC,+BAAL,CAAqCH,IAArC,+BAAlC;AATY;AAUb;;;;oCAce;AACd,WAAKI,gBAAL,GAAwBpB,eAAe,CAACqB,GAAhB,GAAsBC,eAA9C;AACD;;;sDAEiC;AAChC,WAAKd,aAAL;AACD;AAED;AACF;AACA;;;;yBACOe,K,EAAO;AACV,0FAAWA,KAAX;;AAEA,UAAIC,kBAAkB,GAAGjB,yBAAyB,CAACkB,kBAAnD;AACA,UAAIC,eAAe,GAAGtB,iBAAiB,CAACM,eAAxC;;AAEA,WAAKiB,uBAAL,CAA6BH,kBAAkB,CAACI,uBAAhD,EAAyE,KAAKC,8BAA9E;;AACA,WAAKF,uBAAL,CAA6BH,kBAAkB,CAACM,qBAAhD,EAAuE,KAAKC,4BAA5E;;AACA,WAAKJ,uBAAL,CAA6BH,kBAAkB,CAACQ,gBAAhD,EAAkE,KAAKC,yBAAvE;;AACA,WAAKN,uBAAL,CAA6BH,kBAAkB,CAACU,sBAAhD,EAAwE,KAAKC,wBAA7E;;AACA,WAAKR,uBAAL,CAA6BH,kBAAkB,CAACY,iBAAhD,EAAmE,KAAKC,0BAAxE;;AACA,WAAKV,uBAAL,CAA6BH,kBAAkB,CAACc,kBAAhD,EAAoE,KAAKC,2BAAzE;;AACA,WAAKZ,uBAAL,CAA6BH,kBAAkB,CAACgB,iBAAhD,EAAmE,KAAKC,yBAAxE;;AACA,WAAKd,uBAAL,CAA6BH,kBAAkB,CAACkB,uBAAhD,EAAyE,KAAKC,8BAA9E;;AACA,WAAKhB,uBAAL,CAA6BH,kBAAkB,CAACoB,cAAhD,EAAgE,KAAKC,uBAArE;;AAEA,WAAKC,qBAAL,CAA2BpB,eAAe,CAACd,SAA3C,EAAsDY,kBAAkB,CAACM,qBAAzE;;AACA,WAAKgB,qBAAL,CAA2BpB,eAAe,CAACd,SAA3C,EAAsDY,kBAAkB,CAACQ,gBAAzE;;AACA,WAAKc,qBAAL,CAA2BpB,eAAe,CAACd,SAA3C,EAAsDY,kBAAkB,CAACc,kBAAzE;;AAEA,WAAKQ,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACM,qBAAvE;;AACA,WAAKgB,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACQ,gBAAvE;;AACA,WAAKc,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACU,sBAAvE;;AACA,WAAKY,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACY,iBAAvE;;AACA,WAAKU,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACc,kBAAvE;;AACA,WAAKQ,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACgB,iBAAvE;;AACA,WAAKM,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACkB,uBAAvE;;AACA,WAAKI,qBAAL,CAA2BpB,eAAe,CAACb,OAA3C,EAAoDW,kBAAkB,CAACoB,cAAvE;;AAEA5C,MAAAA,eAAe,CAACqB,GAAhB,GAAsB0B,EAAtB,CAAyB,gBAAzB,EAA2C,KAAK7B,0BAAhD;AACA,WAAK8B,MAAL,CAAYC,WAAZ,CAAwB,UAASC,KAAT,EAAgB;AACtC,YAAIA,KAAK,YAAYtD,cAArB,EAAqC;AACnCsD,UAAAA,KAAK,CAACH,EAAN,CAAS,gBAAT,EAA2B,KAAKjC,sBAAhC;;AACA,eAAKG,gBAAL,CAAsBkC,IAAtB,CAA2BD,KAA3B;AACD;AACF,OALuB,CAKtBlC,IALsB,CAKjB,IALiB,CAAxB;AAMD;AAED;AACF;AACA;;;;8BACY;AACR;;AAEA,WAAKC,gBAAL,CAAsBmC,OAAtB,CAA8B,UAASC,cAAT,EAAyB;AACrDA,QAAAA,cAAc,CAACC,GAAf,CAAmB,gBAAnB,EAAqC,KAAKxC,sBAA1C;AACD,OAF6B,CAE5BE,IAF4B,CAEvB,IAFuB,CAA9B;;AAIAhB,MAAAA,eAAe,CAACqB,GAAhB,GAAsBiC,GAAtB,CAA0B,gBAA1B,EAA4C,KAAKpC,0BAAjD;AACD;AAED;AACF;AACA;;;;6BACW;AACP,aAAO,KAAK8B,MAAL,CAAYO,UAAnB;AACD;AAED;AACF;AACA;;;;4CAC0B;AACtB,UAAI,KAAKC,kBAAL,GAA0B,CAA9B,EAAiC;AAC/B,eAAO,KAAKA,kBAAZ;AACD;;AAED,aAAO,KAAKR,MAAL,CAAYS,QAAZ,CAAqBC,QAArB,CAA8B;AACnCC,QAAAA,SAAS,EAAE;AADwB,OAA9B,EAEJC,KAFH;AAGD;AAED;AACF;AACA;;;;iCACe;AACX,WAAKZ,MAAL,CAAYC,WAAZ,CAAwB,KAAKY,gBAAL,CAAsB7C,IAAtB,CAA2B,IAA3B,CAAxB;AACD;AAED;AACF;AACA;;;;qCACmBgC,M,EAAQ;AACvB;AACA,UAAIA,MAAM,KAAK,KAAKA,MAAhB,IAA0BA,MAAM,YAAYjD,QAA5C,IAAwDiD,MAAM,CAACO,UAAP,KAAsB,IAAlF,EAAwF;AACtF,eAAOjD,eAAe,CAACwD,YAAvB;AACD,OAJsB,CAMvB;;;AACA,UAAI,EAAEd,MAAM,YAAYnD,SAApB,CAAJ,EAAoC;AAClC;AACD,OATsB,CAWvB;;;AACA,UAAIkE,UAAJ;;AACA,UAAIf,MAAM,CAACS,QAAX,EAAqB;AACnBT,QAAAA,MAAM,CAACS,QAAP,CAAgBO,kBAAhB,GAAqC,IAArC;AACAD,QAAAA,UAAU,GAAGf,MAAM,CAACS,QAAP,CAAgBQ,SAAhB,EAAb;;AACA,YAAIF,UAAJ,EAAgB;AACdA,UAAAA,UAAU,CAACC,kBAAX,GAAgC,IAAhC;AACD;AACF;;AAED,sGAAuBhB,MAAvB;;AAEA,UAAIA,MAAM,CAACS,QAAX,EAAqB;AACnBT,QAAAA,MAAM,CAACS,QAAP,CAAgBO,kBAAhB,GAAqC,KAArC;AACD;;AACD,UAAID,UAAJ,EAAgB;AACdA,QAAAA,UAAU,CAACC,kBAAX,GAAgC,KAAhC;AACD;AACF;AAED;;AAEA;AACF;AACA;;;;mDACiCd,K,EAAOgB,K,EAAO;AAC3C,UAAIhB,KAAK,CAACiB,MAAN,YAAwB9D,WAAxB,IACF6C,KAAK,YAAYvD,aADf,IAEFuD,KAAK,YAAYjD,UAFnB,EAE+B;AAC7B;AACD;;AAED,UAAIiE,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,eAAhC,EAAiDA,KAAK,CAACmB,aAAvD;;AACAnB,QAAAA,KAAK,CAACoB,gBAAN,CAAuBzE,SAAS,CAAC0E,aAAV,CAAwBC,QAA/C;AACD,OAHD,MAGO;AACL,YAAI,KAAKC,iBAAL,CAAuBvB,KAAvB,EAA8B,eAA9B,CAAJ,EAAoD;AAClDA,UAAAA,KAAK,CAACoB,gBAAN,CAAuB,KAAKI,iBAAL,CAAuBxB,KAAvB,EAA8B,eAA9B,CAAvB;AACD;AACF;AACF;AAED;AACF;AACA;;;;iDAC+BA,K,EAAOgB,K,EAAO;AACzC,UAAIhB,KAAK,CAACiB,MAAN,YAAwB9D,WAAxB,IACF6C,KAAK,YAAYvD,aADf,IAEFuD,KAAK,YAAYjD,UAFf,IAGFiD,KAAK,CAACmB,aAAN,KAAwBxE,SAAS,CAAC0E,aAAV,CAAwBC,QAHlD,EAG4D;AAC1D;AACD;;AAED,UAAIN,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,eAAhC,EAAiDA,KAAK,CAACmB,aAAvD;;AACAnB,QAAAA,KAAK,CAACoB,gBAAN,CAAuBzE,SAAS,CAAC0E,aAAV,CAAwBI,GAA/C;AACD,OAHD,MAGO;AACL,YAAI,KAAKF,iBAAL,CAAuBvB,KAAvB,EAA8B,eAA9B,CAAJ,EAAoD;AAClDA,UAAAA,KAAK,CAACoB,gBAAN,CAAuB,KAAKI,iBAAL,CAAuBxB,KAAvB,EAA8B,eAA9B,CAAvB;AACD;AACF;AACF;AAED;AACF;AACA;;;;8CAC4BA,K,EAAOgB,K,EAAO;AACtC,UAAI,EAAEhB,KAAK,YAAYvD,aAAnB,CAAJ,EAAuC;AACrC;AACD;;AAED,UAAIuE,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,cAAhC,EAAgDA,KAAK,CAAC0B,YAAtD;;AACA1B,QAAAA,KAAK,CAAC2B,eAAN,CAAsB,KAAtB;AACD,OAHD,MAGO;AACL,YAAI,KAAKJ,iBAAL,CAAuBvB,KAAvB,EAA8B,cAA9B,CAAJ,EAAmD;AACjDA,UAAAA,KAAK,CAAC2B,eAAN,CAAsB,KAAKH,iBAAL,CAAuBxB,KAAvB,EAA8B,cAA9B,CAAtB;AACD;AACF;AACF,K,CAED;;;;gCACYA,K,EAAO;AACjB,aAAO,IAAIpD,QAAJ,CAAaoD,KAAK,CAAC4B,aAAnB,CAAP;AACD,K,CAED;;;;gCACY5B,K,EAAO6B,Q,EAAU;AAC3B7B,MAAAA,KAAK,CAAC8B,gBAAN,CAAuBD,QAAvB;AACD;AAED;AACF;AACA;;;;6CAC2B7B,K,EAAOgB,K,EAAO;AACrC,UAAIA,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,gBAAhC,EAAkDA,KAAK,CAAC+B,cAAxD;;AACA/B,QAAAA,KAAK,CAACgC,iBAAN,CAAwBrF,SAAS,CAACsF,cAAV,CAAyBR,GAAjD;AACD,OAHD,MAGO;AACL,YAAI,KAAKF,iBAAL,CAAuBvB,KAAvB,EAA8B,gBAA9B,CAAJ,EAAqD;AACnDA,UAAAA,KAAK,CAACgC,iBAAN,CAAwB,KAAKR,iBAAL,CAAuBxB,KAAvB,EAA8B,gBAA9B,CAAxB;AACD;AACF;AACF;AAED;AACF;AACA;;;;+CAC6BA,K,EAAOgB,K,EAAO;AACvC,UAAIA,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,eAAhC,EAAiDA,KAAK,CAACkC,aAAvD;;AACAlC,QAAAA,KAAK,CAACmC,gBAAN,CAAuB,KAAvB;AACD,OAHD,MAGO;AACL,YAAI,KAAKZ,iBAAL,CAAuBvB,KAAvB,EAA8B,eAA9B,CAAJ,EAAoD;AAClDA,UAAAA,KAAK,CAACmC,gBAAN,CAAuB,KAAKX,iBAAL,CAAuBxB,KAAvB,EAA8B,eAA9B,CAAvB;AACD;AACF;AACF;AAED;AACF;AACA;;;;gDAC8BA,K,EAAOgB,K,EAAO;AACxC,UAAIoB,eAAe,GAAGpC,KAAK,YAAYxD,MAAjB,IAA2BwD,KAAK,CAACqC,YAAN,KAAuB7F,MAAM,CAAC8F,YAAP,CAAoBC,OAA5F;AACA,UAAIC,UAAU,GAAGxC,KAAK,YAAYvD,aAAlC;AACA,UAAIgG,+BAA+B,GAAGzC,KAAK,CAACmB,aAAN,KAAwBxE,SAAS,CAAC0E,aAAV,CAAwBC,QAAhD,IAA4DtB,KAAK,CAAC6B,QAAlE,IAA8E7B,KAAK,CAAC6B,QAAN,CAAea,CAAf,KAAqB,CAAzI;;AAEA,UAAI,EAAEN,eAAe,IAAII,UAAnB,IAAiCC,+BAAnC,KACF,CAACzC,KAAK,CAAC6B,QADT,EACmB;AACjB;AACD;;AAED,UAAIA,QAAQ,GAAG,KAAKc,WAAL,CAAiB3C,KAAjB,CAAf;;AACA,UAAIgB,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,cAAhC,EAAgD6B,QAAQ,CAACe,YAAzD;;AACA,aAAK1B,mBAAL,CAAyBlB,KAAzB,EAAgC,mBAAhC,EAAqD6B,QAAQ,CAACgB,iBAA9D;;AACAhB,QAAAA,QAAQ,CAACe,YAAT,GAAwB,KAAxB;AACAf,QAAAA,QAAQ,CAACgB,iBAAT,GAA6B,CAA7B;AACD,OALD,MAKO;AACL,YAAI,KAAKtB,iBAAL,CAAuBvB,KAAvB,EAA8B,cAA9B,CAAJ,EAAmD;AACjD6B,UAAAA,QAAQ,CAACe,YAAT,GAAwB,KAAKpB,iBAAL,CAAuBxB,KAAvB,EAA8B,cAA9B,CAAxB;AACD;;AACD,YAAI,KAAKuB,iBAAL,CAAuBvB,KAAvB,EAA8B,mBAA9B,CAAJ,EAAwD;AACtD6B,UAAAA,QAAQ,CAACgB,iBAAT,GAA6B,KAAKrB,iBAAL,CAAuBxB,KAAvB,EAA8B,mBAA9B,CAA7B;AACD;AACF;;AAED,WAAK8C,WAAL,CAAiB9C,KAAjB,EAAwB6B,QAAxB;AACD;AAED;AACF;AACA;;;;8CAC4B7B,K,EAAOgB,K,EAAO;AACtC,UAAI,EAAEhB,KAAK,YAAYnD,QAAnB,CAAJ,EAAkC;AAChC;AACD;;AAED,UAAImE,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,iBAAhC,EAAmDA,KAAK,CAAC+C,eAAzD;;AACA/C,QAAAA,KAAK,CAACgD,kBAAN,CAAyB,CAAzB;AACD,OAHD,MAGO;AACL,YAAI,KAAKzB,iBAAL,CAAuBvB,KAAvB,EAA8B,iBAA9B,CAAJ,EAAsD;AACpDA,UAAAA,KAAK,CAACgD,kBAAN,CAAyB,KAAKxB,iBAAL,CAAuBxB,KAAvB,EAA8B,iBAA9B,CAAzB;AACD;AACF;AACF;AAED;AACF;AACA;;;;mDACiCA,K,EAAOgB,K,EAAO;AAC3C,UAAI,EAAEhB,KAAK,YAAYhD,gBAAnB,CAAJ,EAA0C;AACxC;AACD;;AAED,UAAIgE,KAAJ,EAAW;AACT,aAAKE,mBAAL,CAAyBlB,KAAzB,EAAgC,SAAhC,EAA2CA,KAAK,CAACiD,OAAjD;;AACAjD,QAAAA,KAAK,CAACkD,UAAN,CAAiB,KAAjB;AACD,OAHD,MAGO;AACL,YAAI,KAAK3B,iBAAL,CAAuBvB,KAAvB,EAA8B,SAA9B,CAAJ,EAA8C;AAC5CA,UAAAA,KAAK,CAACkD,UAAN,CAAiB,KAAK1B,iBAAL,CAAuBxB,KAAvB,EAA8B,SAA9B,CAAjB;AACD;AACF;AACF;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;4CAC0BA,K,EAAOgB,K,EAAO;AACpC,UAAIhB,KAAK,CAACiB,MAAN,YAAwB9D,WAA5B,EAAyC;AACvC;AACD;;AAED,UAAI0E,QAAQ,GAAG,KAAKc,WAAL,CAAiB3C,KAAjB,CAAf;;AACA,UAAIgB,KAAK,IAAIa,QAAQ,CAACsB,OAAT,KAAqB,CAAlC,EAAqC;AACnC,aAAKjC,mBAAL,CAAyBlB,KAAzB,EAAgC,SAAhC,EAA2C6B,QAAQ,CAACsB,OAApD;;AACAtB,QAAAA,QAAQ,CAACsB,OAAT,GAAmB,CAAnB;AACD,OAHD,MAGO,IAAI,CAACnC,KAAL,EAAY;AACjB,YAAI,KAAKO,iBAAL,CAAuBvB,KAAvB,EAA8B,SAA9B,CAAJ,EAA8C;AAC5C6B,UAAAA,QAAQ,CAACsB,OAAT,GAAmB,KAAK3B,iBAAL,CAAuBxB,KAAvB,EAA8B,SAA9B,CAAnB;AACD;AACF;;AAED,WAAK8C,WAAL,CAAiB9C,KAAjB,EAAwB6B,QAAxB;AACD;AAED;;;;sCAEkBuB,K,EAAO;AACvB,UAAI,KAAKC,KAAL,KAAenG,iBAAiB,CAACM,eAAlB,CAAkCC,MAAjD,KAA4D2F,KAAK,CAACE,YAAN,KAAuB,QAAvB,IAAmCF,KAAK,CAACE,YAAN,KAAuB,UAAtH,CAAJ,EAAuI;AACrI,YAAIC,SAAS,GAAGhH,MAAM,CAACiH,IAAP,CAAYJ,KAAK,CAACK,QAAlB,EAA4BL,KAAK,CAACM,QAAlC,CAAhB;AACAH,QAAAA,SAAS,CAACrD,OAAV,CAAkB,UAASF,KAAT,EAAgB;AAChCA,UAAAA,KAAK,CAACD,WAAN,CAAkB,KAAKY,gBAAL,CAAsB7C,IAAtB,CAA2B,IAA3B,CAAlB;AACD,SAFiB,CAEhBA,IAFgB,CAEX,IAFW,CAAlB;AAGD;AACF;;;;EA/VoDb,iB;;gBAAlCI,yB,wBAcS;AAC1BqB,EAAAA,uBAAuB,EAAE,sBADC;AAE1BE,EAAAA,qBAAqB,EAAE,oBAFG;AAG1BE,EAAAA,gBAAgB,EAAE,iBAHQ;AAI1BE,EAAAA,sBAAsB,EAAE,qBAJE;AAK1BE,EAAAA,iBAAiB,EAAE,kBALO;AAM1BE,EAAAA,kBAAkB,EAAE,mBANM;AAO1BE,EAAAA,iBAAiB,EAAE,iBAPO;AAQ1BE,EAAAA,uBAAuB,EAAE,sBARC;AAS1BE,EAAAA,cAAc,EAAE;AATU,C;;SAdTrC,yB","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {\n  arrays,\n  Button,\n  CheckBoxField,\n  CompositeField,\n  FormField,\n  GridData,\n  GroupBox,\n  HtmlEnvironment,\n  LabelField,\n  PlaceholderField,\n  ResponsiveHandler,\n  ResponsiveManager,\n  SequenceBox,\n  TreeVisitResult\n} from '../index';\n\nexport default class GroupBoxResponsiveHandler extends ResponsiveHandler {\n\n  constructor() {\n    super();\n\n    this._initDefaults();\n    this.allowedStates = [ResponsiveManager.ResponsiveState.NORMAL, ResponsiveManager.ResponsiveState.CONDENSED, ResponsiveManager.ResponsiveState.COMPACT];\n\n    // Event handlers\n    this._formFieldAddedHandler = this._onFormFieldAdded.bind(this);\n    this._compositeFields = [];\n    this._htmlPropertyChangeHandler = this._onHtmlEnvironmenPropertyChange.bind(this);\n  }\n\n  static TransformationType = {\n    LABEL_POSITION_ON_FIELD: 'labelPositionOnField',\n    LABEL_POSITION_ON_TOP: 'labelPositionOnTop',\n    LABEL_VISIBILITY: 'labelVisibility',\n    STATUS_POSITION_ON_TOP: 'statusPositionOnTop',\n    STATUS_VISIBILITY: 'statusVisibility',\n    VERTICAL_ALIGNMENT: 'verticalAlignment',\n    GRID_COLUMN_COUNT: 'gridColumnCount',\n    HIDE_PLACE_HOLDER_FIELD: 'hidePlaceHolderField',\n    FIELD_SCALABLE: 'fieldScalable'\n  };\n\n  _initDefaults() {\n    this.compactThreshold = HtmlEnvironment.get().formColumnWidth;\n  }\n\n  _onHtmlEnvironmenPropertyChange() {\n    this._initDefaults();\n  }\n\n  /**\n   * @Override\n   */\n  init(model) {\n    super.init(model);\n\n    var transformationType = GroupBoxResponsiveHandler.TransformationType;\n    var responsiveState = ResponsiveManager.ResponsiveState;\n\n    this._registerTransformation(transformationType.LABEL_POSITION_ON_FIELD, this._transformLabelPositionOnField);\n    this._registerTransformation(transformationType.LABEL_POSITION_ON_TOP, this._transformLabelPositionOnTop);\n    this._registerTransformation(transformationType.LABEL_VISIBILITY, this._transformLabelVisibility);\n    this._registerTransformation(transformationType.STATUS_POSITION_ON_TOP, this._transformStatusPosition);\n    this._registerTransformation(transformationType.STATUS_VISIBILITY, this._transformStatusVisibility);\n    this._registerTransformation(transformationType.VERTICAL_ALIGNMENT, this._transformVerticalAlignment);\n    this._registerTransformation(transformationType.GRID_COLUMN_COUNT, this._transformGridColumnCount);\n    this._registerTransformation(transformationType.HIDE_PLACE_HOLDER_FIELD, this._transformHidePlaceHolderField);\n    this._registerTransformation(transformationType.FIELD_SCALABLE, this._transformFieldScalable);\n\n    this._enableTransformation(responsiveState.CONDENSED, transformationType.LABEL_POSITION_ON_TOP);\n    this._enableTransformation(responsiveState.CONDENSED, transformationType.LABEL_VISIBILITY);\n    this._enableTransformation(responsiveState.CONDENSED, transformationType.VERTICAL_ALIGNMENT);\n\n    this._enableTransformation(responsiveState.COMPACT, transformationType.LABEL_POSITION_ON_TOP);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.LABEL_VISIBILITY);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.STATUS_POSITION_ON_TOP);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.STATUS_VISIBILITY);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.VERTICAL_ALIGNMENT);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.GRID_COLUMN_COUNT);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.HIDE_PLACE_HOLDER_FIELD);\n    this._enableTransformation(responsiveState.COMPACT, transformationType.FIELD_SCALABLE);\n\n    HtmlEnvironment.get().on('propertyChange', this._htmlPropertyChangeHandler);\n    this.widget.visitFields(function(field) {\n      if (field instanceof CompositeField) {\n        field.on('propertyChange', this._formFieldAddedHandler);\n        this._compositeFields.push(field);\n      }\n    }.bind(this));\n  }\n\n  /**\n   * @Override\n   */\n  destroy() {\n    super.destroy();\n\n    this._compositeFields.forEach(function(compositeField) {\n      compositeField.off('propertyChange', this._formFieldAddedHandler);\n    }.bind(this));\n\n    HtmlEnvironment.get().off('propertyChange', this._htmlPropertyChangeHandler);\n  }\n\n  /**\n   * @Override\n   */\n  active() {\n    return this.widget.responsive;\n  }\n\n  /**\n   * @Override\n   */\n  getCondensedThreshold() {\n    if (this.condensedThreshold > 0) {\n      return this.condensedThreshold;\n    }\n\n    return this.widget.htmlComp.prefSize({\n      widthOnly: true\n    }).width;\n  }\n\n  /**\n   * @Override\n   */\n  _transform() {\n    this.widget.visitFields(this._transformWidget.bind(this));\n  }\n\n  /**\n   * @Override\n   */\n  _transformWidget(widget) {\n    // skip group boxes with responsiveness set.\n    if (widget !== this.widget && widget instanceof GroupBox && widget.responsive !== null) {\n      return TreeVisitResult.SKIP_SUBTREE;\n    }\n\n    // skip everything that is not a form field.\n    if (!(widget instanceof FormField)) {\n      return;\n    }\n\n    // suppress a revalidate of the layout tree, since setLabelPosition would trigger it.\n    var htmlParent;\n    if (widget.htmlComp) {\n      widget.htmlComp.suppressInvalidate = true;\n      htmlParent = widget.htmlComp.getParent();\n      if (htmlParent) {\n        htmlParent.suppressInvalidate = true;\n      }\n    }\n\n    super._transformWidget(widget);\n\n    if (widget.htmlComp) {\n      widget.htmlComp.suppressInvalidate = false;\n    }\n    if (htmlParent) {\n      htmlParent.suppressInvalidate = false;\n    }\n  }\n\n  /* --- TRANSFORMATIONS ------------------------------------------------------------- */\n\n  /**\n   * Label Position -> ON_FIELD\n   */\n  _transformLabelPositionOnField(field, apply) {\n    if (field.parent instanceof SequenceBox ||\n      field instanceof CheckBoxField ||\n      field instanceof LabelField) {\n      return;\n    }\n\n    if (apply) {\n      this._storeFieldProperty(field, 'labelPosition', field.labelPosition);\n      field.setLabelPosition(FormField.LabelPosition.ON_FIELD);\n    } else {\n      if (this._hasFieldProperty(field, 'labelPosition')) {\n        field.setLabelPosition(this._getFieldProperty(field, 'labelPosition'));\n      }\n    }\n  }\n\n  /**\n   * Label Position -> ON_TOP\n   */\n  _transformLabelPositionOnTop(field, apply) {\n    if (field.parent instanceof SequenceBox ||\n      field instanceof CheckBoxField ||\n      field instanceof LabelField ||\n      field.labelPosition === FormField.LabelPosition.ON_FIELD) {\n      return;\n    }\n\n    if (apply) {\n      this._storeFieldProperty(field, 'labelPosition', field.labelPosition);\n      field.setLabelPosition(FormField.LabelPosition.TOP);\n    } else {\n      if (this._hasFieldProperty(field, 'labelPosition')) {\n        field.setLabelPosition(this._getFieldProperty(field, 'labelPosition'));\n      }\n    }\n  }\n\n  /**\n   * Label visibility\n   */\n  _transformLabelVisibility(field, apply) {\n    if (!(field instanceof CheckBoxField)) {\n      return;\n    }\n\n    if (apply) {\n      this._storeFieldProperty(field, 'labelVisible', field.labelVisible);\n      field.setLabelVisible(false);\n    } else {\n      if (this._hasFieldProperty(field, 'labelVisible')) {\n        field.setLabelVisible(this._getFieldProperty(field, 'labelVisible'));\n      }\n    }\n  }\n\n  // Scoutjs specific method. This methods will be overridden by GroupBoxAdapter for scout classic case.\n  getGridData(field) {\n    return new GridData(field.gridDataHints);\n  }\n\n  // Scoutjs specific method. This methods will be overridden by GroupBoxAdapter for scout classic case.\n  setGridData(field, gridData) {\n    field.setGridDataHints(gridData);\n  }\n\n  /**\n   * Status position\n   */\n  _transformStatusPosition(field, apply) {\n    if (apply) {\n      this._storeFieldProperty(field, 'statusPosition', field.statusPosition);\n      field.setStatusPosition(FormField.StatusPosition.TOP);\n    } else {\n      if (this._hasFieldProperty(field, 'statusPosition')) {\n        field.setStatusPosition(this._getFieldProperty(field, 'statusPosition'));\n      }\n    }\n  }\n\n  /**\n   * Status visibility\n   */\n  _transformStatusVisibility(field, apply) {\n    if (apply) {\n      this._storeFieldProperty(field, 'statusVisible', field.statusVisible);\n      field.setStatusVisible(false);\n    } else {\n      if (this._hasFieldProperty(field, 'statusVisible')) {\n        field.setStatusVisible(this._getFieldProperty(field, 'statusVisible'));\n      }\n    }\n  }\n\n  /**\n   * Vertical alignment\n   */\n  _transformVerticalAlignment(field, apply) {\n    var isDefaultButton = field instanceof Button && field.displayStyle === Button.DisplayStyle.DEFAULT;\n    var isCheckbox = field instanceof CheckBoxField;\n    var isSingleHeightOnFieldLabelField = field.labelPosition === FormField.LabelPosition.ON_FIELD && field.gridData && field.gridData.h === 1;\n\n    if (!(isDefaultButton || isCheckbox || isSingleHeightOnFieldLabelField) ||\n      !field.gridData) {\n      return;\n    }\n\n    var gridData = this.getGridData(field);\n    if (apply) {\n      this._storeFieldProperty(field, 'fillVertical', gridData.fillVertical);\n      this._storeFieldProperty(field, 'verticalAlignment', gridData.verticalAlignment);\n      gridData.fillVertical = false;\n      gridData.verticalAlignment = 1;\n    } else {\n      if (this._hasFieldProperty(field, 'fillVertical')) {\n        gridData.fillVertical = this._getFieldProperty(field, 'fillVertical');\n      }\n      if (this._hasFieldProperty(field, 'verticalAlignment')) {\n        gridData.verticalAlignment = this._getFieldProperty(field, 'verticalAlignment');\n      }\n    }\n\n    this.setGridData(field, gridData);\n  }\n\n  /**\n   * Column count\n   */\n  _transformGridColumnCount(field, apply) {\n    if (!(field instanceof GroupBox)) {\n      return;\n    }\n\n    if (apply) {\n      this._storeFieldProperty(field, 'gridColumnCount', field.gridColumnCount);\n      field.setGridColumnCount(1);\n    } else {\n      if (this._hasFieldProperty(field, 'gridColumnCount')) {\n        field.setGridColumnCount(this._getFieldProperty(field, 'gridColumnCount'));\n      }\n    }\n  }\n\n  /**\n   * Hide placeholder field\n   */\n  _transformHidePlaceHolderField(field, apply) {\n    if (!(field instanceof PlaceholderField)) {\n      return;\n    }\n\n    if (apply) {\n      this._storeFieldProperty(field, 'visible', field.visible);\n      field.setVisible(false);\n    } else {\n      if (this._hasFieldProperty(field, 'visible')) {\n        field.setVisible(this._getFieldProperty(field, 'visible'));\n      }\n    }\n  }\n\n  /**\n   * GroupBox: Makes sure weightX is set to 1 which makes the field scalable.\n   *\n   * Reason:<br>\n   * The width of the field should be adjusted according to the display width, otherwise it may be too big to be\n   * displayed. <br>\n   * Additionally, since we use a one column layout, setting weightX to 0 might destroy the layout because it affects\n   * all the fields in the groupBox.\n   */\n  _transformFieldScalable(field, apply) {\n    if (field.parent instanceof SequenceBox) {\n      return;\n    }\n\n    var gridData = this.getGridData(field);\n    if (apply && gridData.weightX === 0) {\n      this._storeFieldProperty(field, 'weightX', gridData.weightX);\n      gridData.weightX = 1;\n    } else if (!apply) {\n      if (this._hasFieldProperty(field, 'weightX')) {\n        gridData.weightX = this._getFieldProperty(field, 'weightX');\n      }\n    }\n\n    this.setGridData(field, gridData);\n  }\n\n  /* --- HANDLERS ------------------------------------------------------------- */\n\n  _onFormFieldAdded(event) {\n    if (this.state !== ResponsiveManager.ResponsiveState.NORMAL && (event.propertyName === 'fields' || event.propertyName === 'tabItems')) {\n      var newFields = arrays.diff(event.newValue, event.oldValue);\n      newFields.forEach(function(field) {\n        field.visitFields(this._transformWidget.bind(this));\n      }.bind(this));\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}