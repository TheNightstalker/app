{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, HtmlComponent, MenuBar, MenubarBoxLayout, Widget } from '../../index';\n\nvar MenubarBox = /*#__PURE__*/function (_Widget) {\n  _inherits(MenubarBox, _Widget);\n\n  var _super = _createSuper(MenubarBox);\n\n  function MenubarBox() {\n    var _this;\n\n    _classCallCheck(this, MenubarBox);\n\n    _this = _super.call(this);\n    _this.menuItems = [];\n    _this.tooltipPosition = MenuBar.Position.TOP;\n\n    _this._addWidgetProperties('menuItems');\n\n    _this._menuItemPropertyChangeHandler = _this._onMenuItemPropertyChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MenubarBox, [{\n    key: \"_destroy\",\n    value: function _destroy() {\n      _get(_getPrototypeOf(MenubarBox.prototype), \"_destroy\", this).call(this);\n\n      this._removeMenuHandlers();\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this.$container = this.$parent.appendDiv('menubox');\n      this.htmlComp = HtmlComponent.install(this.$container, this.session);\n      this.htmlComp.setLayout(new MenubarBoxLayout(this));\n    }\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      _get(_getPrototypeOf(MenubarBox.prototype), \"_renderProperties\", this).call(this);\n\n      this._renderMenuItems();\n    }\n    /**\n     * @override Widget.js\n     */\n\n  }, {\n    key: \"_remove\",\n    value: function _remove() {\n      this._removeMenuItems();\n\n      _get(_getPrototypeOf(MenubarBox.prototype), \"_remove\", this).call(this);\n    }\n  }, {\n    key: \"setMenuItems\",\n    value: function setMenuItems(menuItems) {\n      menuItems = arrays.ensure(menuItems);\n\n      if (!arrays.equals(this.menuItems, menuItems)) {\n        this.setProperty('menuItems', menuItems);\n      }\n    }\n  }, {\n    key: \"_setMenuItems\",\n    value: function _setMenuItems(menuItems) {\n      // remove property listeners of old menu items.\n      this._removeMenuHandlers();\n\n      this._setProperty('menuItems', menuItems); // add property listener of new menus\n\n\n      this._addMenuHandlers();\n\n      this._updateTooltipPosition();\n    }\n  }, {\n    key: \"_removeMenuItems\",\n    value: function _removeMenuItems() {\n      this._removeMenuHandlers();\n\n      this.menuItems.forEach(function (item) {\n        item.overflow = false;\n        item.remove();\n      });\n    }\n  }, {\n    key: \"_renderMenuItems\",\n    value: function _renderMenuItems() {\n      this.menuItems.forEach(function (item) {\n        item.render(this.$container);\n        item.$container.addClass('menubar-item');\n      }.bind(this));\n\n      if (!this.rendering) {\n        this.invalidateLayoutTree();\n      }\n    }\n  }, {\n    key: \"_addMenuHandlers\",\n    value: function _addMenuHandlers() {\n      this.menuItems.forEach(function (item) {\n        item.off('propertyChange', this._menuItemPropertyChangeHandler);\n      }, this);\n    }\n  }, {\n    key: \"_removeMenuHandlers\",\n    value: function _removeMenuHandlers() {\n      this.menuItems.forEach(function (item) {\n        item.off('propertyChange', this._menuItemPropertyChangeHandler);\n      }, this);\n    }\n  }, {\n    key: \"_renderVisible\",\n    value: function _renderVisible() {\n      _get(_getPrototypeOf(MenubarBox.prototype), \"_renderVisible\", this).call(this);\n\n      this.revalidateLayout();\n    }\n  }, {\n    key: \"_onMenuItemPropertyChange\",\n    value: function _onMenuItemPropertyChange(event) {\n      if (event.propertyName === 'visible') {\n        this.setVisible(this.menuItems.some(function (m) {\n          return m.visible && !m.ellipsis;\n        }));\n      }\n    }\n  }, {\n    key: \"setTooltipPosition\",\n    value: function setTooltipPosition(position) {\n      this.setProperty('tooltipPosition', position);\n    }\n  }, {\n    key: \"_setTooltipPosition\",\n    value: function _setTooltipPosition(position) {\n      this._setProperty('tooltipPosition', position);\n\n      this._updateTooltipPosition();\n    }\n  }, {\n    key: \"_updateTooltipPosition\",\n    value: function _updateTooltipPosition() {\n      this.menuItems.forEach(function (item) {\n        item.setTooltipPosition(this.tooltipPosition);\n      }, this);\n    }\n  }]);\n\n  return MenubarBox;\n}(Widget);\n\nexport { MenubarBox as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/menu/menubar/MenubarBox.js"],"names":["arrays","HtmlComponent","MenuBar","MenubarBoxLayout","Widget","MenubarBox","menuItems","tooltipPosition","Position","TOP","_addWidgetProperties","_menuItemPropertyChangeHandler","_onMenuItemPropertyChange","bind","_removeMenuHandlers","$container","$parent","appendDiv","htmlComp","install","session","setLayout","_renderMenuItems","_removeMenuItems","ensure","equals","setProperty","_setProperty","_addMenuHandlers","_updateTooltipPosition","forEach","item","overflow","remove","render","addClass","rendering","invalidateLayoutTree","off","revalidateLayout","event","propertyName","setVisible","some","m","visible","ellipsis","position","setTooltipPosition"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, HtmlComponent, MenuBar, MenubarBoxLayout, Widget} from '../../index';\n\nexport default class MenubarBox extends Widget {\n\n  constructor() {\n    super();\n    this.menuItems = [];\n    this.tooltipPosition = MenuBar.Position.TOP;\n    this._addWidgetProperties('menuItems');\n    this._menuItemPropertyChangeHandler = this._onMenuItemPropertyChange.bind(this);\n  }\n\n  _destroy() {\n    super._destroy();\n    this._removeMenuHandlers();\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('menubox');\n\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new MenubarBoxLayout(this));\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderMenuItems();\n  }\n\n  /**\n   * @override Widget.js\n   */\n  _remove() {\n    this._removeMenuItems();\n    super._remove();\n  }\n\n  setMenuItems(menuItems) {\n    menuItems = arrays.ensure(menuItems);\n    if (!arrays.equals(this.menuItems, menuItems)) {\n      this.setProperty('menuItems', menuItems);\n    }\n  }\n\n  _setMenuItems(menuItems) {\n    // remove property listeners of old menu items.\n    this._removeMenuHandlers();\n\n    this._setProperty('menuItems', menuItems);\n    // add property listener of new menus\n    this._addMenuHandlers();\n    this._updateTooltipPosition();\n  }\n\n  _removeMenuItems() {\n    this._removeMenuHandlers();\n    this.menuItems.forEach(function(item) {\n      item.overflow = false;\n      item.remove();\n    });\n  }\n\n  _renderMenuItems() {\n    this.menuItems.forEach(function(item) {\n      item.render(this.$container);\n      item.$container.addClass('menubar-item');\n    }.bind(this));\n\n    if (!this.rendering) {\n      this.invalidateLayoutTree();\n    }\n  }\n\n  _addMenuHandlers() {\n    this.menuItems.forEach(function(item) {\n      item.off('propertyChange', this._menuItemPropertyChangeHandler);\n    }, this);\n  }\n\n  _removeMenuHandlers() {\n    this.menuItems.forEach(function(item) {\n      item.off('propertyChange', this._menuItemPropertyChangeHandler);\n    }, this);\n  }\n\n  _renderVisible() {\n    super._renderVisible();\n    this.revalidateLayout();\n  }\n\n  _onMenuItemPropertyChange(event) {\n    if (event.propertyName === 'visible') {\n      this.setVisible(this.menuItems.some(function(m) {\n        return m.visible && !m.ellipsis;\n      }));\n    }\n  }\n\n  setTooltipPosition(position) {\n    this.setProperty('tooltipPosition', position);\n  }\n\n  _setTooltipPosition(position) {\n    this._setProperty('tooltipPosition', position);\n    this._updateTooltipPosition();\n  }\n\n  _updateTooltipPosition() {\n    this.menuItems.forEach(function(item) {\n      item.setTooltipPosition(this.tooltipPosition);\n    }, this);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}