{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, PopupWithHead, TagBar, TagFieldDeleteKeyStroke, TagFieldNavigationKeyStroke } from '../index';\n\nvar TagBarOverflowPopup = /*#__PURE__*/function (_PopupWithHead) {\n  _inherits(TagBarOverflowPopup, _PopupWithHead);\n\n  var _super = _createSuper(TagBarOverflowPopup);\n\n  function TagBarOverflowPopup() {\n    var _this;\n\n    _classCallCheck(this, TagBarOverflowPopup);\n\n    _this = _super.call(this);\n    _this._tagBarPropertyChangeListener = null; // We need not only to return which element receives the initial focus\n    // but we must also prepare this element so it can receive the focus\n\n    _this.initialFocus = function () {\n      return TagBar.firstTagElement(this.$body).setTabbable(true).addClass('focused')[0];\n    };\n\n    return _this;\n  }\n\n  _createClass(TagBarOverflowPopup, [{\n    key: \"_init\",\n    value: function _init(options) {\n      _get(_getPrototypeOf(TagBarOverflowPopup.prototype), \"_init\", this).call(this, options);\n\n      this._tagBarPropertyChangeListener = this._onTagBarPropertyChange.bind(this);\n      this.parent.on('propertyChange', this._tagBarPropertyChangeListener);\n    }\n  }, {\n    key: \"_initKeyStrokeContext\",\n    value: function _initKeyStrokeContext() {\n      _get(_getPrototypeOf(TagBarOverflowPopup.prototype), \"_initKeyStrokeContext\", this).call(this);\n\n      this.keyStrokeContext.registerKeyStrokes([new TagFieldNavigationKeyStroke(this._createFieldAdapter()), new TagFieldDeleteKeyStroke(this._createFieldAdapter())]);\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      this.parent.off('propertyChange', this._tagBarPropertyChangeListener);\n\n      _get(_getPrototypeOf(TagBarOverflowPopup.prototype), \"_destroy\", this).call(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      _get(_getPrototypeOf(TagBarOverflowPopup.prototype), \"_render\", this).call(this);\n\n      this.$body.addClass('tag-overflow-popup');\n\n      this._renderTags();\n    }\n  }, {\n    key: \"_renderTags\",\n    value: function _renderTags() {\n      var tagBar = this.parent;\n      var visibleTags = tagBar.visibleTags();\n      var allTags = arrays.ensure(tagBar.tags);\n      var overflowTags = allTags.filter(function (tagText) {\n        return visibleTags.indexOf(tagText) === -1;\n      });\n\n      var clickHandler = tagBar._onTagClick.bind(tagBar);\n\n      var removeHandler = tagBar._onTagRemoveClick.bind(tagBar);\n\n      TagBar.renderTags(this.$body, overflowTags, tagBar.enabledComputed, clickHandler, removeHandler);\n\n      if (!this.rendering) {\n        this.revalidateLayout();\n      }\n    }\n  }, {\n    key: \"_renderHead\",\n    value: function _renderHead() {\n      _get(_getPrototypeOf(TagBarOverflowPopup.prototype), \"_renderHead\", this).call(this);\n\n      this._copyCssClassToHead('overflow-icon');\n\n      this.$head.removeClass('popup-head menu-item').addClass('tag-overflow-popup-head');\n    }\n  }, {\n    key: \"_focusFirstTagElement\",\n    value: function _focusFirstTagElement() {\n      TagBar.focusFirstTagElement(this.$body);\n    }\n  }, {\n    key: \"_onTagRemoveClick\",\n    value: function _onTagRemoveClick(event) {\n      this.parent._onTagRemoveClick(event);\n    }\n  }, {\n    key: \"_onTagBarPropertyChange\",\n    value: function _onTagBarPropertyChange(event) {\n      if (event.propertyName === 'tags') {\n        var allTags = arrays.ensure(this.parent.tags);\n        var visibleTags = this.parent.visibleTags();\n        var numTags = allTags.length; // close popup when no more tags left or all tags are visible (=no overflow icon)\n\n        if (numTags === 0 || numTags === visibleTags.length) {\n          this.close();\n        } else {\n          this._renderTags();\n\n          this._focusFirstTagElement();\n        }\n      }\n    }\n  }, {\n    key: \"_createFieldAdapter\",\n    value: function _createFieldAdapter() {\n      return TagBarOverflowPopup.createFieldAdapter(this);\n    }\n  }], [{\n    key: \"createFieldAdapter\",\n    value: function createFieldAdapter(field) {\n      return {\n        $container: function $container() {\n          return field.$body;\n        },\n        enabled: function enabled() {\n          return true;\n        },\n        focus: function focus() {},\n        one: function one(p1, p2) {\n          field.one(p1, p2);\n        },\n        off: function off(p1, p2) {\n          field.off(p1, p2);\n        },\n        removeTag: function removeTag(tag) {\n          field.parent.parent.removeTag(tag);\n        }\n      };\n    }\n  }]);\n\n  return TagBarOverflowPopup;\n}(PopupWithHead);\n\nexport { TagBarOverflowPopup as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/tagbar/TagBarOverflowPopup.js"],"names":["arrays","PopupWithHead","TagBar","TagFieldDeleteKeyStroke","TagFieldNavigationKeyStroke","TagBarOverflowPopup","_tagBarPropertyChangeListener","initialFocus","firstTagElement","$body","setTabbable","addClass","options","_onTagBarPropertyChange","bind","parent","on","keyStrokeContext","registerKeyStrokes","_createFieldAdapter","off","_renderTags","tagBar","visibleTags","allTags","ensure","tags","overflowTags","filter","tagText","indexOf","clickHandler","_onTagClick","removeHandler","_onTagRemoveClick","renderTags","enabledComputed","rendering","revalidateLayout","_copyCssClassToHead","$head","removeClass","focusFirstTagElement","event","propertyName","numTags","length","close","_focusFirstTagElement","createFieldAdapter","field","$container","enabled","focus","one","p1","p2","removeTag","tag"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,MAAR,EAAgBC,aAAhB,EAA+BC,MAA/B,EAAuCC,uBAAvC,EAAgEC,2BAAhE,QAAkG,UAAlG;;IAEqBC,mB;;;;;AAEnB,iCAAc;AAAA;;AAAA;;AACZ;AAEA,UAAKC,6BAAL,GAAqC,IAArC,CAHY,CAKZ;AACA;;AACA,UAAKC,YAAL,GAAoB,YAAW;AAC7B,aAAOL,MAAM,CAACM,eAAP,CAAuB,KAAKC,KAA5B,EACJC,WADI,CACQ,IADR,EAEJC,QAFI,CAEK,SAFL,EAEgB,CAFhB,CAAP;AAGD,KAJD;;AAPY;AAYb;;;;0BAEKC,O,EAAS;AACb,qFAAYA,OAAZ;;AACA,WAAKN,6BAAL,GAAqC,KAAKO,uBAAL,CAA6BC,IAA7B,CAAkC,IAAlC,CAArC;AACA,WAAKC,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,KAAKV,6BAAtC;AACD;;;4CAEuB;AACtB;;AACA,WAAKW,gBAAL,CAAsBC,kBAAtB,CAAyC,CACvC,IAAId,2BAAJ,CAAgC,KAAKe,mBAAL,EAAhC,CADuC,EAEvC,IAAIhB,uBAAJ,CAA4B,KAAKgB,mBAAL,EAA5B,CAFuC,CAAzC;AAID;;;+BAEU;AACT,WAAKJ,MAAL,CAAYK,GAAZ,CAAgB,gBAAhB,EAAkC,KAAKd,6BAAvC;;AACA;AACD;;;8BAES;AACR;;AAEA,WAAKG,KAAL,CAAWE,QAAX,CAAoB,oBAApB;;AACA,WAAKU,WAAL;AACD;;;kCAEa;AACZ,UAAIC,MAAM,GAAG,KAAKP,MAAlB;AACA,UAAIQ,WAAW,GAAGD,MAAM,CAACC,WAAP,EAAlB;AACA,UAAIC,OAAO,GAAGxB,MAAM,CAACyB,MAAP,CAAcH,MAAM,CAACI,IAArB,CAAd;AACA,UAAIC,YAAY,GAAGH,OAAO,CAACI,MAAR,CAAe,UAASC,OAAT,EAAkB;AAClD,eAAON,WAAW,CAACO,OAAZ,CAAoBD,OAApB,MAAiC,CAAC,CAAzC;AACD,OAFkB,CAAnB;;AAIA,UAAIE,YAAY,GAAGT,MAAM,CAACU,WAAP,CAAmBlB,IAAnB,CAAwBQ,MAAxB,CAAnB;;AACA,UAAIW,aAAa,GAAGX,MAAM,CAACY,iBAAP,CAAyBpB,IAAzB,CAA8BQ,MAA9B,CAApB;;AACApB,MAAAA,MAAM,CAACiC,UAAP,CAAkB,KAAK1B,KAAvB,EAA8BkB,YAA9B,EAA4CL,MAAM,CAACc,eAAnD,EAAoEL,YAApE,EAAkFE,aAAlF;;AAEA,UAAI,CAAC,KAAKI,SAAV,EAAqB;AACnB,aAAKC,gBAAL;AACD;AAEF;;;kCAEa;AACZ;;AAEA,WAAKC,mBAAL,CAAyB,eAAzB;;AACA,WAAKC,KAAL,CACGC,WADH,CACe,sBADf,EAEG9B,QAFH,CAEY,yBAFZ;AAGD;;;4CAEuB;AACtBT,MAAAA,MAAM,CAACwC,oBAAP,CAA4B,KAAKjC,KAAjC;AACD;;;sCAEiBkC,K,EAAO;AACvB,WAAK5B,MAAL,CAAYmB,iBAAZ,CAA8BS,KAA9B;AACD;;;4CAEuBA,K,EAAO;AAC7B,UAAIA,KAAK,CAACC,YAAN,KAAuB,MAA3B,EAAmC;AACjC,YAAIpB,OAAO,GAAGxB,MAAM,CAACyB,MAAP,CAAc,KAAKV,MAAL,CAAYW,IAA1B,CAAd;AACA,YAAIH,WAAW,GAAG,KAAKR,MAAL,CAAYQ,WAAZ,EAAlB;AACA,YAAIsB,OAAO,GAAGrB,OAAO,CAACsB,MAAtB,CAHiC,CAIjC;;AACA,YAAID,OAAO,KAAK,CAAZ,IAAiBA,OAAO,KAAKtB,WAAW,CAACuB,MAA7C,EAAqD;AACnD,eAAKC,KAAL;AACD,SAFD,MAEO;AACL,eAAK1B,WAAL;;AACA,eAAK2B,qBAAL;AACD;AACF;AACF;;;0CAEqB;AACpB,aAAO3C,mBAAmB,CAAC4C,kBAApB,CAAuC,IAAvC,CAAP;AACD;;;uCAEyBC,K,EAAO;AAC/B,aAAO;AACLC,QAAAA,UAAU,EAAE,sBAAW;AACrB,iBAAOD,KAAK,CAACzC,KAAb;AACD,SAHI;AAKL2C,QAAAA,OAAO,EAAE,mBAAW;AAClB,iBAAO,IAAP;AACD,SAPI;AASLC,QAAAA,KAAK,EAAE,iBAAW,CACjB,CAVI;AAYLC,QAAAA,GAAG,EAAE,aAASC,EAAT,EAAaC,EAAb,EAAiB;AACpBN,UAAAA,KAAK,CAACI,GAAN,CAAUC,EAAV,EAAcC,EAAd;AACD,SAdI;AAgBLpC,QAAAA,GAAG,EAAE,aAASmC,EAAT,EAAaC,EAAb,EAAiB;AACpBN,UAAAA,KAAK,CAAC9B,GAAN,CAAUmC,EAAV,EAAcC,EAAd;AACD,SAlBI;AAoBLC,QAAAA,SAAS,EAAE,mBAASC,GAAT,EAAc;AACvBR,UAAAA,KAAK,CAACnC,MAAN,CAAaA,MAAb,CAAoB0C,SAApB,CAA8BC,GAA9B;AACD;AAtBI,OAAP;AAwBD;;;;EAzH8CzD,a;;SAA5BI,mB","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, PopupWithHead, TagBar, TagFieldDeleteKeyStroke, TagFieldNavigationKeyStroke} from '../index';\n\nexport default class TagBarOverflowPopup extends PopupWithHead {\n\n  constructor() {\n    super();\n\n    this._tagBarPropertyChangeListener = null;\n\n    // We need not only to return which element receives the initial focus\n    // but we must also prepare this element so it can receive the focus\n    this.initialFocus = function() {\n      return TagBar.firstTagElement(this.$body)\n        .setTabbable(true)\n        .addClass('focused')[0];\n    };\n  }\n\n  _init(options) {\n    super._init(options);\n    this._tagBarPropertyChangeListener = this._onTagBarPropertyChange.bind(this);\n    this.parent.on('propertyChange', this._tagBarPropertyChangeListener);\n  }\n\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    this.keyStrokeContext.registerKeyStrokes([\n      new TagFieldNavigationKeyStroke(this._createFieldAdapter()),\n      new TagFieldDeleteKeyStroke(this._createFieldAdapter())\n    ]);\n  }\n\n  _destroy() {\n    this.parent.off('propertyChange', this._tagBarPropertyChangeListener);\n    super._destroy();\n  }\n\n  _render() {\n    super._render();\n\n    this.$body.addClass('tag-overflow-popup');\n    this._renderTags();\n  }\n\n  _renderTags() {\n    var tagBar = this.parent;\n    var visibleTags = tagBar.visibleTags();\n    var allTags = arrays.ensure(tagBar.tags);\n    var overflowTags = allTags.filter(function(tagText) {\n      return visibleTags.indexOf(tagText) === -1;\n    });\n\n    var clickHandler = tagBar._onTagClick.bind(tagBar);\n    var removeHandler = tagBar._onTagRemoveClick.bind(tagBar);\n    TagBar.renderTags(this.$body, overflowTags, tagBar.enabledComputed, clickHandler, removeHandler);\n\n    if (!this.rendering) {\n      this.revalidateLayout();\n    }\n\n  }\n\n  _renderHead() {\n    super._renderHead();\n\n    this._copyCssClassToHead('overflow-icon');\n    this.$head\n      .removeClass('popup-head menu-item')\n      .addClass('tag-overflow-popup-head');\n  }\n\n  _focusFirstTagElement() {\n    TagBar.focusFirstTagElement(this.$body);\n  }\n\n  _onTagRemoveClick(event) {\n    this.parent._onTagRemoveClick(event);\n  }\n\n  _onTagBarPropertyChange(event) {\n    if (event.propertyName === 'tags') {\n      var allTags = arrays.ensure(this.parent.tags);\n      var visibleTags = this.parent.visibleTags();\n      var numTags = allTags.length;\n      // close popup when no more tags left or all tags are visible (=no overflow icon)\n      if (numTags === 0 || numTags === visibleTags.length) {\n        this.close();\n      } else {\n        this._renderTags();\n        this._focusFirstTagElement();\n      }\n    }\n  }\n\n  _createFieldAdapter() {\n    return TagBarOverflowPopup.createFieldAdapter(this);\n  }\n\n  static createFieldAdapter(field) {\n    return {\n      $container: function() {\n        return field.$body;\n      },\n\n      enabled: function() {\n        return true;\n      },\n\n      focus: function() {\n      },\n\n      one: function(p1, p2) {\n        field.one(p1, p2);\n      },\n\n      off: function(p1, p2) {\n        field.off(p1, p2);\n      },\n\n      removeTag: function(tag) {\n        field.parent.parent.removeTag(tag);\n      }\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"module"}