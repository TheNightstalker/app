{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { ContextMenuPopup, Device, FormMenuActionKeyStroke, GroupBox, Menu, scout } from '../index';\n\nvar FormMenu = /*#__PURE__*/function (_Menu) {\n  _inherits(FormMenu, _Menu);\n\n  var _super = _createSuper(FormMenu);\n\n  function FormMenu() {\n    var _this;\n\n    _classCallCheck(this, FormMenu);\n\n    _this = _super.call(this);\n    _this.form;\n    _this.toggleAction = true;\n\n    _this._addWidgetProperties('form');\n\n    return _this;\n  }\n\n  _createClass(FormMenu, [{\n    key: \"_init\",\n    value: function _init(model) {\n      _get(_getPrototypeOf(FormMenu.prototype), \"_init\", this).call(this, model);\n\n      if (!this.popupStyle) {\n        if (this.session.userAgent.deviceType === Device.Type.MOBILE) {\n          this.popupStyle = FormMenu.PopupStyle.MOBILE;\n        } else {\n          this.popupStyle = FormMenu.PopupStyle.DEFAULT;\n        }\n      }\n    }\n  }, {\n    key: \"_renderForm\",\n    value: function _renderForm() {\n      if (!this.rendered) {\n        // Don't execute initially since _renderSelected will be executed\n        return;\n      }\n\n      this._renderSelected();\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone(modelOverride, options) {\n      modelOverride = modelOverride || {}; // If the FormMenu is put into a context menu it will be cloned.\n      // Cloning a form is not possible because it may non clonable components (Table, TabBox, etc.) -> exclude\n      // Luckily, it is not necessary to clone it since the form is never shown multiple times at once -> Just use the same instance\n\n      modelOverride.form = this.form;\n      return _get(_getPrototypeOf(FormMenu.prototype), \"clone\", this).call(this, modelOverride, options);\n    }\n  }, {\n    key: \"_addFormRemoveHandler\",\n    value: function _addFormRemoveHandler() {\n      if (!this.form) {\n        return;\n      }\n\n      this.form.one('remove', function (event) {\n        this._onFormRemove(event);\n      }.bind(this));\n    }\n    /**\n     * Called when the popup form is removed (closed). Either by clicking the FormMenu again (toggle), the menu closed or if the Form closed itself.\n     */\n\n  }, {\n    key: \"_onFormRemove\",\n    value: function _onFormRemove(event) {\n      if (!this.selected) {\n        return; // the menu is no longer selected. It was closed by the user (toggle). There is no need to unselect and close the popups\n      }\n\n      if (!this.destroying && !this.removing) {\n        // no need to change the selection state if the widget is destroying.\n        this.setSelected(false);\n      }\n\n      var parentContextMenuPopup = this.findParent(function (p) {\n        return p instanceof ContextMenuPopup;\n      });\n\n      if (parentContextMenuPopup && !(parentContextMenuPopup.destroying || parentContextMenuPopup.removing)) {\n        // only explicitly close the popup if it is not already being closed. Otherwise it is removed twice.\n        parentContextMenuPopup.close();\n      }\n    }\n    /**\n     * @override Menu.js\n     */\n\n  }, {\n    key: \"_openPopup\",\n    value: function _openPopup() {\n      _get(_getPrototypeOf(FormMenu.prototype), \"_openPopup\", this).call(this);\n\n      this._addFormRemoveHandler();\n    }\n    /**\n     * @override Menu.js\n     */\n\n  }, {\n    key: \"_createPopup\",\n    value: function _createPopup() {\n      // Menu bar should always be on the bottom\n      this.form.rootGroupBox.setMenuBarPosition(GroupBox.MenuBarPosition.BOTTOM);\n\n      if (this.popupStyle === FormMenu.PopupStyle.MOBILE) {\n        return scout.create('MobilePopup', {\n          parent: this.session.desktop,\n          // use desktop to make _handleSelectedInEllipsis work (if parent is this and this were not rendered, popup.entryPoint would not work)\n          widget: this.form,\n          title: this.form.title\n        });\n      }\n\n      return scout.create('FormMenuPopup', {\n        parent: this,\n        formMenu: this,\n        horizontalAlignment: this.popupHorizontalAlignment,\n        verticalAlignment: this.popupVerticalAlignment\n      });\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_doActionTogglesPopup\",\n    value: function _doActionTogglesPopup() {\n      return !!this.form;\n    }\n  }, {\n    key: \"_handleSelectedInEllipsis\",\n    value: function _handleSelectedInEllipsis() {\n      if (this.popupStyle !== FormMenu.PopupStyle.MOBILE) {\n        _get(_getPrototypeOf(FormMenu.prototype), \"_handleSelectedInEllipsis\", this).call(this);\n\n        return;\n      }\n\n      if (!this._doActionTogglesPopup()) {\n        return;\n      } // The mobile popup is not atached to a header -> no need to open the parent menu, just show the poupup\n\n\n      if (this.selected) {\n        this._openPopup();\n      } else {\n        this._closePopup();\n      }\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_createActionKeyStroke\",\n    value: function _createActionKeyStroke() {\n      return new FormMenuActionKeyStroke(this);\n    }\n  }]);\n\n  return FormMenu;\n}(Menu);\n\n_defineProperty(FormMenu, \"PopupStyle\", {\n  DEFAULT: 'default',\n  MOBILE: 'mobile'\n});\n\nexport { FormMenu as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/form/FormMenu.js"],"names":["ContextMenuPopup","Device","FormMenuActionKeyStroke","GroupBox","Menu","scout","FormMenu","form","toggleAction","_addWidgetProperties","model","popupStyle","session","userAgent","deviceType","Type","MOBILE","PopupStyle","DEFAULT","rendered","_renderSelected","modelOverride","options","one","event","_onFormRemove","bind","selected","destroying","removing","setSelected","parentContextMenuPopup","findParent","p","close","_addFormRemoveHandler","rootGroupBox","setMenuBarPosition","MenuBarPosition","BOTTOM","create","parent","desktop","widget","title","formMenu","horizontalAlignment","popupHorizontalAlignment","verticalAlignment","popupVerticalAlignment","_doActionTogglesPopup","_openPopup","_closePopup"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {ContextMenuPopup, Device, FormMenuActionKeyStroke, GroupBox, Menu, scout} from '../index';\n\nexport default class FormMenu extends Menu {\n\n  constructor() {\n    super();\n    this.form;\n    this.toggleAction = true;\n    this._addWidgetProperties('form');\n  }\n\n  static PopupStyle = {\n    DEFAULT: 'default',\n    MOBILE: 'mobile'\n  };\n\n  _init(model) {\n    super._init(model);\n\n    if (!this.popupStyle) {\n      if (this.session.userAgent.deviceType === Device.Type.MOBILE) {\n        this.popupStyle = FormMenu.PopupStyle.MOBILE;\n      } else {\n        this.popupStyle = FormMenu.PopupStyle.DEFAULT;\n      }\n    }\n  }\n\n  _renderForm() {\n    if (!this.rendered) {\n      // Don't execute initially since _renderSelected will be executed\n      return;\n    }\n    this._renderSelected();\n  }\n\n  /**\n   * @override\n   */\n  clone(modelOverride, options) {\n    modelOverride = modelOverride || {};\n    // If the FormMenu is put into a context menu it will be cloned.\n    // Cloning a form is not possible because it may non clonable components (Table, TabBox, etc.) -> exclude\n    // Luckily, it is not necessary to clone it since the form is never shown multiple times at once -> Just use the same instance\n    modelOverride.form = this.form;\n    return super.clone(modelOverride, options);\n  }\n\n  _addFormRemoveHandler() {\n    if (!this.form) {\n      return;\n    }\n\n    this.form.one('remove', function(event) {\n      this._onFormRemove(event);\n    }.bind(this));\n  }\n\n  /**\n   * Called when the popup form is removed (closed). Either by clicking the FormMenu again (toggle), the menu closed or if the Form closed itself.\n   */\n  _onFormRemove(event) {\n    if (!this.selected) {\n      return; // the menu is no longer selected. It was closed by the user (toggle). There is no need to unselect and close the popups\n    }\n    if (!this.destroying && !this.removing) {\n      // no need to change the selection state if the widget is destroying.\n      this.setSelected(false);\n    }\n\n    var parentContextMenuPopup = this.findParent(function(p) {\n      return p instanceof ContextMenuPopup;\n    });\n    if (parentContextMenuPopup && !(parentContextMenuPopup.destroying || parentContextMenuPopup.removing)) {\n      // only explicitly close the popup if it is not already being closed. Otherwise it is removed twice.\n      parentContextMenuPopup.close();\n    }\n  }\n\n  /**\n   * @override Menu.js\n   */\n  _openPopup() {\n    super._openPopup();\n    this._addFormRemoveHandler();\n  }\n\n  /**\n   * @override Menu.js\n   */\n  _createPopup() {\n    // Menu bar should always be on the bottom\n    this.form.rootGroupBox.setMenuBarPosition(GroupBox.MenuBarPosition.BOTTOM);\n\n    if (this.popupStyle === FormMenu.PopupStyle.MOBILE) {\n      return scout.create('MobilePopup', {\n        parent: this.session.desktop, // use desktop to make _handleSelectedInEllipsis work (if parent is this and this were not rendered, popup.entryPoint would not work)\n        widget: this.form,\n        title: this.form.title\n      });\n    }\n\n    return scout.create('FormMenuPopup', {\n      parent: this,\n      formMenu: this,\n      horizontalAlignment: this.popupHorizontalAlignment,\n      verticalAlignment: this.popupVerticalAlignment\n    });\n  }\n\n  /**\n   * @override\n   */\n  _doActionTogglesPopup() {\n    return !!this.form;\n  }\n\n  _handleSelectedInEllipsis() {\n    if (this.popupStyle !== FormMenu.PopupStyle.MOBILE) {\n      super._handleSelectedInEllipsis();\n      return;\n    }\n    if (!this._doActionTogglesPopup()) {\n      return;\n    }\n    // The mobile popup is not atached to a header -> no need to open the parent menu, just show the poupup\n    if (this.selected) {\n      this._openPopup();\n    } else {\n      this._closePopup();\n    }\n  }\n\n  /**\n   * @override\n   */\n  _createActionKeyStroke() {\n    return new FormMenuActionKeyStroke(this);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}