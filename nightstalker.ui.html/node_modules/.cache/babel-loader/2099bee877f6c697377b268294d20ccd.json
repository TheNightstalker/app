{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, Form, scout } from '../index';\n/**\n * Controller with functionality to register and render file choosers.\n *\n * The file choosers are put into the list fileChoosers contained in 'displayParent'.\n */\n\nvar FileChooserController = /*#__PURE__*/function () {\n  function FileChooserController(displayParent, session) {\n    _classCallCheck(this, FileChooserController);\n\n    this.displayParent = displayParent;\n    this.session = session;\n  }\n  /**\n   * Adds the given file chooser to this controller and renders it.\n   */\n\n\n  _createClass(FileChooserController, [{\n    key: \"registerAndRender\",\n    value: function registerAndRender(fileChooser) {\n      scout.assertProperty(fileChooser, 'displayParent');\n      this.displayParent.fileChoosers.push(fileChooser);\n\n      this._render(fileChooser);\n    }\n    /**\n     * Removes the given file chooser from this controller and DOM. However, the file chooser's adapter is not destroyed. That only happens once the file chooser is closed.\n     */\n\n  }, {\n    key: \"unregisterAndRemove\",\n    value: function unregisterAndRemove(fileChooser) {\n      if (fileChooser) {\n        arrays.remove(this.displayParent.fileChoosers, fileChooser);\n\n        this._remove(fileChooser);\n      }\n    }\n    /**\n     * Removes all file choosers registered with this controller from DOM.\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      this.displayParent.fileChoosers.forEach(this._remove.bind(this));\n    }\n    /**\n     * Renders all file choosers registered with this controller.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.displayParent.fileChoosers.forEach(function (chooser) {\n        chooser.setDisplayParent(this.displayParent);\n\n        this._render(chooser);\n      }.bind(this));\n    }\n  }, {\n    key: \"_render\",\n    value: function _render(fileChooser) {\n      // missing displayParent (when render is called by reload), use displayParent of FileChooserController\n      if (!fileChooser.displayParent) {\n        fileChooser._setProperty('displayParent', this.displayParent);\n      } // Use parent's function or (if not implemented) our own.\n\n\n      if (this.displayParent.acceptView) {\n        if (!this.displayParent.acceptView(fileChooser)) {\n          return;\n        }\n      } else if (!this.acceptView(fileChooser)) {\n        return;\n      } // Prevent \"Already rendered\" errors --> TODO [7.0] bsh: Remove this hack! Fix it on model if possible. See #162954.\n\n\n      if (fileChooser.rendered) {\n        return;\n      } // Open all file choosers in the center of the desktop, except the ones that belong to a popup-window\n      // Since the file chooser doesn't have a DOM element as parent when render is called, we must find the\n      // entryPoint by using the model.\n\n\n      var $parent;\n\n      if (this.displayParent instanceof Form && this.displayParent.isPopupWindow()) {\n        $parent = this.displayParent.popupWindow.$container;\n      } else {\n        $parent = this.session.desktop.$container;\n      } // start focus tracking if not already started.\n\n\n      fileChooser.setTrackFocus(true);\n      fileChooser.render($parent); // Only display the file chooser if its 'displayParent' is visible to the user.\n\n      if (!this.displayParent.inFront()) {\n        fileChooser.detach();\n      }\n    }\n  }, {\n    key: \"_remove\",\n    value: function _remove(fileChooser) {\n      fileChooser.remove();\n    }\n    /**\n     * Attaches all file choosers to their original DOM parents.\n     * In contrast to 'render', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n     *\n     * This method has no effect if already attached.\n     */\n\n  }, {\n    key: \"attach\",\n    value: function attach() {\n      this.displayParent.fileChoosers.forEach(function (fileChooser) {\n        fileChooser.attach();\n      }, this);\n    }\n    /**\n     * Detaches all file choosers from their DOM parents. Thereby, modality glassPanes are not detached.\n     * In contrast to 'remove', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n     *\n     * This method has no effect if already detached.\n     */\n\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.displayParent.fileChoosers.forEach(function (fileChooser) {\n        fileChooser.detach();\n      }, this);\n    }\n  }, {\n    key: \"acceptView\",\n    value: function acceptView(view) {\n      return this.displayParent.rendered;\n    }\n  }]);\n\n  return FileChooserController;\n}();\n\nexport { FileChooserController as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/filechooser/FileChooserController.js"],"names":["arrays","Form","scout","FileChooserController","displayParent","session","fileChooser","assertProperty","fileChoosers","push","_render","remove","_remove","forEach","bind","chooser","setDisplayParent","_setProperty","acceptView","rendered","$parent","isPopupWindow","popupWindow","$container","desktop","setTrackFocus","render","inFront","detach","attach","view"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, Form, scout} from '../index';\n\n/**\n * Controller with functionality to register and render file choosers.\n *\n * The file choosers are put into the list fileChoosers contained in 'displayParent'.\n */\nexport default class FileChooserController {\n\n  constructor(displayParent, session) {\n    this.displayParent = displayParent;\n    this.session = session;\n  }\n\n  /**\n   * Adds the given file chooser to this controller and renders it.\n   */\n  registerAndRender(fileChooser) {\n    scout.assertProperty(fileChooser, 'displayParent');\n    this.displayParent.fileChoosers.push(fileChooser);\n    this._render(fileChooser);\n  }\n\n  /**\n   * Removes the given file chooser from this controller and DOM. However, the file chooser's adapter is not destroyed. That only happens once the file chooser is closed.\n   */\n  unregisterAndRemove(fileChooser) {\n    if (fileChooser) {\n      arrays.remove(this.displayParent.fileChoosers, fileChooser);\n      this._remove(fileChooser);\n    }\n  }\n\n  /**\n   * Removes all file choosers registered with this controller from DOM.\n   */\n  remove() {\n    this.displayParent.fileChoosers.forEach(this._remove.bind(this));\n  }\n\n  /**\n   * Renders all file choosers registered with this controller.\n   */\n  render() {\n    this.displayParent.fileChoosers.forEach(function(chooser) {\n      chooser.setDisplayParent(this.displayParent);\n      this._render(chooser);\n    }.bind(this));\n  }\n\n  _render(fileChooser) {\n    // missing displayParent (when render is called by reload), use displayParent of FileChooserController\n    if (!fileChooser.displayParent) {\n      fileChooser._setProperty('displayParent', this.displayParent);\n    }\n    // Use parent's function or (if not implemented) our own.\n    if (this.displayParent.acceptView) {\n      if (!this.displayParent.acceptView(fileChooser)) {\n        return;\n      }\n    } else if (!this.acceptView(fileChooser)) {\n      return;\n    }\n    // Prevent \"Already rendered\" errors --> TODO [7.0] bsh: Remove this hack! Fix it on model if possible. See #162954.\n    if (fileChooser.rendered) {\n      return;\n    }\n    // Open all file choosers in the center of the desktop, except the ones that belong to a popup-window\n    // Since the file chooser doesn't have a DOM element as parent when render is called, we must find the\n    // entryPoint by using the model.\n    var $parent;\n    if (this.displayParent instanceof Form && this.displayParent.isPopupWindow()) {\n      $parent = this.displayParent.popupWindow.$container;\n    } else {\n      $parent = this.session.desktop.$container;\n    }\n    // start focus tracking if not already started.\n    fileChooser.setTrackFocus(true);\n    fileChooser.render($parent);\n\n    // Only display the file chooser if its 'displayParent' is visible to the user.\n    if (!this.displayParent.inFront()) {\n      fileChooser.detach();\n    }\n  }\n\n  _remove(fileChooser) {\n    fileChooser.remove();\n  }\n\n  /**\n   * Attaches all file choosers to their original DOM parents.\n   * In contrast to 'render', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already attached.\n   */\n  attach() {\n    this.displayParent.fileChoosers.forEach(function(fileChooser) {\n      fileChooser.attach();\n    }, this);\n  }\n\n  /**\n   * Detaches all file choosers from their DOM parents. Thereby, modality glassPanes are not detached.\n   * In contrast to 'remove', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already detached.\n   */\n  detach() {\n    this.displayParent.fileChoosers.forEach(function(fileChooser) {\n      fileChooser.detach();\n    }, this);\n  }\n\n  acceptView(view) {\n    return this.displayParent.rendered;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}