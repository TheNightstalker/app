{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, FlexboxLayout, FlexboxLayoutData, HtmlComponent, scout, SimpleTabBox, Splitter, strings, Widget, widgets } from '../../index';\n\nvar BenchColumn = /*#__PURE__*/function (_Widget) {\n  _inherits(BenchColumn, _Widget);\n\n  var _super = _createSuper(BenchColumn);\n\n  function BenchColumn() {\n    var _this;\n\n    _classCallCheck(this, BenchColumn);\n\n    _this = _super.call(this);\n    _this.tabBoxes = [];\n    _this._widgetToTabBox = {}; // [key=viewId, value=SimpleTabBox instance]\n\n    _this.components = null;\n    _this._removeViewInProgress = 0;\n    _this.layoutData; // event listener functions\n\n    _this._viewAddHandler = _this._onViewAdd.bind(_assertThisInitialized(_this));\n    _this._viewRemoveHandler = _this._onViewRemove.bind(_assertThisInitialized(_this));\n    _this._viewActivateHandler = _this._onViewActivate.bind(_assertThisInitialized(_this));\n    _this._viewDeactivateHandler = _this._onViewDeactivate.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BenchColumn, [{\n    key: \"_init\",\n    value: function _init(model) {\n      _get(_getPrototypeOf(BenchColumn.prototype), \"_init\", this).call(this, model);\n\n      this.layoutData = model.layoutData;\n      this.layoutCacheKey = model.cacheKey;\n      this.cssClass = model.cssClass;\n\n      this._createTabBoxes();\n    }\n    /**\n     * Returns a $container used as a bind target for the key-stroke context of the group-box.\n     * By default this function returns the container of the form, or when group-box is has no\n     * form as a parent the container of the group-box.\n     */\n\n  }, {\n    key: \"_keyStrokeBindTarget\",\n    value: function _keyStrokeBindTarget() {\n      return this.$container;\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this.$container = this.$parent.appendDiv('bench-column');\n\n      if (this.cssClass) {\n        this.$container.addClass(this.cssClass);\n      }\n\n      this.htmlComp = HtmlComponent.install(this.$container, this.session);\n      this.htmlComp.setLayout(this._createLayout());\n      this.htmlComp.layoutData = this.getLayoutData();\n    }\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      _get(_getPrototypeOf(BenchColumn.prototype), \"_renderProperties\", this).call(this);\n\n      this._renderTabBoxes();\n\n      this._revalidateSplitters();\n    }\n  }, {\n    key: \"_renderTabBoxes\",\n    value: function _renderTabBoxes() {\n      this.visibleTabBoxes().forEach(function (tabBox) {\n        this._renderTabBox(tabBox);\n      }.bind(this));\n      this.updateFirstLastMarker();\n    }\n  }, {\n    key: \"_renderTabBox\",\n    value: function _renderTabBox(tabBox) {\n      if (!tabBox.rendered) {\n        tabBox.render();\n      }\n    }\n  }, {\n    key: \"postRender\",\n    value: function postRender() {\n      this.tabBoxes.forEach(function (tabBox) {\n        tabBox.postRender();\n      });\n    }\n  }, {\n    key: \"_createLayout\",\n    value: function _createLayout() {\n      return new FlexboxLayout(FlexboxLayout.Direction.COLUMN, this.layoutCacheKey);\n    }\n  }, {\n    key: \"updateLayoutData\",\n    value: function updateLayoutData(layoutData, cacheKey) {\n      if (this.getLayoutData() === layoutData) {\n        return;\n      }\n\n      this.layoutCacheKey = cacheKey;\n      this.setLayoutData(layoutData); // update columns\n\n      var rowDatas = this.layoutData.getRows();\n      this.tabBoxes.forEach(function (tb, i) {\n        tb.setLayoutData(rowDatas[i]);\n      });\n\n      this._updateSplitterMovable();\n\n      if (this.rendered) {\n        this.htmlComp.layout.setCacheKey(this.layoutCacheKey);\n        this.htmlComp.layout.reset();\n        this.htmlComp.invalidateLayoutTree();\n      }\n    }\n  }, {\n    key: \"setLayoutData\",\n    value: function setLayoutData(layoutData) {\n      _get(_getPrototypeOf(BenchColumn.prototype), \"setLayoutData\", this).call(this, layoutData);\n\n      this.layoutData = layoutData;\n    }\n  }, {\n    key: \"getLayoutData\",\n    value: function getLayoutData() {\n      return this.layoutData;\n    }\n  }, {\n    key: \"_onViewAdd\",\n    value: function _onViewAdd(event) {\n      this.trigger('viewAdd', {\n        view: event.view\n      });\n    }\n  }, {\n    key: \"_onViewRemove\",\n    value: function _onViewRemove(event) {\n      this.trigger('viewRemove', {\n        view: event.view\n      });\n    }\n  }, {\n    key: \"_onViewActivate\",\n    value: function _onViewActivate(event) {\n      this.trigger('viewActivate', {\n        view: event.view\n      });\n    }\n  }, {\n    key: \"_onViewDeactivate\",\n    value: function _onViewDeactivate(event) {\n      this.trigger('viewDeactivate', {\n        view: event.view\n      });\n    }\n  }, {\n    key: \"activateView\",\n    value: function activateView(view) {\n      var tabBox = this.getTabBox(view.displayViewId);\n      tabBox.activateView(view);\n    }\n  }, {\n    key: \"_createTabBoxes\",\n    value: function _createTabBoxes() {\n      var rowLayoutDatas = [];\n\n      if (this.layoutData) {\n        rowLayoutDatas = this.layoutData.getRows();\n      }\n\n      for (var i = 0; i < 3; i++) {\n        var tabBox = scout.create('SimpleTabBox', {\n          parent: this,\n          cssClass: strings.join(' ', 'view-tab-box', BenchColumn.TAB_BOX_CLASSES[i]),\n          controller: scout.create('DesktopTabBoxController')\n        });\n        tabBox.setLayoutData(rowLayoutDatas[i]);\n        tabBox.on('viewAdd', this._viewAddHandler);\n        tabBox.on('viewRemove', this._viewRemoveHandler);\n        tabBox.on('viewActivate', this._viewActivateHandler);\n        tabBox.on('viewDeactivate', this._viewDeactivateHandler);\n        this.tabBoxes.push(tabBox);\n      }\n    }\n  }, {\n    key: \"_revalidateSplitters\",\n    value: function _revalidateSplitters(clearPosition) {\n      // remove old splitters\n      if (this.components) {\n        this.components.forEach(function (comp) {\n          if (comp instanceof Splitter) {\n            comp.destroy();\n          }\n        });\n      }\n\n      this.components = this.visibleTabBoxes().reduce(function (arr, col) {\n        if (arr.length > 0) {\n          // add sep\n          var splitter = scout.create('Splitter', {\n            parent: this,\n            $anchor: arr[arr.length - 1].$container,\n            $root: this.$container,\n            splitHorizontal: false,\n            maxRatio: 1\n          });\n          splitter.render();\n          splitter.setLayoutData(FlexboxLayoutData.fixed().withOrder(col.getLayoutData().order - 1));\n          splitter.$container.addClass('line');\n          arr.push(splitter);\n        }\n\n        arr.push(col);\n        return arr;\n      }.bind(this), []); // well order the dom elements (reduce is used for simple code reasons, the result of reduce is not of interest).\n\n      this.components.filter(function (comp) {\n        return comp instanceof SimpleTabBox;\n      }).reduce(function (c1, c2, index) {\n        if (index > 0) {\n          c2.$container.insertAfter(c1.$container);\n        }\n\n        return c2;\n      }, undefined);\n\n      this._updateSplitterMovable();\n    }\n  }, {\n    key: \"_updateSplitterMovable\",\n    value: function _updateSplitterMovable() {\n      if (!this.components) {\n        return;\n      }\n\n      this.components.forEach(function (c, i) {\n        if (c instanceof Splitter) {\n          var componentsBefore = this.components.slice(0, i).reverse();\n          var componentsAfter = this.components.slice(i + 1); // shrink\n\n          if (componentsBefore.filter(function (c) {\n            return c.getLayoutData().shrink > 0;\n          }).length > 0 && componentsAfter.filter(function (c) {\n            return c.getLayoutData().grow > 0;\n          }).length > 0) {\n            c.setEnabled(true);\n            c.on('move', this._onSplitterMove.bind(this));\n            return;\n          } // grow\n\n\n          if (componentsBefore.filter(function (c) {\n            return c.getLayoutData().grow > 0;\n          }).length > 0 && componentsAfter.filter(function (c) {\n            return c.getLayoutData().shrink > 0;\n          }).length > 0) {\n            c.setEnabled(true);\n            c.on('move', this._onSplitterMove.bind(this));\n            return;\n          }\n\n          c.setEnabled(false);\n        }\n      }.bind(this));\n    }\n  }, {\n    key: \"_onSplitterMove\",\n    value: function _onSplitterMove(event) {\n      var splitter = event.source; // noinspection UnnecessaryLocalVariableJS\n\n      var diff = event.position - splitter.htmlComp.location().y - splitter.htmlComp.margins().top - splitter.htmlComp.insets().top;\n      splitter.getLayoutData().diff = diff;\n      this.revalidateLayout();\n      splitter.getLayoutData().diff = null;\n      event.preventDefault();\n    }\n  }, {\n    key: \"addView\",\n    value: function addView(view, bringToFront) {\n      var tabBox = this.getTabBox(view.displayViewId);\n      this._widgetToTabBox[view.id] = tabBox;\n      tabBox.addView(view, bringToFront);\n\n      if (this.rendered && tabBox.viewCount() === 1) {\n        if (!tabBox.rendered) {\n          // lazy render if the first view is added.\n          tabBox.render();\n        }\n\n        this._revalidateSplitters(true);\n\n        this.updateFirstLastMarker();\n        this.htmlComp.layout.reset();\n        this.htmlComp.invalidateLayoutTree();\n      }\n    }\n  }, {\n    key: \"getTabBox\",\n    value: function getTabBox(displayViewId) {\n      var tabBox;\n\n      switch (displayViewId) {\n        case 'NW':\n        case 'N':\n        case 'NE':\n          tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.TOP];\n          break;\n\n        case 'SW':\n        case 'S':\n        case 'SE':\n          tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.BOTTOM];\n          break;\n\n        default:\n          tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.CENTER];\n          break;\n      }\n\n      return tabBox;\n    }\n  }, {\n    key: \"removeView\",\n    value: function removeView(view, showSiblingView) {\n      var tabBox = this._widgetToTabBox[view.id];\n\n      if (tabBox) {\n        this._removeViewInProgress++;\n        tabBox.removeView(view, showSiblingView);\n        this._removeViewInProgress--;\n        delete this._widgetToTabBox[view.id];\n\n        if (this.rendered && tabBox.viewCount() === 0 && this._removeViewInProgress === 0) {\n          // remove view area if no view is left.\n          tabBox.remove();\n\n          this._revalidateSplitters(true);\n\n          this.updateFirstLastMarker();\n          this.htmlComp.layout.reset();\n          this.htmlComp.invalidateLayoutTree();\n        }\n      }\n    }\n  }, {\n    key: \"viewCount\",\n    value: function viewCount() {\n      return this.tabBoxes.map(function (tabBox) {\n        return tabBox.viewCount();\n      }).reduce(function (c1, c2) {\n        return c1 + c2;\n      }, 0);\n    }\n  }, {\n    key: \"hasView\",\n    value: function hasView(view) {\n      return this.tabBoxes.filter(function (tabBox) {\n        return tabBox.hasView(view);\n      }).length > 0;\n    }\n  }, {\n    key: \"hasViews\",\n    value: function hasViews() {\n      return this.viewCount() > 0;\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews(displayViewId) {\n      return this.tabBoxes.reduce(function (arr, tabBox) {\n        arrays.pushAll(arr, tabBox.getViews(displayViewId));\n        return arr;\n      }, []);\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.components;\n    }\n  }, {\n    key: \"visibleTabBoxes\",\n    value: function visibleTabBoxes() {\n      return this.tabBoxes.filter(function (tabBox) {\n        return tabBox.hasViews();\n      });\n    }\n  }, {\n    key: \"updateFirstLastMarker\",\n    value: function updateFirstLastMarker() {\n      widgets.updateFirstLastMarker(this.visibleTabBoxes());\n    }\n  }]);\n\n  return BenchColumn;\n}(Widget);\n\n_defineProperty(BenchColumn, \"TAB_BOX_INDEX\", {\n  TOP: 0,\n  CENTER: 1,\n  BOTTOM: 2\n});\n\n_defineProperty(BenchColumn, \"TAB_BOX_CLASSES\", ['north', 'center', 'south']);\n\nexport { BenchColumn as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/desktop/bench/BenchColumn.js"],"names":["arrays","FlexboxLayout","FlexboxLayoutData","HtmlComponent","scout","SimpleTabBox","Splitter","strings","Widget","widgets","BenchColumn","tabBoxes","_widgetToTabBox","components","_removeViewInProgress","layoutData","_viewAddHandler","_onViewAdd","bind","_viewRemoveHandler","_onViewRemove","_viewActivateHandler","_onViewActivate","_viewDeactivateHandler","_onViewDeactivate","model","layoutCacheKey","cacheKey","cssClass","_createTabBoxes","$container","$parent","appendDiv","addClass","htmlComp","install","session","setLayout","_createLayout","getLayoutData","_renderTabBoxes","_revalidateSplitters","visibleTabBoxes","forEach","tabBox","_renderTabBox","updateFirstLastMarker","rendered","render","postRender","Direction","COLUMN","setLayoutData","rowDatas","getRows","tb","i","_updateSplitterMovable","layout","setCacheKey","reset","invalidateLayoutTree","event","trigger","view","getTabBox","displayViewId","activateView","rowLayoutDatas","create","parent","join","TAB_BOX_CLASSES","controller","on","push","clearPosition","comp","destroy","reduce","arr","col","length","splitter","$anchor","$root","splitHorizontal","maxRatio","fixed","withOrder","order","filter","c1","c2","index","insertAfter","undefined","c","componentsBefore","slice","reverse","componentsAfter","shrink","grow","setEnabled","_onSplitterMove","source","diff","position","location","y","margins","top","insets","revalidateLayout","preventDefault","bringToFront","id","addView","viewCount","TAB_BOX_INDEX","TOP","BOTTOM","CENTER","showSiblingView","removeView","remove","map","hasView","pushAll","getViews","hasViews"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, FlexboxLayout, FlexboxLayoutData, HtmlComponent, scout, SimpleTabBox, Splitter, strings, Widget, widgets} from '../../index';\n\nexport default class BenchColumn extends Widget {\n\n  constructor() {\n    super();\n    this.tabBoxes = [];\n    this._widgetToTabBox = {}; // [key=viewId, value=SimpleTabBox instance]\n    this.components = null;\n    this._removeViewInProgress = 0;\n    this.layoutData;\n\n    // event listener functions\n    this._viewAddHandler = this._onViewAdd.bind(this);\n    this._viewRemoveHandler = this._onViewRemove.bind(this);\n    this._viewActivateHandler = this._onViewActivate.bind(this);\n    this._viewDeactivateHandler = this._onViewDeactivate.bind(this);\n  }\n\n  static TAB_BOX_INDEX = {\n    TOP: 0,\n    CENTER: 1,\n    BOTTOM: 2\n  };\n\n  static TAB_BOX_CLASSES = [\n    'north',\n    'center',\n    'south'\n  ];\n\n  _init(model) {\n    super._init(model);\n    this.layoutData = model.layoutData;\n    this.layoutCacheKey = model.cacheKey;\n    this.cssClass = model.cssClass;\n    this._createTabBoxes();\n  }\n\n  /**\n   * Returns a $container used as a bind target for the key-stroke context of the group-box.\n   * By default this function returns the container of the form, or when group-box is has no\n   * form as a parent the container of the group-box.\n   */\n  _keyStrokeBindTarget() {\n    return this.$container;\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('bench-column');\n    if (this.cssClass) {\n      this.$container.addClass(this.cssClass);\n    }\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(this._createLayout());\n\n    this.htmlComp.layoutData = this.getLayoutData();\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderTabBoxes();\n    this._revalidateSplitters();\n  }\n\n  _renderTabBoxes() {\n    this.visibleTabBoxes().forEach(function(tabBox) {\n      this._renderTabBox(tabBox);\n    }.bind(this));\n    this.updateFirstLastMarker();\n  }\n\n  _renderTabBox(tabBox) {\n    if (!tabBox.rendered) {\n      tabBox.render();\n    }\n  }\n\n  postRender() {\n    this.tabBoxes.forEach(function(tabBox) {\n      tabBox.postRender();\n    });\n  }\n\n  _createLayout() {\n    return new FlexboxLayout(FlexboxLayout.Direction.COLUMN, this.layoutCacheKey);\n  }\n\n  updateLayoutData(layoutData, cacheKey) {\n    if (this.getLayoutData() === layoutData) {\n      return;\n    }\n    this.layoutCacheKey = cacheKey;\n    this.setLayoutData(layoutData);\n\n    // update columns\n    var rowDatas = this.layoutData.getRows();\n    this.tabBoxes.forEach(function(tb, i) {\n      tb.setLayoutData(rowDatas[i]);\n    });\n    this._updateSplitterMovable();\n    if (this.rendered) {\n      this.htmlComp.layout.setCacheKey(this.layoutCacheKey);\n      this.htmlComp.layout.reset();\n      this.htmlComp.invalidateLayoutTree();\n    }\n  }\n\n  setLayoutData(layoutData) {\n    super.setLayoutData(layoutData);\n    this.layoutData = layoutData;\n  }\n\n  getLayoutData() {\n    return this.layoutData;\n  }\n\n  _onViewAdd(event) {\n    this.trigger('viewAdd', {\n      view: event.view\n    });\n  }\n\n  _onViewRemove(event) {\n    this.trigger('viewRemove', {\n      view: event.view\n    });\n  }\n\n  _onViewActivate(event) {\n    this.trigger('viewActivate', {\n      view: event.view\n    });\n  }\n\n  _onViewDeactivate(event) {\n    this.trigger('viewDeactivate', {\n      view: event.view\n    });\n  }\n\n  activateView(view) {\n    var tabBox = this.getTabBox(view.displayViewId);\n    tabBox.activateView(view);\n  }\n\n  _createTabBoxes() {\n    var rowLayoutDatas = [];\n    if (this.layoutData) {\n      rowLayoutDatas = this.layoutData.getRows();\n    }\n    for (var i = 0; i < 3; i++) {\n      var tabBox = scout.create('SimpleTabBox', {\n        parent: this,\n        cssClass: strings.join(' ', 'view-tab-box', BenchColumn.TAB_BOX_CLASSES[i]),\n        controller: scout.create('DesktopTabBoxController')\n      });\n      tabBox.setLayoutData(rowLayoutDatas[i]);\n      tabBox.on('viewAdd', this._viewAddHandler);\n      tabBox.on('viewRemove', this._viewRemoveHandler);\n      tabBox.on('viewActivate', this._viewActivateHandler);\n      tabBox.on('viewDeactivate', this._viewDeactivateHandler);\n      this.tabBoxes.push(tabBox);\n    }\n  }\n\n  _revalidateSplitters(clearPosition) {\n    // remove old splitters\n    if (this.components) {\n      this.components.forEach(function(comp) {\n        if (comp instanceof Splitter) {\n          comp.destroy();\n        }\n      });\n    }\n    this.components = this.visibleTabBoxes()\n      .reduce(function(arr, col) {\n        if (arr.length > 0) {\n          // add sep\n          var splitter = scout.create('Splitter', {\n            parent: this,\n            $anchor: arr[arr.length - 1].$container,\n            $root: this.$container,\n            splitHorizontal: false,\n            maxRatio: 1\n          });\n          splitter.render();\n          splitter.setLayoutData(FlexboxLayoutData.fixed().withOrder(col.getLayoutData().order - 1));\n          splitter.$container.addClass('line');\n          arr.push(splitter);\n        }\n        arr.push(col);\n        return arr;\n      }.bind(this), []);\n    // well order the dom elements (reduce is used for simple code reasons, the result of reduce is not of interest).\n    this.components.filter(function(comp) {\n      return comp instanceof SimpleTabBox;\n    })\n      .reduce(function(c1, c2, index) {\n        if (index > 0) {\n          c2.$container.insertAfter(c1.$container);\n        }\n        return c2;\n      }, undefined);\n    this._updateSplitterMovable();\n  }\n\n  _updateSplitterMovable() {\n    if (!this.components) {\n      return;\n    }\n    this.components.forEach(function(c, i) {\n      if (c instanceof Splitter) {\n        var componentsBefore = this.components.slice(0, i).reverse();\n        var componentsAfter = this.components.slice(i + 1);\n        // shrink\n        if (\n          componentsBefore.filter(function(c) {\n            return c.getLayoutData().shrink > 0;\n          }).length > 0 &&\n          componentsAfter.filter(function(c) {\n            return c.getLayoutData().grow > 0;\n          }).length > 0\n        ) {\n          c.setEnabled(true);\n          c.on('move', this._onSplitterMove.bind(this));\n          return;\n        }\n        // grow\n        if (\n          componentsBefore.filter(function(c) {\n            return c.getLayoutData().grow > 0;\n          }).length > 0 &&\n          componentsAfter.filter(function(c) {\n            return c.getLayoutData().shrink > 0;\n          }).length > 0\n        ) {\n          c.setEnabled(true);\n          c.on('move', this._onSplitterMove.bind(this));\n          return;\n        }\n        c.setEnabled(false);\n\n      }\n    }.bind(this));\n  }\n\n  _onSplitterMove(event) {\n    var splitter = event.source;\n    // noinspection UnnecessaryLocalVariableJS\n    var diff = event.position - splitter.htmlComp.location().y - splitter.htmlComp.margins().top - splitter.htmlComp.insets().top;\n    splitter.getLayoutData().diff = diff;\n    this.revalidateLayout();\n    splitter.getLayoutData().diff = null;\n    event.preventDefault();\n  }\n\n  addView(view, bringToFront) {\n    var tabBox = this.getTabBox(view.displayViewId);\n    this._widgetToTabBox[view.id] = tabBox;\n\n    tabBox.addView(view, bringToFront);\n\n    if (this.rendered && tabBox.viewCount() === 1) {\n      if (!tabBox.rendered) {\n        // lazy render if the first view is added.\n        tabBox.render();\n      }\n      this._revalidateSplitters(true);\n      this.updateFirstLastMarker();\n      this.htmlComp.layout.reset();\n      this.htmlComp.invalidateLayoutTree();\n    }\n  }\n\n  getTabBox(displayViewId) {\n    var tabBox;\n    switch (displayViewId) {\n      case 'NW':\n      case 'N':\n      case 'NE':\n        tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.TOP];\n        break;\n      case 'SW':\n      case 'S':\n      case 'SE':\n        tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.BOTTOM];\n        break;\n      default:\n        tabBox = this.tabBoxes[BenchColumn.TAB_BOX_INDEX.CENTER];\n        break;\n    }\n    return tabBox;\n  }\n\n  removeView(view, showSiblingView) {\n    var tabBox = this._widgetToTabBox[view.id];\n    if (tabBox) {\n      this._removeViewInProgress++;\n      tabBox.removeView(view, showSiblingView);\n      this._removeViewInProgress--;\n      delete this._widgetToTabBox[view.id];\n      if (this.rendered && tabBox.viewCount() === 0 && this._removeViewInProgress === 0) {\n        // remove view area if no view is left.\n        tabBox.remove();\n        this._revalidateSplitters(true);\n        this.updateFirstLastMarker();\n        this.htmlComp.layout.reset();\n        this.htmlComp.invalidateLayoutTree();\n      }\n    }\n  }\n\n  viewCount() {\n    return this.tabBoxes.map(function(tabBox) {\n      return tabBox.viewCount();\n    }).reduce(function(c1, c2) {\n      return c1 + c2;\n    }, 0);\n  }\n\n  hasView(view) {\n    return this.tabBoxes.filter(function(tabBox) {\n      return tabBox.hasView(view);\n    }).length > 0;\n  }\n\n  hasViews() {\n    return this.viewCount() > 0;\n  }\n\n  getViews(displayViewId) {\n    return this.tabBoxes.reduce(function(arr, tabBox) {\n      arrays.pushAll(arr, tabBox.getViews(displayViewId));\n      return arr;\n    }, []);\n  }\n\n  getComponents() {\n    return this.components;\n  }\n\n  visibleTabBoxes() {\n    return this.tabBoxes.filter(function(tabBox) {\n      return tabBox.hasViews();\n    });\n  }\n\n  updateFirstLastMarker() {\n    widgets.updateFirstLastMarker(this.visibleTabBoxes());\n  }\n}\n"]},"metadata":{},"sourceType":"module"}