{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { lookupField, Popup, scout, TagChooserPopupLayout } from '../../../index';\n\nvar TagChooserPopup = /*#__PURE__*/function (_Popup) {\n  _inherits(TagChooserPopup, _Popup);\n\n  var _super = _createSuper(TagChooserPopup);\n\n  function TagChooserPopup() {\n    var _this;\n\n    _classCallCheck(this, TagChooserPopup);\n\n    _this = _super.call(this);\n    _this.table = null;\n    return _this;\n  }\n\n  _createClass(TagChooserPopup, [{\n    key: \"_init\",\n    value: function _init(model) {\n      _get(_getPrototypeOf(TagChooserPopup.prototype), \"_init\", this).call(this, model);\n\n      var column = scout.create('Column', {\n        index: 0,\n        session: this.session,\n        text: 'Tag',\n        autoOptimizeWidth: false\n      });\n      this.table = scout.create('Table', {\n        parent: this,\n        headerVisible: false,\n        autoResizeColumns: true,\n        multiSelect: false,\n        scrollToSelection: true,\n        columns: [column],\n        headerMenusEnabled: false\n      });\n      this.table.on('rowClick', this._onRowClick.bind(this));\n    }\n  }, {\n    key: \"_createLayout\",\n    value: function _createLayout() {\n      return new TagChooserPopupLayout(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      _get(_getPrototypeOf(TagChooserPopup.prototype), \"_render\", this).call(this);\n\n      this.$container.addClass('tag-chooser-popup').on('mousedown', this._onContainerMouseDown.bind(this));\n\n      this._renderTable();\n    }\n  }, {\n    key: \"_renderTable\",\n    value: function _renderTable() {\n      this.table.setVirtual(false);\n      this.table.render(); // Make sure table never gets the focus, but looks focused\n\n      this.table.$container.setTabbable(false).addClass('focused');\n    }\n  }, {\n    key: \"setLookupResult\",\n    value: function setLookupResult(result) {\n      var tableRows = [],\n          lookupRows = result.lookupRows;\n      this.table.deleteAllRows();\n      lookupRows.forEach(function (lookupRow) {\n        tableRows.push(lookupField.createTableRow(lookupRow));\n      }, this);\n      this.table.insertRows(tableRows);\n    }\n  }, {\n    key: \"_onRowClick\",\n    value: function _onRowClick(event) {\n      this.triggerLookupRowSelected();\n    }\n    /**\n     * This event handler is called before the mousedown handler on the _document_ is triggered\n     * This allows us to prevent the default, which is important for the CellEditorPopup which\n     * should stay open when the SmartField popup is closed. It also prevents the focus blur\n     * event on the SmartField input-field.\n     */\n\n  }, {\n    key: \"_onContainerMouseDown\",\n    value: function _onContainerMouseDown(event) {\n      // when user clicks on proposal popup with table or tree (prevent default,\n      // so input-field does not lose the focus, popup will be closed by the\n      // proposal chooser impl.\n      return false;\n    }\n  }, {\n    key: \"_isMouseDownOnAnchor\",\n    value: function _isMouseDownOnAnchor(event) {\n      return this.field.$field.isOrHas(event.target);\n    }\n  }, {\n    key: \"delegateKeyEvent\",\n    value: function delegateKeyEvent(event) {\n      event.originalEvent.smartFieldEvent = true;\n      this.table.$container.trigger(event);\n    }\n  }, {\n    key: \"triggerLookupRowSelected\",\n    value: function triggerLookupRowSelected(row) {\n      row = row || this.selectedRow();\n\n      if (!row || !row.enabled) {\n        return;\n      }\n\n      this.trigger('lookupRowSelected', {\n        lookupRow: row.lookupRow\n      });\n    }\n  }, {\n    key: \"selectedRow\",\n    value: function selectedRow() {\n      return this.table.selectedRow();\n    }\n  }]);\n\n  return TagChooserPopup;\n}(Popup);\n\nexport { TagChooserPopup as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/form/fields/tagfield/TagChooserPopup.js"],"names":["lookupField","Popup","scout","TagChooserPopupLayout","TagChooserPopup","table","model","column","create","index","session","text","autoOptimizeWidth","parent","headerVisible","autoResizeColumns","multiSelect","scrollToSelection","columns","headerMenusEnabled","on","_onRowClick","bind","$container","addClass","_onContainerMouseDown","_renderTable","setVirtual","render","setTabbable","result","tableRows","lookupRows","deleteAllRows","forEach","lookupRow","push","createTableRow","insertRows","event","triggerLookupRowSelected","field","$field","isOrHas","target","originalEvent","smartFieldEvent","trigger","row","selectedRow","enabled"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {lookupField, Popup, scout, TagChooserPopupLayout} from '../../../index';\n\nexport default class TagChooserPopup extends Popup {\n\n  constructor() {\n    super();\n\n    this.table = null;\n  }\n\n  _init(model) {\n    super._init(model);\n\n    var column = scout.create('Column', {\n      index: 0,\n      session: this.session,\n      text: 'Tag',\n      autoOptimizeWidth: false\n    });\n\n    this.table = scout.create('Table', {\n      parent: this,\n      headerVisible: false,\n      autoResizeColumns: true,\n      multiSelect: false,\n      scrollToSelection: true,\n      columns: [column],\n      headerMenusEnabled: false\n    });\n\n    this.table.on('rowClick', this._onRowClick.bind(this));\n  }\n\n  _createLayout() {\n    return new TagChooserPopupLayout(this);\n  }\n\n  _render() {\n    super._render();\n\n    this.$container\n      .addClass('tag-chooser-popup')\n      .on('mousedown', this._onContainerMouseDown.bind(this));\n    this._renderTable();\n  }\n\n  _renderTable() {\n    this.table.setVirtual(false);\n    this.table.render();\n\n    // Make sure table never gets the focus, but looks focused\n    this.table.$container\n      .setTabbable(false)\n      .addClass('focused');\n  }\n\n  setLookupResult(result) {\n    var\n      tableRows = [],\n      lookupRows = result.lookupRows;\n\n    this.table.deleteAllRows();\n    lookupRows.forEach(function(lookupRow) {\n      tableRows.push(lookupField.createTableRow(lookupRow));\n    }, this);\n    this.table.insertRows(tableRows);\n  }\n\n  _onRowClick(event) {\n    this.triggerLookupRowSelected();\n  }\n\n  /**\n   * This event handler is called before the mousedown handler on the _document_ is triggered\n   * This allows us to prevent the default, which is important for the CellEditorPopup which\n   * should stay open when the SmartField popup is closed. It also prevents the focus blur\n   * event on the SmartField input-field.\n   */\n  _onContainerMouseDown(event) {\n    // when user clicks on proposal popup with table or tree (prevent default,\n    // so input-field does not lose the focus, popup will be closed by the\n    // proposal chooser impl.\n    return false;\n  }\n\n  _isMouseDownOnAnchor(event) {\n    return this.field.$field.isOrHas(event.target);\n  }\n\n  delegateKeyEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this.table.$container.trigger(event);\n  }\n\n  triggerLookupRowSelected(row) {\n    row = row || this.selectedRow();\n    if (!row || !row.enabled) {\n      return;\n    }\n    this.trigger('lookupRowSelected', {\n      lookupRow: row.lookupRow\n    });\n  }\n\n  selectedRow() {\n    return this.table.selectedRow();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}