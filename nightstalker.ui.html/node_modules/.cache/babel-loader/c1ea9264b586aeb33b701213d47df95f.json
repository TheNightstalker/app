{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { fields, graphics, HtmlComponent, InputFieldKeyStrokeContext, MenuBarLayout, scout, Status, strings, Table, TableFooterLayout, TableTextUserFilter, Widget } from '../index';\nimport $ from 'jquery';\n\nvar TableFooter = /*#__PURE__*/function (_Widget) {\n  _inherits(TableFooter, _Widget);\n\n  var _super = _createSuper(TableFooter);\n\n  function TableFooter() {\n    var _this;\n\n    _classCallCheck(this, TableFooter);\n\n    _this = _super.call(this);\n    _this._compactStyle = false;\n    _this.animating = false;\n    _this.open = false;\n    _this.resizing = false;\n    _this.table = null;\n    _this._tableRowsChangedHandler = _this._onTableRowsChanged.bind(_assertThisInitialized(_this));\n    _this._tableFilterHandler = _this._onTableFilter.bind(_assertThisInitialized(_this));\n    _this._tableFilterAddedHandler = _this._onTableFilterAdded.bind(_assertThisInitialized(_this));\n    _this._tableFilterRemovedHandler = _this._onTableFilterRemoved.bind(_assertThisInitialized(_this));\n    _this._tableRowsSelectedHandler = _this._onTableRowsSelected.bind(_assertThisInitialized(_this));\n    _this._tableStatusChangedHandler = _this._onTableStatusChanged.bind(_assertThisInitialized(_this));\n    _this._tablePropertyChangeHandler = _this._onTablePropertyChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TableFooter, [{\n    key: \"_init\",\n    value: function _init(options) {\n      _get(_getPrototypeOf(TableFooter.prototype), \"_init\", this).call(this, options); // Keystroke context for the search field.\n\n\n      this.searchFieldKeyStrokeContext = new InputFieldKeyStrokeContext();\n\n      this.searchFieldKeyStrokeContext.$bindTarget = function () {\n        return this._$textFilter;\n      }.bind(this);\n\n      this.searchFieldKeyStrokeContext.$scopeTarget = function () {\n        return this._$textFilter;\n      }.bind(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var filter, $filter;\n      this.$container = this.$parent.appendDiv('table-footer');\n      this._$window = this.$parent.window();\n      this._$body = this.$parent.body();\n      this.htmlComp = HtmlComponent.install(this.$container, this.session);\n      this.htmlComp.setLayout(new TableFooterLayout(this)); // --- container for an open control ---\n\n      this.$controlContainer = this.$container.appendDiv('table-control-container').hide();\n      this.$controlContent = this.$controlContainer.appendDiv('table-control-content'); // --- table controls section ---\n\n      this._$controls = this.$container.appendDiv('table-controls'); // --- info section ---\n\n      this._$info = this.$container.appendDiv('table-info'); // text filter\n\n      $filter = this._$info.appendDiv('table-filter');\n      this._$textFilter = fields.makeTextField(this.$container, 'table-text-filter').appendTo($filter).on('input', '', this._createOnFilterFieldInputFunction().bind(this)).placeholder(this.session.text('ui.FilterBy_'));\n      filter = this.table.getFilter(TableTextUserFilter.TYPE);\n\n      if (filter) {\n        this._$textFilter.val(filter.text);\n      }\n\n      this.$clearIcon = $filter.appendSpan('clear-icon unfocusable needsclick').on('mousedown', this._onDeleteFilterMouseDown.bind(this)); // load info (\"X rows loaded, click to reload\")\n\n      this._$infoLoad = this._$info.appendDiv('table-info-item table-info-load').on('click', '', this._onInfoLoadClick.bind(this)); // filter info (\"X rows filtered by Y, click to remove filter\")\n\n      this._$infoFilter = this._$info.appendDiv('table-info-item table-info-filter').on('click', '', this._onInfoFilterClick.bind(this)); // selection info (\"X rows selected, click to select all/none\")\n\n      this._$infoSelection = this._$info.appendDiv('table-info-item table-info-selection').on('click', '', this._onInfoSelectionClick.bind(this)); // table status\n\n      this._$infoTableStatus = this._$info.appendDiv('table-info-item table-info-status').on('mousedown', this._onStatusMouseDown.bind(this));\n      this._$infoTableStatusIcon = this._$infoTableStatus.appendSpan('icon font-icon'); // ------\n\n      this._renderControls();\n\n      this._renderInfo();\n\n      this._updateInfoVisibility();\n\n      this.table.on('rowsInserted', this._tableRowsChangedHandler);\n      this.table.on('rowsDeleted', this._tableRowsChangedHandler);\n      this.table.on('allRowsDeleted', this._tableRowsChangedHandler);\n      this.table.on('filter', this._tableFilterHandler);\n      this.table.on('filterAdded', this._tableFilterAddedHandler);\n      this.table.on('filterRemoved', this._tableFilterRemovedHandler);\n      this.table.on('rowsSelected', this._tableRowsSelectedHandler);\n      this.table.on('statusChanged', this._tableStatusChangedHandler);\n      this.table.on('propertyChange', this._tablePropertyChangeHandler);\n      this.session.keyStrokeManager.installKeyStrokeContext(this.searchFieldKeyStrokeContext);\n    }\n  }, {\n    key: \"getFocusableElement\",\n    value: function getFocusableElement() {\n      return this._$textFilter;\n    }\n  }, {\n    key: \"_renderProperties\",\n    value: function _renderProperties() {\n      this._updateHasFilterText();\n    }\n  }, {\n    key: \"_remove\",\n    value: function _remove() {\n      this.session.keyStrokeManager.uninstallKeyStrokeContext(this.searchFieldKeyStrokeContext);\n\n      this._hideTableStatusTooltip();\n\n      this.$resizer = null;\n      this.$controlContainer.stop(false, true);\n      this.animating = false; // Animation may not be started yet due to the delay, hence complete callback may not be executed -> make sure the flag is reset anyway\n\n      this.open = false;\n      this.table.off('rowsInserted', this._tableRowsChangedHandler);\n      this.table.off('rowsDeleted', this._tableRowsChangedHandler);\n      this.table.off('allRowsDeleted', this._tableRowsChangedHandler);\n      this.table.off('filter', this._tableFilterHandler);\n      this.table.off('filterAdded', this._tableFilterAddedHandler);\n      this.table.off('filterRemoved', this._tableFilterRemovedHandler);\n      this.table.off('rowsSelected', this._tableRowsSelectedHandler);\n      this.table.off('statusChanged', this._tableStatusChangedHandler);\n      this.table.off('propertyChange', this._tablePropertyChangeHandler);\n\n      _get(_getPrototypeOf(TableFooter.prototype), \"_remove\", this).call(this);\n    }\n  }, {\n    key: \"_renderResizerVisible\",\n    value: function _renderResizerVisible() {\n      if (this.selectedControl.resizerVisible) {\n        this._renderResizer();\n\n        this.$controlContainer.addClass('has-resizer');\n      } else if (this.$resizer) {\n        this.$resizer.remove();\n        this.$resizer = null;\n        this.$controlContainer.removeClass('has-resizer');\n      }\n    }\n  }, {\n    key: \"_renderResizer\",\n    value: function _renderResizer() {\n      if (this.$resizer) {\n        return;\n      }\n\n      this.$resizer = this.$controlContainer.prependDiv('table-control-resize').on('mousedown', '', resize.bind(this));\n\n      function resize(event) {\n        // Remember current height and start position\n        var startHeight = this.$controlContainer.height(),\n            startX = Math.floor(event.pageY);\n\n        this._$window.on('mousemove.tablefooter', resizeMove.bind(this)).one('mouseup', resizeEnd.bind(this));\n\n        this._$body.addClass('row-resize');\n\n        this.resizing = true;\n\n        function resizeMove(event) {\n          if (!this.rendered) {\n            // footer may be removed in the meantime\n            return;\n          } // Calculate position delta\n\n\n          var x = Math.floor(event.pageY);\n          var dx = x - startX; // Ensure control container does not get bigger than the table\n\n          var maxHeight = this.table.$container.height() - this.table.footer.$container.height(); // Calculate new height of table control container\n\n          var newHeight = Math.min(startHeight - dx, maxHeight);\n          this.$controlContainer.height(newHeight);\n          var controlContainerInsets = graphics.insets(this.$controlContainer);\n          this.$controlContent.outerHeight(newHeight - controlContainerInsets.vertical());\n\n          this._revalidateTableLayout();\n        }\n\n        function resizeEnd() {\n          if (this.rendered && this.$controlContainer.height() < 100) {\n            this.selectedControl.setSelected(false);\n          }\n\n          this._$window.off('mousemove.tablefooter');\n\n          this._$body.removeClass('row-resize');\n\n          this.resizing = false;\n        }\n\n        return false;\n      }\n    }\n  }, {\n    key: \"_renderControls\",\n    value: function _renderControls() {\n      var controls = this.table.tableControls;\n\n      if (controls) {\n        controls.forEach(function (control) {\n          control.setParent(this);\n          control.render(this._$controls);\n        }.bind(this));\n      } else {\n        this._$controls.empty();\n      }\n    }\n  }, {\n    key: \"_renderInfo\",\n    value: function _renderInfo() {\n      this._renderInfoLoad();\n\n      this._renderInfoTableStatus();\n\n      this._renderInfoFilter();\n\n      this._renderInfoSelection();\n    }\n  }, {\n    key: \"_renderInfoLoad\",\n    value: function _renderInfoLoad() {\n      var $info = this._$infoLoad,\n          numRows = this.table.rows.length,\n          estRows = this.table.estimatedRowCount,\n          maxRows = this.table.maxRowCount;\n      $info.empty();\n\n      if (!this._compactStyle) {\n        if (numRows <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowLoaded', this.computeCountInfo(numRows)));\n        } else if (estRows && estRows > numRows) {\n          $info.appendSpan().text(this.session.text('ui.NumRowsLoaded', this.computeCountInfo(numRows, estRows)));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsLoaded', this.computeCountInfo(numRows)));\n        }\n\n        if (this.table.hasReloadHandler) {\n          $info.appendBr();\n\n          if (estRows && maxRows && numRows < estRows && numRows < maxRows) {\n            if (estRows < maxRows) {\n              $info.appendSpan('table-info-button').text(this.session.text('ui.LoadAllData')).appendTo($info);\n            } else {\n              $info.appendSpan('table-info-button').text(this.session.text('ui.LoadNData', this.computeCountInfo(maxRows))).appendTo($info);\n            }\n          } else {\n            $info.appendSpan('table-info-button').text(this.session.text('ui.ReloadData')).appendTo($info);\n          }\n        }\n      } else {\n        if (numRows <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowLoadedMin'));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsLoadedMin'));\n        }\n\n        $info.appendBr();\n        $info.appendSpan('table-info-button').text(this.computeCountInfo(numRows));\n      }\n\n      $info.setEnabled(this.table.hasReloadHandler);\n\n      if (!this.htmlComp.layouting) {\n        this.invalidateLayoutTree(false);\n      }\n    }\n  }, {\n    key: \"_renderInfoFilter\",\n    value: function _renderInfoFilter() {\n      var $info = this._$infoFilter;\n      var numRowsFiltered = this.table.filteredRows().length;\n      var filteredBy = this.table.filteredBy().join(', '); // filteredBy() returns an array\n\n      $info.empty();\n\n      if (!this._compactStyle) {\n        if (filteredBy) {\n          if (numRowsFiltered <= 1) {\n            $info.appendSpan().text(this.session.text('ui.NumRowFilteredBy', this.computeCountInfo(numRowsFiltered), filteredBy));\n          } else {\n            $info.appendSpan().text(this.session.text('ui.NumRowsFilteredBy', this.computeCountInfo(numRowsFiltered), filteredBy));\n          }\n        } else {\n          if (numRowsFiltered <= 1) {\n            $info.appendSpan().text(this.session.text('ui.NumRowFiltered', this.computeCountInfo(numRowsFiltered)));\n          } else {\n            $info.appendSpan().text(this.session.text('ui.NumRowsFiltered', this.computeCountInfo(numRowsFiltered)));\n          }\n        }\n\n        if (this.table.hasUserFilter()) {\n          $info.appendBr();\n          $info.appendSpan('table-info-button').text(this.session.text('ui.RemoveFilter')).appendTo($info);\n        }\n      } else {\n        if (numRowsFiltered <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowFilteredMin'));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsFilteredMin'));\n        }\n\n        $info.appendBr();\n        $info.appendSpan('table-info-button').text(this.computeCountInfo(numRowsFiltered));\n      }\n\n      if (!this.htmlComp.layouting) {\n        this.invalidateLayoutTree(false);\n      }\n    }\n  }, {\n    key: \"_renderInfoSelection\",\n    value: function _renderInfoSelection() {\n      var $info = this._$infoSelection,\n          numRows = this.table.filteredRows().length,\n          numRowsSelected = this.table.selectedRows.length,\n          all = numRows > 0 && numRows === numRowsSelected;\n      $info.empty();\n\n      if (!this._compactStyle) {\n        if (numRowsSelected <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowSelected', this.computeCountInfo(numRowsSelected)));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsSelected', this.computeCountInfo(numRowsSelected)));\n        }\n\n        $info.appendBr();\n        $info.appendSpan('table-info-button').text(this.session.text(all ? 'ui.SelectNone' : 'ui.SelectAll')).appendTo($info);\n      } else {\n        if (numRowsSelected <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowSelectedMin'));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsSelectedMin'));\n        }\n\n        $info.appendBr();\n        $info.appendSpan('table-info-button').text(this.computeCountInfo(numRowsSelected));\n      }\n\n      if (!this.htmlComp.layouting) {\n        this.invalidateLayoutTree(false);\n      }\n    }\n  }, {\n    key: \"_renderInfoTableStatus\",\n    value: function _renderInfoTableStatus() {\n      var $info = this._$infoTableStatus;\n      var tableStatus = this.table.tableStatus;\n      $info.removeClass(Status.SEVERITY_CSS_CLASSES);\n\n      if (tableStatus) {\n        $info.addClass(tableStatus.cssClass());\n      }\n\n      if (!this.htmlComp.layouting) {\n        this.invalidateLayoutTree(false);\n      }\n    }\n  }, {\n    key: \"_updateInfoVisibility\",\n    value: function _updateInfoVisibility() {\n      this._updateInfoFilterVisibility();\n\n      this._updateInfoSelectionVisibility();\n\n      this._updateInfoTableStatusVisibility();\n    }\n  }, {\n    key: \"_updateInfoFilterVisibility\",\n    value: function _updateInfoFilterVisibility() {\n      var visible = this.table.filteredBy().length > 0;\n\n      this._setInfoVisible(this._$infoFilter, visible);\n    }\n  }, {\n    key: \"_updateInfoSelectionVisibility\",\n    value: function _updateInfoSelectionVisibility() {\n      var visible = this.table.multiSelect;\n\n      this._setInfoVisible(this._$infoSelection, visible);\n    }\n  }, {\n    key: \"_updateInfoTableStatusVisibility\",\n    value: function _updateInfoTableStatusVisibility() {\n      var visible = this.table.tableStatus;\n\n      if (visible) {\n        // If the uiState of the tableStatus was not set to hidden (either manually by the\n        // user or automatically by a timeout or other event), show the tooltip when the\n        // \"info visible\" animation has finished. Otherwise, we don't show the tooltip to\n        // not disturb the user.\n        var complete = null;\n\n        if (!scout.isOneOf(this.table.tableStatus.uiState, 'user-hidden', 'auto-hidden')) {\n          this._$infoTableStatus.addClass('tooltip-active'); // color icon before animation starts\n\n\n          complete = function () {\n            // Same check is required again, because this function is called asynchronously\n            if (this.table.tableStatus && !scout.isOneOf(this.table.tableStatus.uiState, 'user-hidden', 'auto-hidden')) {\n              this._showTableStatusTooltip();\n            }\n          }.bind(this);\n        }\n\n        this._setInfoVisible(this._$infoTableStatus, true, complete);\n      } else {\n        this._hideTableStatusTooltip();\n\n        this._setInfoVisible(this._$infoTableStatus, false);\n      }\n    }\n  }, {\n    key: \"_setInfoVisible\",\n    value: function _setInfoVisible($info, visible, _complete) {\n      if ($info.isVisible() === visible && !(visible && $info.data('hiding'))) {\n        if (_complete) {\n          _complete();\n        }\n\n        return;\n      }\n\n      var animate = this.rendered; // Animate only on a user interaction, no while the table gets rendered\n\n      if (!animate) {\n        $info.setVisible(visible);\n        return;\n      }\n\n      if (visible) {\n        var animationOpts = {\n          progress: this.revalidateLayout.bind(this),\n          complete: function complete() {\n            if (_complete) {\n              _complete();\n            }\n          }\n        }; // Save complete function so that layout may use it\n\n        $info.data('animationComplete', animationOpts.complete); // If info is shown the first time, set the width to 0 to make animation work\n\n        if ($info[0].style.width === '') {\n          $info.cssWidth(0);\n        }\n\n        $info.stop().removeData('hiding').setVisible(true).widthToContent(animationOpts);\n      } else {\n        // Mark element as hiding so that the layout does not try to resize it\n        $info.data('hiding', true);\n        $info.stop().animate({\n          width: 0\n        }, {\n          progress: this.revalidateLayout.bind(this),\n          complete: function complete() {\n            $info.removeData('hiding');\n            $info.setVisible(false);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_toggleTableInfoTooltip\",\n    value: function _toggleTableInfoTooltip($info, tooltipType) {\n      if (this._tableInfoTooltip) {\n        this._tableInfoTooltip.destroy();\n      } else {\n        this._tableInfoTooltip = scout.create(tooltipType, {\n          parent: this,\n          tableFooter: this,\n          cssClass: 'table-info-tooltip',\n          arrowPosition: 50,\n          arrowPositionUnit: '%',\n          $anchor: $info\n        });\n\n        this._tableInfoTooltip.one('destroy', function () {\n          this._tableInfoTooltip = null;\n        }.bind(this));\n\n        this._tableInfoTooltip.render();\n      }\n    } // n: row count\n    // m: total count, optional. Meaning is '3 of 10 rows'\n\n  }, {\n    key: \"computeCountInfo\",\n    value: function computeCountInfo(n, m) {\n      n = scout.nvl(n, 0);\n\n      if (m) {\n        return this.session.text('ui.TableRowCount', this.session.text('ui.CountOfApproxTotal', this.session.locale.decimalFormat.format(n), this.session.locale.decimalFormat.format(m)));\n      }\n\n      if (n === 0) {\n        if (this._compactStyle) {\n          return this.session.text('ui.TableRowCount', 0);\n        }\n\n        return this.session.text('ui.TableRowCount0');\n      } else if (n === 1) {\n        return this.session.text('ui.TableRowCount1');\n      }\n\n      return this.session.text('ui.TableRowCount', this.session.locale.decimalFormat.format(n));\n    }\n    /* open, close and resize of the container */\n\n  }, {\n    key: \"_revalidateTableLayout\",\n    value: function _revalidateTableLayout() {\n      this.table.htmlComp.revalidateLayoutTree();\n    }\n  }, {\n    key: \"openControlContainer\",\n    value: function openControlContainer(control) {\n      if (this.open) {// Calling open again may resize the container -> don't return\n      }\n\n      var currentControl = this.$controlContent.data('control');\n\n      if (this.animating && currentControl !== control) {\n        // Make sure the existing content is removed if the close animation was aborted and another control selected while the container is still closing\n        // (The done callback won't be executed when calling stop(true))\n        currentControl.onControlContainerClosed();\n      }\n\n      this.animating = true;\n      this.open = true;\n      var allowedControlHeight = this.computeControlContainerHeight(this.table, control);\n      var insets = graphics.insets(this.$controlContainer);\n      this.$controlContent.outerHeight(allowedControlHeight - insets.vertical()); // If container is opened the first time, set the height to 0 to make animation work\n\n      if (this.$controlContainer[0].style.height === '') {\n        this.$controlContainer.outerHeight(0);\n      }\n\n      if (this.$controlContainer.outerHeight() > allowedControlHeight) {\n        // Container gets smaller -> layout first to prevent having a white area\n        this.table.invalidateLayoutTree();\n      } // open container, stop existing (close) animations before\n      // use delay to make sure form is rendered and layouted with new size\n\n\n      this.$controlContainer.stop(true).show().delay(1).animate({\n        height: allowedControlHeight\n      }, {\n        duration: this.rendered ? control.animateDuration : 0,\n        complete: function () {\n          this.animating = false;\n          control.onControlContainerOpened();\n          this.table.invalidateLayoutTree();\n        }.bind(this)\n      });\n    }\n  }, {\n    key: \"closeControlContainer\",\n    value: function closeControlContainer(control, options) {\n      if (!this.open) {\n        return;\n      }\n\n      options = $.extend({}, {\n        animate: true\n      }, options);\n      this.open = false;\n      this.animating = true;\n      this.table.invalidateLayoutTree();\n\n      var completeFunc = function () {\n        this.animating = false;\n        this.$controlContainer.hide();\n        control.onControlContainerClosed();\n      }.bind(this);\n\n      if (options.animate) {\n        this.$controlContainer.stop(true).show().animate({\n          height: 0\n        }, {\n          duration: control.animateDuration,\n          complete: completeFunc\n        });\n      } else {\n        completeFunc();\n      }\n    }\n  }, {\n    key: \"computeControlContainerHeight\",\n    value: function computeControlContainerHeight(table, control, growControl) {\n      var menuBarHeight = 0,\n          footerHeight = 0,\n          containerHeight = graphics.size(table.$container).height,\n          maxControlHeight,\n          controlContainerHeight = 0,\n          dataMargins = graphics.margins(scout.nvl(table.$data, table.$container)),\n          dataMarginsHeight = dataMargins.top + dataMargins.bottom,\n          menuBar = table.menuBar,\n          footer = table.footer,\n          htmlContainer = table.htmlComp,\n          containerSize = htmlContainer.availableSize().subtract(htmlContainer.insets());\n\n      if (!footer) {\n        return;\n      }\n\n      if (table.menuBarVisible && menuBar.visible) {\n        var htmlMenuBar = HtmlComponent.get(menuBar.$container);\n        menuBarHeight = MenuBarLayout.size(htmlMenuBar, containerSize).height;\n      } // Layout table footer and add size of footer (including the control content) to 'height'\n\n\n      footerHeight = graphics.size(footer.$container).height;\n\n      if (footer.open) {\n        if (footer.animating) {\n          // Layout may be called when container stays open but changes its size using an animation.\n          // At that time the controlContainer has not yet the final size, therefore measuring is not possible, but not necessary anyway.\n          controlContainerHeight = control.height;\n        } else {\n          // Measure the real height\n          controlContainerHeight = graphics.size(footer.$controlContainer).height; // Expand control height? (but only if not resizing)\n\n          if (!footer.resizing && growControl) {\n            controlContainerHeight = Math.max(control.height, controlContainerHeight);\n          }\n        }\n      } // Crop control height (don't do it if table does not have the correct size yet)\n\n\n      if (this.table.htmlComp.layouted) {\n        maxControlHeight = containerHeight - (dataMarginsHeight + menuBarHeight + footerHeight);\n        controlContainerHeight = Math.min(controlContainerHeight, maxControlHeight);\n      }\n\n      return controlContainerHeight;\n    }\n  }, {\n    key: \"_hideTableStatusTooltip\",\n    value: function _hideTableStatusTooltip() {\n      clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n\n      if (this._tableStatusTooltip) {\n        this._tableStatusTooltip.destroy();\n      }\n    }\n  }, {\n    key: \"_showTableStatusTooltip\",\n    value: function _showTableStatusTooltip() {\n      // Remove existing tooltip (might have the wrong css class)\n      if (this._tableStatusTooltip) {\n        this._tableStatusTooltip.destroy();\n\n        this._tableStatusTooltip = null;\n      } // Check needed because the table footer might already be removed again when this\n      // callback is executed (e.g. when the user clicks on another page while the opening\n      // animation is still running).\n\n\n      if (!this.rendered && !this.rendering) {\n        return;\n      }\n\n      var tableStatus = this.table.tableStatus;\n      var text = tableStatus ? tableStatus.message : null;\n\n      if (strings.empty(text)) {\n        return; // Refuse to show empty tooltip\n      } // Create new tooltip\n\n\n      var opts = {\n        parent: this,\n        text: text,\n        severity: tableStatus.severity,\n        autoRemove: !tableStatus.isError(),\n        $anchor: this._$infoTableStatusIcon\n      };\n      this._tableStatusTooltip = scout.create('Tooltip', opts);\n\n      this._tableStatusTooltip.one('destroy', function () {\n        this._tableStatusTooltip = null;\n      }.bind(this));\n\n      this._tableStatusTooltip.render(); // Adjust icon style\n\n\n      this._$infoTableStatus.addClass('tooltip-active');\n\n      this._tableStatusTooltip.on('remove', function () {\n        this._$infoTableStatus.removeClass('tooltip-active'); // When the tooltip is removed (e.g. because of the auto-remove timeout, or\n        // The user clicked somewhere) set the uiStatus accordingly. Otherwise, it\n        // might pop up again when the table layout is revalidated.\n\n\n        clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n\n        if (this.table.tableStatus && !this.table.tableStatus.isError()) {\n          this.table.tableStatus.uiState = 'auto-hidden';\n        }\n      }.bind(this)); // Auto-hide unimportant messages\n\n\n      clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n\n      if (!tableStatus.isError() && !tableStatus.isWarning() && !tableStatus.uiState) {\n        // Already set status to 'auto-hidden', in case the user changes outline before timeout elapses\n        this.table.tableStatus.uiState = 'auto-hidden';\n        this._autoHideTableStatusTooltipTimeoutId = setTimeout(function () {\n          this._hideTableStatusTooltip();\n        }.bind(this), 5000);\n      }\n    }\n  }, {\n    key: \"_updateHasFilterText\",\n    value: function _updateHasFilterText() {\n      this._$textFilter.toggleClass('has-text', !!this._$textFilter.val());\n    }\n  }, {\n    key: \"onControlSelected\",\n    value: function onControlSelected(control) {\n      var previousControl = this.selectedControl;\n      this.selectedControl = control;\n\n      if (control) {\n        this._renderResizerVisible();\n\n        if (previousControl && previousControl.height !== control.height) {\n          this.openControlContainer(control);\n        }\n      }\n    }\n  }, {\n    key: \"_onStatusMouseDown\",\n    value: function _onStatusMouseDown(event) {\n      // Toggle tooltip\n      if (this._tableStatusTooltip) {\n        this._hideTableStatusTooltip();\n\n        this.table.tableStatus.uiState = 'user-hidden';\n      } else {\n        this._showTableStatusTooltip();\n\n        if (this._tableStatusTooltip.rendered) {\n          this.table.tableStatus.uiState = 'user-shown';\n        }\n      }\n    }\n  }, {\n    key: \"_createOnFilterFieldInputFunction\",\n    value: function _createOnFilterFieldInputFunction() {\n      var debounceFunction = $.debounce(this._applyFilter.bind(this));\n      return function (event) {\n        this._updateHasFilterText(); // debounced filter\n\n\n        debounceFunction();\n      };\n    }\n  }, {\n    key: \"_onDeleteFilterMouseDown\",\n    value: function _onDeleteFilterMouseDown(event) {\n      this._$textFilter.val('');\n\n      this._updateHasFilterText();\n\n      this._applyFilter();\n\n      event.preventDefault();\n    }\n  }, {\n    key: \"_applyFilter\",\n    value: function _applyFilter(event) {\n      var filter,\n          filterText = this._$textFilter.val();\n\n      if (this.filterText !== filterText) {\n        this.filterText = filterText;\n\n        if (filterText) {\n          filter = scout.create('TableTextUserFilter', {\n            session: this.session,\n            table: this.table\n          });\n          filter.text = filterText;\n          this.table.addFilter(filter);\n        } else {\n          this.table.removeFilterByKey(TableTextUserFilter.TYPE);\n        }\n\n        this.table.filter();\n        this.validateLayoutTree();\n      }\n    }\n  }, {\n    key: \"_onInfoLoadClick\",\n    value: function _onInfoLoadClick() {\n      if (!this._$infoLoad.isEnabled()) {\n        return;\n      }\n\n      if (this._compactStyle) {\n        this._toggleTableInfoTooltip(this._$infoLoad, 'TableInfoLoadTooltip');\n      } else {\n        var numRows = this.table.rows.length;\n        var estRows = this.table.estimatedRowCount;\n        var maxRows = this.table.maxRowCount;\n\n        if (estRows && maxRows && numRows < estRows && numRows < maxRows) {\n          this.table.reload(Table.ReloadReason.OVERRIDE_ROW_LIMIT);\n        } else {\n          this.table.reload();\n        }\n      }\n    }\n  }, {\n    key: \"_onInfoFilterClick\",\n    value: function _onInfoFilterClick() {\n      if (this._compactStyle) {\n        this._toggleTableInfoTooltip(this._$infoFilter, 'TableInfoFilterTooltip');\n      } else {\n        this.table.resetUserFilter();\n      }\n    }\n  }, {\n    key: \"_onInfoSelectionClick\",\n    value: function _onInfoSelectionClick() {\n      if (this._compactStyle) {\n        this._toggleTableInfoTooltip(this._$infoSelection, 'TableInfoSelectionTooltip');\n      } else {\n        this.table.toggleSelection();\n      }\n    }\n  }, {\n    key: \"_onTableRowsChanged\",\n    value: function _onTableRowsChanged(event) {\n      this._renderInfoLoad();\n    }\n  }, {\n    key: \"_onTableFilter\",\n    value: function _onTableFilter(event) {\n      this._renderInfoFilter();\n\n      this._renderInfoSelection();\n    }\n  }, {\n    key: \"_onTableFilterAdded\",\n    value: function _onTableFilterAdded(event) {\n      this._renderInfoFilter();\n\n      this._updateInfoFilterVisibility();\n\n      if (event.filter.filterType === TableTextUserFilter.TYPE) {\n        // Do not update the content when the value does not change. This is the case when typing text in\n        // the UI. If we would call val() unconditionally, the current cursor position will get lost.\n        var currentText = this._$textFilter.val();\n\n        if (currentText !== event.filter.text) {\n          this._$textFilter.val(event.filter.text);\n\n          this._updateHasFilterText();\n\n          this._applyFilter();\n        }\n      }\n    }\n  }, {\n    key: \"_onTableFilterRemoved\",\n    value: function _onTableFilterRemoved(event) {\n      this._renderInfoFilter();\n\n      this._updateInfoFilterVisibility();\n\n      if (event.filter.filterType === TableTextUserFilter.TYPE) {\n        this._$textFilter.val('');\n\n        this._updateHasFilterText();\n\n        this._applyFilter();\n      }\n    }\n  }, {\n    key: \"_onTableRowsSelected\",\n    value: function _onTableRowsSelected(event) {\n      this._renderInfoSelection();\n    }\n  }, {\n    key: \"_onTableStatusChanged\",\n    value: function _onTableStatusChanged(event) {\n      this._renderInfoTableStatus();\n\n      this._updateInfoTableStatusVisibility();\n    }\n  }, {\n    key: \"_onTablePropertyChange\",\n    value: function _onTablePropertyChange(event) {\n      if (event.propertyName === 'multiSelect') {\n        this._updateInfoSelectionVisibility();\n      }\n    }\n  }]);\n\n  return TableFooter;\n}(Widget);\n\nexport { TableFooter as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/table/TableFooter.js"],"names":["fields","graphics","HtmlComponent","InputFieldKeyStrokeContext","MenuBarLayout","scout","Status","strings","Table","TableFooterLayout","TableTextUserFilter","Widget","$","TableFooter","_compactStyle","animating","open","resizing","table","_tableRowsChangedHandler","_onTableRowsChanged","bind","_tableFilterHandler","_onTableFilter","_tableFilterAddedHandler","_onTableFilterAdded","_tableFilterRemovedHandler","_onTableFilterRemoved","_tableRowsSelectedHandler","_onTableRowsSelected","_tableStatusChangedHandler","_onTableStatusChanged","_tablePropertyChangeHandler","_onTablePropertyChange","options","searchFieldKeyStrokeContext","$bindTarget","_$textFilter","$scopeTarget","filter","$filter","$container","$parent","appendDiv","_$window","window","_$body","body","htmlComp","install","session","setLayout","$controlContainer","hide","$controlContent","_$controls","_$info","makeTextField","appendTo","on","_createOnFilterFieldInputFunction","placeholder","text","getFilter","TYPE","val","$clearIcon","appendSpan","_onDeleteFilterMouseDown","_$infoLoad","_onInfoLoadClick","_$infoFilter","_onInfoFilterClick","_$infoSelection","_onInfoSelectionClick","_$infoTableStatus","_onStatusMouseDown","_$infoTableStatusIcon","_renderControls","_renderInfo","_updateInfoVisibility","keyStrokeManager","installKeyStrokeContext","_updateHasFilterText","uninstallKeyStrokeContext","_hideTableStatusTooltip","$resizer","stop","off","selectedControl","resizerVisible","_renderResizer","addClass","remove","removeClass","prependDiv","resize","event","startHeight","height","startX","Math","floor","pageY","resizeMove","one","resizeEnd","rendered","x","dx","maxHeight","footer","newHeight","min","controlContainerInsets","insets","outerHeight","vertical","_revalidateTableLayout","setSelected","controls","tableControls","forEach","control","setParent","render","empty","_renderInfoLoad","_renderInfoTableStatus","_renderInfoFilter","_renderInfoSelection","$info","numRows","rows","length","estRows","estimatedRowCount","maxRows","maxRowCount","computeCountInfo","hasReloadHandler","appendBr","setEnabled","layouting","invalidateLayoutTree","numRowsFiltered","filteredRows","filteredBy","join","hasUserFilter","numRowsSelected","selectedRows","all","tableStatus","SEVERITY_CSS_CLASSES","cssClass","_updateInfoFilterVisibility","_updateInfoSelectionVisibility","_updateInfoTableStatusVisibility","visible","_setInfoVisible","multiSelect","complete","isOneOf","uiState","_showTableStatusTooltip","isVisible","data","animate","setVisible","animationOpts","progress","revalidateLayout","style","width","cssWidth","removeData","widthToContent","tooltipType","_tableInfoTooltip","destroy","create","parent","tableFooter","arrowPosition","arrowPositionUnit","$anchor","n","m","nvl","locale","decimalFormat","format","revalidateLayoutTree","currentControl","onControlContainerClosed","allowedControlHeight","computeControlContainerHeight","show","delay","duration","animateDuration","onControlContainerOpened","extend","completeFunc","growControl","menuBarHeight","footerHeight","containerHeight","size","maxControlHeight","controlContainerHeight","dataMargins","margins","$data","dataMarginsHeight","top","bottom","menuBar","htmlContainer","containerSize","availableSize","subtract","menuBarVisible","htmlMenuBar","get","max","layouted","clearTimeout","_autoHideTableStatusTooltipTimeoutId","_tableStatusTooltip","rendering","message","opts","severity","autoRemove","isError","isWarning","setTimeout","toggleClass","previousControl","_renderResizerVisible","openControlContainer","debounceFunction","debounce","_applyFilter","preventDefault","filterText","addFilter","removeFilterByKey","validateLayoutTree","isEnabled","_toggleTableInfoTooltip","reload","ReloadReason","OVERRIDE_ROW_LIMIT","resetUserFilter","toggleSelection","filterType","currentText","propertyName"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {fields, graphics, HtmlComponent, InputFieldKeyStrokeContext, MenuBarLayout, scout, Status, strings, Table, TableFooterLayout, TableTextUserFilter, Widget} from '../index';\nimport $ from 'jquery';\n\nexport default class TableFooter extends Widget {\n\n  constructor() {\n    super();\n\n    this._compactStyle = false;\n    this.animating = false;\n    this.open = false;\n    this.resizing = false;\n    this.table = null;\n    this._tableRowsChangedHandler = this._onTableRowsChanged.bind(this);\n    this._tableFilterHandler = this._onTableFilter.bind(this);\n    this._tableFilterAddedHandler = this._onTableFilterAdded.bind(this);\n    this._tableFilterRemovedHandler = this._onTableFilterRemoved.bind(this);\n    this._tableRowsSelectedHandler = this._onTableRowsSelected.bind(this);\n    this._tableStatusChangedHandler = this._onTableStatusChanged.bind(this);\n    this._tablePropertyChangeHandler = this._onTablePropertyChange.bind(this);\n  }\n\n  _init(options) {\n    super._init(options);\n\n    // Keystroke context for the search field.\n    this.searchFieldKeyStrokeContext = new InputFieldKeyStrokeContext();\n    this.searchFieldKeyStrokeContext.$bindTarget = function() {\n      return this._$textFilter;\n    }.bind(this);\n    this.searchFieldKeyStrokeContext.$scopeTarget = function() {\n      return this._$textFilter;\n    }.bind(this);\n  }\n\n  _render() {\n    var filter, $filter;\n\n    this.$container = this.$parent.appendDiv('table-footer');\n    this._$window = this.$parent.window();\n    this._$body = this.$parent.body();\n\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new TableFooterLayout(this));\n\n    // --- container for an open control ---\n    this.$controlContainer = this.$container.appendDiv('table-control-container').hide();\n    this.$controlContent = this.$controlContainer.appendDiv('table-control-content');\n\n    // --- table controls section ---\n    this._$controls = this.$container.appendDiv('table-controls');\n\n    // --- info section ---\n    this._$info = this.$container.appendDiv('table-info');\n\n    // text filter\n    $filter = this._$info.appendDiv('table-filter');\n    this._$textFilter = fields.makeTextField(this.$container, 'table-text-filter')\n      .appendTo($filter)\n      .on('input', '', this._createOnFilterFieldInputFunction().bind(this))\n      .placeholder(this.session.text('ui.FilterBy_'));\n\n    filter = this.table.getFilter(TableTextUserFilter.TYPE);\n    if (filter) {\n      this._$textFilter.val(filter.text);\n    }\n    this.$clearIcon = $filter.appendSpan('clear-icon unfocusable needsclick')\n      .on('mousedown', this._onDeleteFilterMouseDown.bind(this));\n\n    // load info (\"X rows loaded, click to reload\")\n    this._$infoLoad = this._$info\n      .appendDiv('table-info-item table-info-load')\n      .on('click', '', this._onInfoLoadClick.bind(this));\n\n    // filter info (\"X rows filtered by Y, click to remove filter\")\n    this._$infoFilter = this._$info\n      .appendDiv('table-info-item table-info-filter')\n      .on('click', '', this._onInfoFilterClick.bind(this));\n\n    // selection info (\"X rows selected, click to select all/none\")\n    this._$infoSelection = this._$info\n      .appendDiv('table-info-item table-info-selection')\n      .on('click', '', this._onInfoSelectionClick.bind(this));\n\n    // table status\n    this._$infoTableStatus = this._$info\n      .appendDiv('table-info-item table-info-status')\n      .on('mousedown', this._onStatusMouseDown.bind(this));\n    this._$infoTableStatusIcon = this._$infoTableStatus\n      .appendSpan('icon font-icon');\n\n    // ------\n\n    this._renderControls();\n    this._renderInfo();\n    this._updateInfoVisibility();\n\n    this.table.on('rowsInserted', this._tableRowsChangedHandler);\n    this.table.on('rowsDeleted', this._tableRowsChangedHandler);\n    this.table.on('allRowsDeleted', this._tableRowsChangedHandler);\n    this.table.on('filter', this._tableFilterHandler);\n    this.table.on('filterAdded', this._tableFilterAddedHandler);\n    this.table.on('filterRemoved', this._tableFilterRemovedHandler);\n    this.table.on('rowsSelected', this._tableRowsSelectedHandler);\n    this.table.on('statusChanged', this._tableStatusChangedHandler);\n    this.table.on('propertyChange', this._tablePropertyChangeHandler);\n\n    this.session.keyStrokeManager.installKeyStrokeContext(this.searchFieldKeyStrokeContext);\n  }\n\n  getFocusableElement() {\n    return this._$textFilter;\n  }\n\n  _renderProperties() {\n    this._updateHasFilterText();\n  }\n\n  _remove() {\n    this.session.keyStrokeManager.uninstallKeyStrokeContext(this.searchFieldKeyStrokeContext);\n    this._hideTableStatusTooltip();\n    this.$resizer = null;\n    this.$controlContainer.stop(false, true);\n    this.animating = false; // Animation may not be started yet due to the delay, hence complete callback may not be executed -> make sure the flag is reset anyway\n    this.open = false;\n\n    this.table.off('rowsInserted', this._tableRowsChangedHandler);\n    this.table.off('rowsDeleted', this._tableRowsChangedHandler);\n    this.table.off('allRowsDeleted', this._tableRowsChangedHandler);\n    this.table.off('filter', this._tableFilterHandler);\n    this.table.off('filterAdded', this._tableFilterAddedHandler);\n    this.table.off('filterRemoved', this._tableFilterRemovedHandler);\n    this.table.off('rowsSelected', this._tableRowsSelectedHandler);\n    this.table.off('statusChanged', this._tableStatusChangedHandler);\n    this.table.off('propertyChange', this._tablePropertyChangeHandler);\n\n    super._remove();\n  }\n\n  _renderResizerVisible() {\n    if (this.selectedControl.resizerVisible) {\n      this._renderResizer();\n      this.$controlContainer.addClass('has-resizer');\n    } else if (this.$resizer) {\n      this.$resizer.remove();\n      this.$resizer = null;\n      this.$controlContainer.removeClass('has-resizer');\n    }\n  }\n\n  _renderResizer() {\n    if (this.$resizer) {\n      return;\n    }\n    this.$resizer = this.$controlContainer.prependDiv('table-control-resize')\n      .on('mousedown', '', resize.bind(this));\n\n    function resize(event) {\n      // Remember current height and start position\n      var startHeight = this.$controlContainer.height(),\n        startX = Math.floor(event.pageY);\n      this._$window\n        .on('mousemove.tablefooter', resizeMove.bind(this))\n        .one('mouseup', resizeEnd.bind(this));\n      this._$body.addClass('row-resize');\n      this.resizing = true;\n\n      function resizeMove(event) {\n        if (!this.rendered) {\n          // footer may be removed in the meantime\n          return;\n        }\n        // Calculate position delta\n        var x = Math.floor(event.pageY);\n        var dx = x - startX;\n        // Ensure control container does not get bigger than the table\n        var maxHeight = this.table.$container.height() - this.table.footer.$container.height();\n        // Calculate new height of table control container\n        var newHeight = Math.min(startHeight - dx, maxHeight);\n        this.$controlContainer.height(newHeight);\n        var controlContainerInsets = graphics.insets(this.$controlContainer);\n        this.$controlContent.outerHeight(newHeight - controlContainerInsets.vertical());\n        this._revalidateTableLayout();\n      }\n\n      function resizeEnd() {\n        if (this.rendered && this.$controlContainer.height() < 100) {\n          this.selectedControl.setSelected(false);\n        }\n\n        this._$window.off('mousemove.tablefooter');\n        this._$body.removeClass('row-resize');\n        this.resizing = false;\n      }\n\n      return false;\n    }\n  }\n\n  _renderControls() {\n    var controls = this.table.tableControls;\n    if (controls) {\n      controls.forEach(function(control) {\n        control.setParent(this);\n        control.render(this._$controls);\n      }.bind(this));\n    } else {\n      this._$controls.empty();\n    }\n  }\n\n  _renderInfo() {\n    this._renderInfoLoad();\n    this._renderInfoTableStatus();\n    this._renderInfoFilter();\n    this._renderInfoSelection();\n  }\n\n  _renderInfoLoad() {\n    var $info = this._$infoLoad,\n      numRows = this.table.rows.length,\n      estRows = this.table.estimatedRowCount,\n      maxRows = this.table.maxRowCount;\n\n    $info.empty();\n    if (!this._compactStyle) {\n      if (numRows <= 1) {\n        $info.appendSpan().text(this.session.text('ui.NumRowLoaded', this.computeCountInfo(numRows)));\n      } else if (estRows && estRows > numRows) {\n        $info.appendSpan().text(this.session.text('ui.NumRowsLoaded', this.computeCountInfo(numRows, estRows)));\n      } else {\n        $info.appendSpan().text(this.session.text('ui.NumRowsLoaded', this.computeCountInfo(numRows)));\n      }\n      if (this.table.hasReloadHandler) {\n        $info.appendBr();\n        if (estRows && maxRows && numRows < estRows && numRows < maxRows) {\n          if (estRows < maxRows) {\n            $info.appendSpan('table-info-button').text(this.session.text('ui.LoadAllData')).appendTo($info);\n          } else {\n            $info.appendSpan('table-info-button').text(this.session.text('ui.LoadNData', this.computeCountInfo(maxRows))).appendTo($info);\n          }\n        } else {\n          $info.appendSpan('table-info-button').text(this.session.text('ui.ReloadData')).appendTo($info);\n        }\n      }\n    } else {\n      if (numRows <= 1) {\n        $info.appendSpan().text(this.session.text('ui.NumRowLoadedMin'));\n      } else {\n        $info.appendSpan().text(this.session.text('ui.NumRowsLoadedMin'));\n      }\n      $info.appendBr();\n      $info.appendSpan('table-info-button').text(this.computeCountInfo(numRows));\n    }\n    $info.setEnabled(this.table.hasReloadHandler);\n\n    if (!this.htmlComp.layouting) {\n      this.invalidateLayoutTree(false);\n    }\n  }\n\n  _renderInfoFilter() {\n    var $info = this._$infoFilter;\n    var numRowsFiltered = this.table.filteredRows().length;\n    var filteredBy = this.table.filteredBy().join(', '); // filteredBy() returns an array\n\n    $info.empty();\n    if (!this._compactStyle) {\n      if (filteredBy) {\n        if (numRowsFiltered <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowFilteredBy', this.computeCountInfo(numRowsFiltered), filteredBy));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsFilteredBy', this.computeCountInfo(numRowsFiltered), filteredBy));\n        }\n      } else {\n        if (numRowsFiltered <= 1) {\n          $info.appendSpan().text(this.session.text('ui.NumRowFiltered', this.computeCountInfo(numRowsFiltered)));\n        } else {\n          $info.appendSpan().text(this.session.text('ui.NumRowsFiltered', this.computeCountInfo(numRowsFiltered)));\n        }\n      }\n      if (this.table.hasUserFilter()) {\n        $info.appendBr();\n        $info.appendSpan('table-info-button').text(this.session.text('ui.RemoveFilter')).appendTo($info);\n      }\n    } else {\n      if (numRowsFiltered <= 1) {\n        $info.appendSpan().text(this.session.text('ui.NumRowFilteredMin'));\n      } else {\n        $info.appendSpan().text(this.session.text('ui.NumRowsFilteredMin'));\n      }\n      $info.appendBr();\n      $info.appendSpan('table-info-button').text(this.computeCountInfo(numRowsFiltered));\n    }\n\n    if (!this.htmlComp.layouting) {\n      this.invalidateLayoutTree(false);\n    }\n  }\n\n  _renderInfoSelection() {\n    var $info = this._$infoSelection,\n      numRows = this.table.filteredRows().length,\n      numRowsSelected = this.table.selectedRows.length,\n      all = numRows > 0 && numRows === numRowsSelected;\n\n    $info.empty();\n    if (!this._compactStyle) {\n      if (numRowsSelected <= 1) {\n        $info.appendSpan().text(this.session.text('ui.NumRowSelected', this.computeCountInfo(numRowsSelected)));\n      } else {\n        $info.appendSpan().text(this.session.text('ui.NumRowsSelected', this.computeCountInfo(numRowsSelected)));\n      }\n      $info.appendBr();\n      $info.appendSpan('table-info-button').text(this.session.text(all ? 'ui.SelectNone' : 'ui.SelectAll')).appendTo($info);\n    } else {\n      if (numRowsSelected <= 1) {\n        $info.appendSpan().text(this.session.text('ui.NumRowSelectedMin'));\n      } else {\n        $info.appendSpan().text(this.session.text('ui.NumRowsSelectedMin'));\n      }\n      $info.appendBr();\n      $info.appendSpan('table-info-button').text(this.computeCountInfo(numRowsSelected));\n    }\n\n    if (!this.htmlComp.layouting) {\n      this.invalidateLayoutTree(false);\n    }\n  }\n\n  _renderInfoTableStatus() {\n    var $info = this._$infoTableStatus;\n    var tableStatus = this.table.tableStatus;\n    $info.removeClass(Status.SEVERITY_CSS_CLASSES);\n    if (tableStatus) {\n      $info.addClass(tableStatus.cssClass());\n    }\n\n    if (!this.htmlComp.layouting) {\n      this.invalidateLayoutTree(false);\n    }\n  }\n\n  _updateInfoVisibility() {\n    this._updateInfoFilterVisibility();\n    this._updateInfoSelectionVisibility();\n    this._updateInfoTableStatusVisibility();\n  }\n\n  _updateInfoFilterVisibility() {\n    var visible = this.table.filteredBy().length > 0;\n    this._setInfoVisible(this._$infoFilter, visible);\n  }\n\n  _updateInfoSelectionVisibility() {\n    var visible = this.table.multiSelect;\n    this._setInfoVisible(this._$infoSelection, visible);\n  }\n\n  _updateInfoTableStatusVisibility() {\n    var visible = this.table.tableStatus;\n    if (visible) {\n      // If the uiState of the tableStatus was not set to hidden (either manually by the\n      // user or automatically by a timeout or other event), show the tooltip when the\n      // \"info visible\" animation has finished. Otherwise, we don't show the tooltip to\n      // not disturb the user.\n      var complete = null;\n      if (!scout.isOneOf(this.table.tableStatus.uiState, 'user-hidden', 'auto-hidden')) {\n        this._$infoTableStatus.addClass('tooltip-active'); // color icon before animation starts\n        complete = function() {\n          // Same check is required again, because this function is called asynchronously\n          if (this.table.tableStatus && !scout.isOneOf(this.table.tableStatus.uiState, 'user-hidden', 'auto-hidden')) {\n            this._showTableStatusTooltip();\n          }\n        }.bind(this);\n      }\n      this._setInfoVisible(this._$infoTableStatus, true, complete);\n    } else {\n      this._hideTableStatusTooltip();\n      this._setInfoVisible(this._$infoTableStatus, false);\n    }\n  }\n\n  _setInfoVisible($info, visible, complete) {\n    if ($info.isVisible() === visible && !(visible && $info.data('hiding'))) {\n      if (complete) {\n        complete();\n      }\n      return;\n    }\n    var animate = this.rendered; // Animate only on a user interaction, no while the table gets rendered\n    if (!animate) {\n      $info.setVisible(visible);\n      return;\n    }\n    if (visible) {\n      var animationOpts = {\n        progress: this.revalidateLayout.bind(this),\n        complete: function() {\n          if (complete) {\n            complete();\n          }\n        }\n      };\n      // Save complete function so that layout may use it\n      $info.data('animationComplete', animationOpts.complete);\n      // If info is shown the first time, set the width to 0 to make animation work\n      if ($info[0].style.width === '') {\n        $info.cssWidth(0);\n      }\n      $info.stop().removeData('hiding').setVisible(true).widthToContent(animationOpts);\n    } else {\n      // Mark element as hiding so that the layout does not try to resize it\n      $info.data('hiding', true);\n      $info.stop().animate({\n        width: 0\n      }, {\n        progress: this.revalidateLayout.bind(this),\n        complete: function() {\n          $info.removeData('hiding');\n          $info.setVisible(false);\n        }\n      });\n    }\n  }\n\n  _toggleTableInfoTooltip($info, tooltipType) {\n    if (this._tableInfoTooltip) {\n      this._tableInfoTooltip.destroy();\n    } else {\n      this._tableInfoTooltip = scout.create(tooltipType, {\n        parent: this,\n        tableFooter: this,\n        cssClass: 'table-info-tooltip',\n        arrowPosition: 50,\n        arrowPositionUnit: '%',\n        $anchor: $info\n      });\n      this._tableInfoTooltip.one('destroy', function() {\n        this._tableInfoTooltip = null;\n      }.bind(this));\n      this._tableInfoTooltip.render();\n    }\n  }\n\n  // n: row count\n  // m: total count, optional. Meaning is '3 of 10 rows'\n  computeCountInfo(n, m) {\n    n = scout.nvl(n, 0);\n    if (m) {\n      return this.session.text('ui.TableRowCount',\n        this.session.text('ui.CountOfApproxTotal',\n          this.session.locale.decimalFormat.format(n),\n          this.session.locale.decimalFormat.format(m)));\n    }\n\n    if (n === 0) {\n      if (this._compactStyle) {\n        return this.session.text('ui.TableRowCount', 0);\n      }\n      return this.session.text('ui.TableRowCount0');\n\n    } else if (n === 1) {\n      return this.session.text('ui.TableRowCount1');\n    }\n    return this.session.text('ui.TableRowCount', this.session.locale.decimalFormat.format(n));\n\n  }\n\n  /* open, close and resize of the container */\n\n  _revalidateTableLayout() {\n    this.table.htmlComp.revalidateLayoutTree();\n  }\n\n  openControlContainer(control) {\n    if (this.open) {\n      // Calling open again may resize the container -> don't return\n    }\n    var currentControl = this.$controlContent.data('control');\n    if (this.animating && currentControl !== control) {\n      // Make sure the existing content is removed if the close animation was aborted and another control selected while the container is still closing\n      // (The done callback won't be executed when calling stop(true))\n      currentControl.onControlContainerClosed();\n    }\n    this.animating = true;\n    this.open = true;\n\n    var allowedControlHeight = this.computeControlContainerHeight(this.table, control);\n\n    var insets = graphics.insets(this.$controlContainer);\n    this.$controlContent.outerHeight(allowedControlHeight - insets.vertical());\n\n    // If container is opened the first time, set the height to 0 to make animation work\n    if (this.$controlContainer[0].style.height === '') {\n      this.$controlContainer.outerHeight(0);\n    }\n\n    if (this.$controlContainer.outerHeight() > allowedControlHeight) {\n      // Container gets smaller -> layout first to prevent having a white area\n      this.table.invalidateLayoutTree();\n    }\n\n    // open container, stop existing (close) animations before\n    // use delay to make sure form is rendered and layouted with new size\n    this.$controlContainer.stop(true).show().delay(1).animate({\n      height: allowedControlHeight\n    }, {\n      duration: this.rendered ? control.animateDuration : 0,\n      complete: function() {\n        this.animating = false;\n        control.onControlContainerOpened();\n        this.table.invalidateLayoutTree();\n      }.bind(this)\n    });\n  }\n\n  closeControlContainer(control, options) {\n    if (!this.open) {\n      return;\n    }\n    options = $.extend({}, {animate: true}, options);\n    this.open = false;\n    this.animating = true;\n    this.table.invalidateLayoutTree();\n\n    var completeFunc = function() {\n      this.animating = false;\n      this.$controlContainer.hide();\n      control.onControlContainerClosed();\n    }.bind(this);\n\n    if (options.animate) {\n      this.$controlContainer.stop(true).show().animate({\n        height: 0\n      }, {\n        duration: control.animateDuration,\n        complete: completeFunc\n      });\n    } else {\n      completeFunc();\n    }\n  }\n\n  computeControlContainerHeight(table, control, growControl) {\n    var menuBarHeight = 0,\n      footerHeight = 0,\n      containerHeight = graphics.size(table.$container).height,\n      maxControlHeight,\n      controlContainerHeight = 0,\n      dataMargins = graphics.margins(scout.nvl(table.$data, table.$container)),\n      dataMarginsHeight = dataMargins.top + dataMargins.bottom,\n      menuBar = table.menuBar,\n      footer = table.footer,\n      htmlContainer = table.htmlComp,\n      containerSize = htmlContainer.availableSize()\n        .subtract(htmlContainer.insets());\n\n    if (!footer) {\n      return;\n    }\n\n    if (table.menuBarVisible && menuBar.visible) {\n      var htmlMenuBar = HtmlComponent.get(menuBar.$container);\n      menuBarHeight = MenuBarLayout.size(htmlMenuBar, containerSize).height;\n    }\n    // Layout table footer and add size of footer (including the control content) to 'height'\n    footerHeight = graphics.size(footer.$container).height;\n    if (footer.open) {\n      if (footer.animating) {\n        // Layout may be called when container stays open but changes its size using an animation.\n        // At that time the controlContainer has not yet the final size, therefore measuring is not possible, but not necessary anyway.\n        controlContainerHeight = control.height;\n      } else {\n        // Measure the real height\n        controlContainerHeight = graphics.size(footer.$controlContainer).height;\n        // Expand control height? (but only if not resizing)\n        if (!footer.resizing && growControl) {\n          controlContainerHeight = Math.max(control.height, controlContainerHeight);\n        }\n      }\n    }\n    // Crop control height (don't do it if table does not have the correct size yet)\n    if (this.table.htmlComp.layouted) {\n      maxControlHeight = containerHeight - (dataMarginsHeight + menuBarHeight + footerHeight);\n      controlContainerHeight = Math.min(controlContainerHeight, maxControlHeight);\n    }\n    return controlContainerHeight;\n  }\n\n  _hideTableStatusTooltip() {\n    clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n    if (this._tableStatusTooltip) {\n      this._tableStatusTooltip.destroy();\n    }\n  }\n\n  _showTableStatusTooltip() {\n    // Remove existing tooltip (might have the wrong css class)\n    if (this._tableStatusTooltip) {\n      this._tableStatusTooltip.destroy();\n      this._tableStatusTooltip = null;\n    }\n\n    // Check needed because the table footer might already be removed again when this\n    // callback is executed (e.g. when the user clicks on another page while the opening\n    // animation is still running).\n    if (!this.rendered && !this.rendering) {\n      return;\n    }\n\n    var tableStatus = this.table.tableStatus;\n    var text = (tableStatus ? tableStatus.message : null);\n    if (strings.empty(text)) {\n      return; // Refuse to show empty tooltip\n    }\n\n    // Create new tooltip\n    var opts = {\n      parent: this,\n      text: text,\n      severity: tableStatus.severity,\n      autoRemove: !tableStatus.isError(),\n      $anchor: this._$infoTableStatusIcon\n    };\n    this._tableStatusTooltip = scout.create('Tooltip', opts);\n    this._tableStatusTooltip.one('destroy', function() {\n      this._tableStatusTooltip = null;\n    }.bind(this));\n    this._tableStatusTooltip.render();\n\n    // Adjust icon style\n    this._$infoTableStatus.addClass('tooltip-active');\n    this._tableStatusTooltip.on('remove', function() {\n      this._$infoTableStatus.removeClass('tooltip-active');\n      // When the tooltip is removed (e.g. because of the auto-remove timeout, or\n      // The user clicked somewhere) set the uiStatus accordingly. Otherwise, it\n      // might pop up again when the table layout is revalidated.\n      clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n      if (this.table.tableStatus && !this.table.tableStatus.isError()) {\n        this.table.tableStatus.uiState = 'auto-hidden';\n      }\n    }.bind(this));\n\n    // Auto-hide unimportant messages\n    clearTimeout(this._autoHideTableStatusTooltipTimeoutId);\n    if (!tableStatus.isError() && !tableStatus.isWarning() && !tableStatus.uiState) {\n      // Already set status to 'auto-hidden', in case the user changes outline before timeout elapses\n      this.table.tableStatus.uiState = 'auto-hidden';\n      this._autoHideTableStatusTooltipTimeoutId = setTimeout(function() {\n        this._hideTableStatusTooltip();\n      }.bind(this), 5000);\n    }\n  }\n\n  _updateHasFilterText() {\n    this._$textFilter.toggleClass('has-text', !!this._$textFilter.val());\n  }\n\n  onControlSelected(control) {\n    var previousControl = this.selectedControl;\n    this.selectedControl = control;\n\n    if (control) {\n      this._renderResizerVisible();\n      if (previousControl && previousControl.height !== control.height) {\n        this.openControlContainer(control);\n      }\n    }\n  }\n\n  _onStatusMouseDown(event) {\n    // Toggle tooltip\n    if (this._tableStatusTooltip) {\n      this._hideTableStatusTooltip();\n      this.table.tableStatus.uiState = 'user-hidden';\n    } else {\n      this._showTableStatusTooltip();\n      if (this._tableStatusTooltip.rendered) {\n        this.table.tableStatus.uiState = 'user-shown';\n      }\n    }\n  }\n\n  _createOnFilterFieldInputFunction() {\n    var debounceFunction = $.debounce(this._applyFilter.bind(this));\n    return function(event) {\n      this._updateHasFilterText();\n      // debounced filter\n      debounceFunction();\n    };\n  }\n\n  _onDeleteFilterMouseDown(event) {\n    this._$textFilter.val('');\n    this._updateHasFilterText();\n    this._applyFilter();\n    event.preventDefault();\n  }\n\n  _applyFilter(event) {\n    var filter,\n      filterText = this._$textFilter.val();\n    if (this.filterText !== filterText) {\n      this.filterText = filterText;\n      if (filterText) {\n        filter = scout.create('TableTextUserFilter', {\n          session: this.session,\n          table: this.table\n        });\n\n        filter.text = filterText;\n        this.table.addFilter(filter);\n      } else {\n        this.table.removeFilterByKey(TableTextUserFilter.TYPE);\n      }\n\n      this.table.filter();\n      this.validateLayoutTree();\n    }\n  }\n\n  _onInfoLoadClick() {\n    if (!this._$infoLoad.isEnabled()) {\n      return;\n    }\n    if (this._compactStyle) {\n      this._toggleTableInfoTooltip(this._$infoLoad, 'TableInfoLoadTooltip');\n    } else {\n      var numRows = this.table.rows.length;\n      var estRows = this.table.estimatedRowCount;\n      var maxRows = this.table.maxRowCount;\n      if (estRows && maxRows && numRows < estRows && numRows < maxRows) {\n        this.table.reload(Table.ReloadReason.OVERRIDE_ROW_LIMIT);\n      } else {\n        this.table.reload();\n      }\n    }\n  }\n\n  _onInfoFilterClick() {\n    if (this._compactStyle) {\n      this._toggleTableInfoTooltip(this._$infoFilter, 'TableInfoFilterTooltip');\n    } else {\n      this.table.resetUserFilter();\n    }\n  }\n\n  _onInfoSelectionClick() {\n    if (this._compactStyle) {\n      this._toggleTableInfoTooltip(this._$infoSelection, 'TableInfoSelectionTooltip');\n    } else {\n      this.table.toggleSelection();\n    }\n  }\n\n  _onTableRowsChanged(event) {\n    this._renderInfoLoad();\n  }\n\n  _onTableFilter(event) {\n    this._renderInfoFilter();\n    this._renderInfoSelection();\n  }\n\n  _onTableFilterAdded(event) {\n    this._renderInfoFilter();\n    this._updateInfoFilterVisibility();\n    if (event.filter.filterType === TableTextUserFilter.TYPE) {\n      // Do not update the content when the value does not change. This is the case when typing text in\n      // the UI. If we would call val() unconditionally, the current cursor position will get lost.\n      var currentText = this._$textFilter.val();\n      if (currentText !== event.filter.text) {\n        this._$textFilter.val(event.filter.text);\n        this._updateHasFilterText();\n        this._applyFilter();\n      }\n    }\n  }\n\n  _onTableFilterRemoved(event) {\n    this._renderInfoFilter();\n    this._updateInfoFilterVisibility();\n    if (event.filter.filterType === TableTextUserFilter.TYPE) {\n      this._$textFilter.val('');\n      this._updateHasFilterText();\n      this._applyFilter();\n    }\n  }\n\n  _onTableRowsSelected(event) {\n    this._renderInfoSelection();\n  }\n\n  _onTableStatusChanged(event) {\n    this._renderInfoTableStatus();\n    this._updateInfoTableStatusVisibility();\n  }\n\n  _onTablePropertyChange(event) {\n    if (event.propertyName === 'multiSelect') {\n      this._updateInfoSelectionVisibility();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}