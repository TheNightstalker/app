{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, CompactTreeDownKeyStroke, CompactTreeLeftKeyStroke, CompactTreeRightKeyStroke, CompactTreeUpKeyStroke, HtmlComponent, MenuItemsOrder, Range, scout, Tree, TreeLayout } from '../index';\n\nvar CompactTree = /*#__PURE__*/function (_Tree) {\n  _inherits(CompactTree, _Tree);\n\n  var _super = _createSuper(CompactTree);\n\n  function CompactTree() {\n    var _this;\n\n    _classCallCheck(this, CompactTree);\n\n    _this = _super.call(this);\n    _this.$nodesContainer;\n    _this._scrolldirections = 'y';\n    return _this;\n  }\n  /**\n   * @override Tree.js\n   */\n\n\n  _createClass(CompactTree, [{\n    key: \"_initTreeKeyStrokeContext\",\n    value: function _initTreeKeyStrokeContext() {\n      this.keyStrokeContext.registerKeyStroke([new CompactTreeUpKeyStroke(this), new CompactTreeDownKeyStroke(this), new CompactTreeLeftKeyStroke(this), new CompactTreeRightKeyStroke(this)]);\n    }\n  }, {\n    key: \"_createTreeNode\",\n    value: function _createTreeNode(nodeModel) {\n      nodeModel = scout.nvl(nodeModel, {});\n      nodeModel.parent = this;\n      return scout.create('CompactTreeNode', nodeModel);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this.$container = this.$parent.appendDiv('compact-tree');\n      var layout = new TreeLayout(this);\n      this.htmlComp = HtmlComponent.install(this.$container, this.session);\n      this.htmlComp.setLayout(layout);\n      this.$data = this.$container.appendDiv('tree-data');\n\n      this._installScrollbars({\n        borderless: true\n      });\n\n      this.menuBar = scout.create('MenuBar', {\n        parent: this,\n        menuOrder: new MenuItemsOrder(this.session, 'Tree')\n      });\n      this.menuBar.render();\n      this.$nodesContainer = this.$data.appendDiv('nodes');\n\n      this._updateNodeDimensions();\n\n      this._renderViewport();\n\n      this.invalidateLayoutTree();\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_calculateCurrentViewRange\",\n    value: function _calculateCurrentViewRange() {\n      this.viewRangeSize = this.visibleNodesFlat.length;\n      return new Range(0, Math.max(this.visibleNodesFlat.length, 0));\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"calculateViewRangeSize\",\n    value: function calculateViewRangeSize() {\n      return this.visibleNodesFlat.length;\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_insertNodeInDOMAtPlace\",\n    value: function _insertNodeInDOMAtPlace(node, index) {\n      var visibleNodeBefore = this.visibleNodesFlat[index - 1];\n      var n;\n\n      if (!visibleNodeBefore) {\n        node.$node.prependTo(this.$nodesContainer);\n      } else if (visibleNodeBefore.level < node.level) {\n        // insert after first child node (title from the level above)\n        node.$node.insertAfter(visibleNodeBefore.$node.children()[0]);\n      } else {\n        n = visibleNodeBefore.$node;\n\n        for (var i = 0; i < visibleNodeBefore.level - node.level; i++) {\n          n = n.parent();\n        }\n\n        node.$node.insertAfter(n);\n      }\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"selectNodes\",\n    value: function selectNodes(nodes, debounceSend) {\n      var selectedSectionNodes = [];\n      nodes = arrays.ensure(nodes);\n      nodes.forEach(function (node) {\n        // If a section is selected, automatically change selection to first section-node\n        if (node.isSection()) {\n          if (node.childNodes.length > 0) {\n            selectedSectionNodes.push(node.childNodes[0]);\n          }\n        } else {\n          selectedSectionNodes.push(node);\n        }\n      }, this);\n\n      _get(_getPrototypeOf(CompactTree.prototype), \"selectNodes\", this).call(this, selectedSectionNodes);\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_renderExpansion\",\n    value: function _renderExpansion(node) {// nop (not supported by CompactTree)\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_updateItemPath\",\n    value: function _updateItemPath() {// nop (not supported by CompactTree)\n    }\n  }]);\n\n  return CompactTree;\n}(Tree);\n\nexport { CompactTree as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/tree/CompactTree.js"],"names":["arrays","CompactTreeDownKeyStroke","CompactTreeLeftKeyStroke","CompactTreeRightKeyStroke","CompactTreeUpKeyStroke","HtmlComponent","MenuItemsOrder","Range","scout","Tree","TreeLayout","CompactTree","$nodesContainer","_scrolldirections","keyStrokeContext","registerKeyStroke","nodeModel","nvl","parent","create","$container","$parent","appendDiv","layout","htmlComp","install","session","setLayout","$data","_installScrollbars","borderless","menuBar","menuOrder","render","_updateNodeDimensions","_renderViewport","invalidateLayoutTree","viewRangeSize","visibleNodesFlat","length","Math","max","node","index","visibleNodeBefore","n","$node","prependTo","level","insertAfter","children","i","nodes","debounceSend","selectedSectionNodes","ensure","forEach","isSection","childNodes","push"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, CompactTreeDownKeyStroke, CompactTreeLeftKeyStroke, CompactTreeRightKeyStroke, CompactTreeUpKeyStroke, HtmlComponent, MenuItemsOrder, Range, scout, Tree, TreeLayout} from '../index';\n\nexport default class CompactTree extends Tree {\n\n  constructor() {\n    super();\n    this.$nodesContainer;\n    this._scrolldirections = 'y';\n  }\n\n  /**\n   * @override Tree.js\n   */\n  _initTreeKeyStrokeContext() {\n    this.keyStrokeContext.registerKeyStroke([\n      new CompactTreeUpKeyStroke(this),\n      new CompactTreeDownKeyStroke(this),\n      new CompactTreeLeftKeyStroke(this),\n      new CompactTreeRightKeyStroke(this)\n    ]);\n  }\n\n  _createTreeNode(nodeModel) {\n    nodeModel = scout.nvl(nodeModel, {});\n    nodeModel.parent = this;\n    return scout.create('CompactTreeNode', nodeModel);\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('compact-tree');\n\n    var layout = new TreeLayout(this);\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(layout);\n\n    this.$data = this.$container.appendDiv('tree-data');\n    this._installScrollbars({\n      borderless: true\n    });\n    this.menuBar = scout.create('MenuBar', {\n      parent: this,\n      menuOrder: new MenuItemsOrder(this.session, 'Tree')\n    });\n    this.menuBar.render();\n\n    this.$nodesContainer = this.$data.appendDiv('nodes');\n    this._updateNodeDimensions();\n    this._renderViewport();\n    this.invalidateLayoutTree();\n  }\n\n  /**\n   * @override\n   */\n  _calculateCurrentViewRange() {\n    this.viewRangeSize = this.visibleNodesFlat.length;\n    return new Range(0, Math.max(this.visibleNodesFlat.length, 0));\n  }\n\n  /**\n   * @override\n   */\n  calculateViewRangeSize() {\n    return this.visibleNodesFlat.length;\n  }\n\n  /**\n   * @override\n   */\n  _insertNodeInDOMAtPlace(node, index) {\n    var visibleNodeBefore = this.visibleNodesFlat[index - 1];\n    var n;\n    if (!visibleNodeBefore) {\n      node.$node.prependTo(this.$nodesContainer);\n    } else if (visibleNodeBefore.level < node.level) {\n      // insert after first child node (title from the level above)\n      node.$node.insertAfter(visibleNodeBefore.$node.children()[0]);\n    } else {\n      n = visibleNodeBefore.$node;\n      for (var i = 0; i < visibleNodeBefore.level - node.level; i++) {\n        n = n.parent();\n      }\n      node.$node.insertAfter(n);\n    }\n  }\n\n  /**\n   * @override\n   */\n  selectNodes(nodes, debounceSend) {\n    var selectedSectionNodes = [];\n    nodes = arrays.ensure(nodes);\n    nodes.forEach(function(node) {\n      // If a section is selected, automatically change selection to first section-node\n      if (node.isSection()) {\n        if (node.childNodes.length > 0) {\n          selectedSectionNodes.push(node.childNodes[0]);\n        }\n      } else {\n        selectedSectionNodes.push(node);\n      }\n    }, this);\n\n    super.selectNodes(selectedSectionNodes);\n  }\n\n  /**\n   * @override\n   */\n  _renderExpansion(node) {\n    // nop (not supported by CompactTree)\n  }\n\n  /**\n   * @override\n   */\n  _updateItemPath() {\n    // nop (not supported by CompactTree)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}