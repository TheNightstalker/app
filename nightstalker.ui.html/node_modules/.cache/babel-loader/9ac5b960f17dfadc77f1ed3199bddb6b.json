{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout, Dimension, graphics, HtmlComponent } from '../index';\nimport $ from 'jquery';\n\nvar TagBarLayout = /*#__PURE__*/function (_AbstractLayout) {\n  _inherits(TagBarLayout, _AbstractLayout);\n\n  var _super = _createSuper(TagBarLayout);\n\n  function TagBarLayout(tagBar) {\n    var _this;\n\n    _classCallCheck(this, TagBarLayout);\n\n    _this = _super.call(this);\n    _this.tagBar = tagBar;\n    return _this;\n  }\n\n  _createClass(TagBarLayout, [{\n    key: \"layout\",\n    value: function layout($container) {\n      var htmlContainer = HtmlComponent.get($container);\n      var hasTags = this.tagBar.tags && this.tagBar.tags.length > 0;\n\n      if (hasTags) {\n        var availableSize = htmlContainer.availableSize().subtract(htmlContainer.insets());\n        var maxTagsWidth = availableSize.width;\n        var prefTagsWidth = 0;\n        var overflow = false; // 1. check if overflow occurs\n\n        var $te, i;\n        var $tagElements = $container.find('.tag-element');\n        var numTagElements = $tagElements.length;\n        var teSizes = [];\n        $tagElements.removeClass('hidden'); // use a for loop, because don't want to loop all elements when we already know the rest is in overflow\n\n        for (i = numTagElements - 1; i >= 0; i--) {\n          $te = $($tagElements[i]);\n          teSizes[i] = graphics.size($te, {\n            includeMargin: true\n          });\n          overflow = prefTagsWidth + teSizes[i].width > maxTagsWidth;\n\n          if (overflow) {\n            break;\n          }\n\n          prefTagsWidth += teSizes[i].width;\n        } // 2. add overflow icon\n\n\n        this.tagBar.setOverflowVisible(overflow);\n\n        if (overflow) {\n          prefTagsWidth = graphics.size(this.tagBar.$overflowIcon, {\n            includeMargin: true\n          }).width;\n\n          for (i = numTagElements - 1; i >= 0; i--) {\n            $te = $($tagElements[i]); // all elements with a greater index are hidden for sure\n\n            var teSize = teSizes[i];\n\n            if (!teSize) {\n              $te.addClass('hidden');\n              continue;\n            } // we must re-check the rest again, because we have added the\n            // overflow icon and thus we have less space for tags\n\n\n            if (prefTagsWidth + teSizes[i].width > maxTagsWidth) {\n              $te.addClass('hidden');\n            } else {\n              prefTagsWidth += teSizes[i].width;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"preferredLayoutSize\",\n    value: function preferredLayoutSize($container, options) {\n      var htmlContainer = HtmlComponent.get($container);\n      var hasTags = this.tagBar.tags && this.tagBar.tags.length > 0;\n      var availableSize = htmlContainer.availableSize();\n      var prefTagsWidth = 0;\n\n      if (!hasTags) {\n        return new Dimension(0, availableSize.height);\n      }\n\n      var $tagElements = $container.find('.tag-element');\n      $tagElements.removeClass('hidden');\n      $tagElements.each(function () {\n        prefTagsWidth += graphics.size($(this), {\n          includeMargin: true\n        }).width;\n      });\n      return new Dimension(prefTagsWidth, availableSize.height);\n    }\n  }]);\n\n  return TagBarLayout;\n}(AbstractLayout);\n\nexport { TagBarLayout as default };","map":{"version":3,"sources":["C:/Tools/workspace/nightstalker/nightstalker.ui.html/node_modules/@eclipse-scout/core/src/tagbar/TagBarLayout.js"],"names":["AbstractLayout","Dimension","graphics","HtmlComponent","$","TagBarLayout","tagBar","$container","htmlContainer","get","hasTags","tags","length","availableSize","subtract","insets","maxTagsWidth","width","prefTagsWidth","overflow","$te","i","$tagElements","find","numTagElements","teSizes","removeClass","size","includeMargin","setOverflowVisible","$overflowIcon","teSize","addClass","options","height","each"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout, Dimension, graphics, HtmlComponent} from '../index';\nimport $ from 'jquery';\n\nexport default class TagBarLayout extends AbstractLayout {\n\n  constructor(tagBar) {\n    super();\n    this.tagBar = tagBar;\n  }\n\n  layout($container) {\n    var htmlContainer = HtmlComponent.get($container);\n    var hasTags = this.tagBar.tags && this.tagBar.tags.length > 0;\n\n    if (hasTags) {\n      var availableSize = htmlContainer.availableSize()\n        .subtract(htmlContainer.insets());\n      var maxTagsWidth = availableSize.width;\n      var prefTagsWidth = 0;\n      var overflow = false;\n\n      // 1. check if overflow occurs\n      var $te, i;\n      var $tagElements = $container.find('.tag-element');\n      var numTagElements = $tagElements.length;\n      var teSizes = [];\n      $tagElements.removeClass('hidden');\n\n      // use a for loop, because don't want to loop all elements when we already know the rest is in overflow\n      for (i = numTagElements - 1; i >= 0; i--) {\n        $te = $($tagElements[i]);\n        teSizes[i] = graphics.size($te, {\n          includeMargin: true\n        });\n        overflow = (prefTagsWidth + teSizes[i].width) > maxTagsWidth;\n        if (overflow) {\n          break;\n        }\n        prefTagsWidth += teSizes[i].width;\n      }\n\n      // 2. add overflow icon\n      this.tagBar.setOverflowVisible(overflow);\n\n      if (overflow) {\n        prefTagsWidth = graphics.size(this.tagBar.$overflowIcon, {\n          includeMargin: true\n        }).width;\n        for (i = numTagElements - 1; i >= 0; i--) {\n          $te = $($tagElements[i]);\n\n          // all elements with a greater index are hidden for sure\n          var teSize = teSizes[i];\n          if (!teSize) {\n            $te.addClass('hidden');\n            continue;\n          }\n\n          // we must re-check the rest again, because we have added the\n          // overflow icon and thus we have less space for tags\n          if ((prefTagsWidth + teSizes[i].width) > maxTagsWidth) {\n            $te.addClass('hidden');\n          } else {\n            prefTagsWidth += teSizes[i].width;\n          }\n        }\n      }\n    }\n  }\n\n  preferredLayoutSize($container, options) {\n    var htmlContainer = HtmlComponent.get($container);\n    var hasTags = this.tagBar.tags && this.tagBar.tags.length > 0;\n    var availableSize = htmlContainer.availableSize();\n    var prefTagsWidth = 0;\n\n    if (!hasTags) {\n      return new Dimension(0, availableSize.height);\n    }\n\n    var $tagElements = $container.find('.tag-element');\n    $tagElements.removeClass('hidden');\n    $tagElements.each(function() {\n      prefTagsWidth += graphics.size($(this), {\n        includeMargin: true\n      }).width;\n    });\n    return new Dimension(prefTagsWidth, availableSize.height);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}